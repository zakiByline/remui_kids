{{!
    Custom Dashboard Template for remui_kids theme
    
    This template provides different dashboard layouts based on user cohorts:
    - Elementary (Grades 1-3)
    - Middle School (Grades 4-7) 
    - High School (Grades 8-12)
    - Default (fallback)
}}

{{> theme_remui_kids/common_start}}

<!-- Chart.js Library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

<!-- Hide Footer CSS -->
<style>


/* Hide any footer-related elements */
.elementary-student-sidebar ~ #page-footer,
.elementary-student-sidebar ~ .footer,
.elementary-student-sidebar ~ footer,
.elementary-student-sidebar ~ #footer,
.elementary-student-sidebar ~ .page-footer,
.elementary-student-sidebar ~ .moodle-footer,
.elementary-student-sidebar ~ .theme-footer,
.elementary-dashboard #page-footer,
.elementary-dashboard .footer,
.elementary-dashboard footer,
.elementary-dashboard #footer,
.elementary-dashboard .page-footer,
.elementary-dashboard .moodle-footer,
.elementary-dashboard .theme-footer,
#page-footer,
.footer,
footer,
#footer,
.page-footer,
.moodle-footer,
.theme-footer,
.footer-panel,
.dashboard-footer {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
}


/* Dashboard Padding Fix - Add top margin to prevent cutting */
.elementary-dashboard,
.middle-dashboard,
.default-dashboard {
    padding-top: 0 !important;
   
}

/* AI Learning Assistant Launcher - Hidden when card is in dashboard */
.ai-learning-launcher {
    display: none !important;
}

.ai-learning-btn {
    display: flex;
    align-items: center;
    gap: 12px;
    border: none;
    border-radius: 999px;
    padding: 14px 22px;
    background: linear-gradient(135deg, #4f46e5 0%, #3b82f6 100%);
    color: #fff;
    font-weight: 600;
    box-shadow: 0 15px 30px rgba(59, 130, 246, 0.35);
    cursor: pointer;
    min-width: 220px;
    text-align: left;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.ai-learning-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 20px 35px rgba(59, 130, 246, 0.45);
}

.ai-learning-btn small {
    font-weight: 400;
    opacity: 0.9;
    display: block;
    font-size: 0.8rem;
}

.ai-learning-icon {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.15);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
}

.ai-learning-modal {
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.75);
    z-index: 1200;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 30px;
}

.ai-learning-modal.active {
    display: flex;
}

.ai-learning-modal-content {
    background: #fff;
    width: min(1000px, 95%);
    height: min(90vh, 900px);
    border-radius: 24px;
    box-shadow: 0 30px 60px rgba(15, 23, 42, 0.35);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.ai-learning-modal-header {
    padding: 20px 24px;
    background: linear-gradient(135deg, #4f46e5 0%, #3b82f6 100%);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 20px;
}

.ai-learning-modal-header p {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
}

.ai-learning-modal-header span {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.85);
}

.ai-learning-modal iframe {
    flex: 1;
    border: none;
    width: 100%;
    background: #f8fafc;
}

.ai-learning-close {
    border: none;
    background: rgba(255, 255, 255, 0.15);
    color: #fff;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    font-size: 1.2rem;
    cursor: pointer;
}

.ai-learning-close:hover {
    background: rgba(255, 255, 255, 0.25);
}

body.ai-assistant-modal-open {
    overflow: hidden;
}

@media (max-width: 768px) {
    .ai-learning-launcher {
        right: 15px;
        bottom: 15px;
    }
    
    .ai-learning-btn {
        padding: 12px 16px;
        min-width: 0;
        border-radius: 18px;
    }
    
    .ai-learning-btn small {
        display: none;
    }
    
    .ai-learning-modal {
        padding: 10px;
    }
}

/* Adventure Dashboard Card Styling */
.adventure-card-item {
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.04);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    width: 100%;
    margin-bottom: 1.25rem;
    border: 1px solid rgba(0,0,0,0.02);
    transition: transform 0.25s ease;
}

.adventure-card-item:hover {
    transform: translateY(-3px);
}

.adventure-banner-container {
    height: 140px;
    position: relative;
    overflow: hidden;
    background: linear-gradient(135deg, #9be7ff 0%, #8ec5ff 100%);
}

.adventure-banner-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.adventure-banner-container .banner-placeholder {
    width: 100%;
    height: 100%;
    background: url('https://img.freepik.com/free-vector/kids-play-nature-background_1308-41716.jpg') center/cover no-repeat;
    opacity: 0.8;
}

.adventure-grade-overlay {
    position: absolute;
    top: 10px;
    right: 12px;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 2px;
}

.adventure-grade-text {
    color: #fff;
    font-weight: 700;
    font-size: 0.8rem;
    text-shadow: 0 1px 3px rgba(0,0,0,0.4);
}

.adventure-content-wrapper {
    padding: 1rem;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.6rem;
}

.adventure-course-title {
    margin: 0;
    font-size: 1.55rem;
    font-weight: 700;
    line-height: 1.2;
    background: linear-gradient(90deg, #6366f1 0%, #10b981 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.adventure-course-title.secondary {
    background: linear-gradient(90deg, #ec4899 0%, #f97316 50%, #eab308 100%);
}

.adventure-status-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: #f0fdf4;
    color: #15803d;
    padding: 6px 14px;
    border-radius: 999px;
    font-weight: 600;
    font-size: 0.85rem;
    border: 1px solid #dcfce7;
}

.adventure-journey-meter-card {
    width: 100%;
    background: #f8fafc;
    border-radius: 18px;
    padding: 0.9rem;
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
}

.journey-meter-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.journey-meter-label {
    font-weight: 700;
    color: #64748b;
    font-size: 0.75rem;
}

.journey-meter-value {
    font-weight: 700;
    color: #1e293b;
    font-size: 0.8rem;
}

.journey-progress-track {
    height: 10px;
    background: #e2e8f0;
    border-radius: 999px;
    overflow: hidden;
    width: 100%;
}

.journey-progress-fill {
    height: 100%;
    border-radius: 999px;
    background: linear-gradient(90deg, 
        #60a5fa 0%, #60a5fa 20%, 
        #2dd4bf 20%, #2dd4bf 40%, 
        #4ade80 40%, #4ade80 60%, 
        #facc15 60%, #facc15 80%, 
        #fb923c 80%, #fb923c 100%);
    transition: width 0.4s ease;
}

.adventure-stats-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
    width: 100%;
}

.adventure-stat-box {
    background: #fff;
    border: 1px solid #f1f5f9;
    border-radius: 16px;
    padding: 0.75rem;
    text-align: center;
    box-shadow: 0 3px 5px -1px rgba(0, 0, 0, 0.03);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.3rem;
}

.stat-icon-circle {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 4px;
    font-size: 0.95rem;
}

.stat-icon-circle.blue { background: #eff6ff; color: #3b82f6; }
.stat-icon-circle.green { background: #f0fdf4; color: #22c55e; }

.stat-box-value {
    font-size: 1rem;
    font-weight: 700;
    color: #1e293b;
    margin: 0;
}

.stat-box-label {
    font-size: 0.75rem;
    color: #64748b;
    font-weight: 600;
    margin: 0;
}

.adventure-action-button {
    width: 100%;
    background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
    color: #fff;
    text-decoration: none;
    text-align: center;
    padding: 12px;
    border-radius: 16px;
    font-weight: 700;
    font-size: 0.9rem;
    box-shadow: 0 8px 16px rgba(34, 197, 94, 0.2);
    transition: all 0.2s;
    margin-top: 0.5rem;
    border: none;
    cursor: pointer;
    display: block;
}

.adventure-action-button:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 18px rgba(34, 197, 94, 0.25);
    color: #fff;
    text-decoration: none;
}

.adventure-action-button.completed {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
}

.adventure-action-button.in-progress {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
}

.adventure-empty-box {
    width: 100%;
    height: 50px;
    background: #fff;
    border: 1px solid rgba(0,0,0,0.05);
    border-radius: 16px;
    margin-top: 1rem;
}

/* Elementary Course Cards (dashboard) */
.elementary-courses-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

.elementary-course-card {
    background: #ffffff;
    border-radius: 16px;
    border: 1px solid #e5e7eb;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    min-height: 340px;
    transition: all 0.3s ease;
    position: relative;
}

.elementary-course-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #3b82f6 0%, #10b981 50%, #f59e0b 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.elementary-course-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    border-color: #d1d5db;
}

.elementary-course-card:hover::before {
    opacity: 1;
}

.dashboard-topbar {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 2rem;
    padding: 1rem 0;
}

.search-bar {
    flex: 1;
    max-width: 360px;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.6rem 0.85rem;
    border-radius: 999px;
    border: 1px solid #e5e7eb;
    background: #ffffff;
    box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.06);
}

.search-bar i {
    color: #94a3b8;
    font-size: 0.95rem;
}

.search-bar input {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    font-size: 0.9rem;
    color: #1f2937;
}

.topbar-meta {
    color: #475569;
    font-size: 0.9rem;
    font-weight: 600;
    background: linear-gradient(135deg, rgba(100, 116, 139, 0.1) 0%, rgba(71, 85, 105, 0.05) 100%);
    padding: 0.75rem 1.5rem;
    border-radius: 20px;
    border: 1px solid rgba(148, 163, 184, 0.2);
    backdrop-filter: blur(10px);
}

.topbar-meta span {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.topbar-meta span::before {
    content: 'ðŸ“š';
    font-size: 1rem;
}

.elementary-courses-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
}

.leaderboard-panel {
    background: #ffffff;
    border-radius: 16px;
    border: 1px solid #e5e7eb;
    padding: 1.25rem;
    box-shadow: 0 10px 25px rgba(15, 23, 42, 0.08);
}

.leaderboard-panel header {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    margin-bottom: 1rem;
}

.leaderboard-panel header h4 {
    margin: 0;
    font-size: 1.05rem;
    color: #0f172a;
}

.leaderboard-panel header small {
    color: #64748b;
    font-size: 0.8rem;
}

.leaderboard-tabs {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.leaderboard-tabs button {
    flex: 1;
    background: #f1f5f9;
    border: none;
    border-radius: 999px;
    padding: 0.35rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 600;
    color: #475467;
    cursor: pointer;
}

.leaderboard-tabs button.active {
    background: #3b82f6;
    color: #ffffff;
}

.leaderboard-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.leaderboard-item {
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
    background: #f8fafc;
}

.leaderboard-item.current {
    border-color: #3b82f6;
    background: #ffffff;
    box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.2);
}

.leaderboard-rank {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: #e0f2fe;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    color: #1d4ed8;
}

.leaderboard-item.current .leaderboard-rank {
    background: #3b82f6;
    color: #fff;
}

.leaderboard-info {
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
    font-size: 0.85rem;
}

.leaderboard-info strong {
    font-weight: 600;
    color: #0f172a;
}

.leaderboard-score {
    font-size: 0.9rem;
    font-weight: 700;
    color: #0f172a;
}

.leaderboard-footer {
    margin-top: 1rem;
    text-align: center;
}

.leaderboard-footer a {
    text-decoration: none;
    color: #3b82f6;
    font-weight: 600;
    font-size: 0.85rem;
}

.course-card-hero {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    height: 110px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    border-bottom: 1px solid #f1f5f9;
}

.course-card-hero::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(16, 185, 129, 0.05) 100%);
    pointer-events: none;
}

.course-hero-icon {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border: 2px solid #e5e7eb;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #6b7280;
    font-size: 1.8rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    position: relative;
    z-index: 2;
    transition: all 0.3s ease;
}

.elementary-course-card:hover .course-hero-icon {
    transform: scale(1.05);
    border-color: #d1d5db;
    box-shadow: 0 8px 12px -1px rgba(0, 0, 0, 0.1), 0 4px 6px -1px rgba(0, 0, 0, 0.06);
}

.course-card-hero .course-hero-img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.course-card-body {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    flex: 1;
    background: #ffffff;
}

.course-title-row {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.course-status-badges {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.course-status-badge {
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.course-status-badge.completed {
    background: #dcfce7;
    color: #166534;
}

.course-status-badge.in-progress {
    background: #dbeafe;
    color: #1e40af;
}

.course-status-badge.not-started {
    background: #fef3c7;
    color: #92400e;
}

.course-title {
    margin: 0 0 0.25rem 0;
    font-size: 1.15rem;
    font-weight: 700;
    color: #1f2937;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.course-grade-pill {
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    color: #92400e;
    padding: 0.35rem 0.85rem;
    border-radius: 999px;
    font-weight: 600;
    font-size: 0.85rem;
    align-self: flex-start;
}

.course-summary {
    margin: 0;
    font-size: 0.9rem;
    color: #4b5563;
    line-height: 1.4;
}

.progress-bar-wrapper {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin: 0.5rem 0;
    padding: 1rem;
    background: #f8fafc;
    border-radius: 12px;
    border: 1px solid #f1f5f9;
}

.progress-text {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.85rem;
    font-weight: 600;
    color: #374151;
}

.progress-label {
    color: #6b7280;
}

.progress-value {
    color: #1f2937;
    font-weight: 700;
}

.progress-track {
    width: 100%;
    height: 12px;
    background: #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
    position: relative;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

.progress-fill {
    height: 100%;
    border-radius: 8px;
    background: linear-gradient(90deg, #3b82f6 0%, #10b981 100%);
    transition: width 1s ease;
    position: relative;
}

.progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    border-radius: inherit;
}

.course-stats-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 2rem;
    margin-top: 1rem;
    padding: 0 1.5rem;
}

.stat-chip {
    background: #ffffff;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
    padding: 0.875rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.75rem;
    color: #374151;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    transition: all 0.2s ease;
}

.stat-chip:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.stat-chip i {
    font-size: 1.1rem;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.stat-chip.lessons i {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    color: #1d4ed8;
    border: 1px solid #93c5fd;
}

.stat-chip.activities i {
    background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
    color: #15803d;
    border: 1px solid #86efac;
}

.stat-chip.time i {
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    color: #92400e;
    border: 1px solid #fcd34d;
}

.stat-chip.points i {
    background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
    color: #7c2d12;
    border: 1px solid #d8b4fe;
}

.stat-chip .stat-content {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
    min-width: 0;
    flex: 1;
}

.stat-chip strong {
    display: block;
    font-size: 1rem;
    color: #111827;
    font-weight: 700;
    line-height: 1.2;
}

.stat-chip small {
    font-size: 0.7rem;
    color: #6b7280;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.course-actions {
    margin-top: auto;
    padding-top: 1rem;
    border-top: 1px solid #f1f5f9;
}

.kid-course-cta {
    text-decoration: none;
    border-radius: 10px;
    padding: 0.875rem 1.5rem;
    font-weight: 600;
    font-size: 0.875rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    border: none;
    cursor: pointer;
    width: 100%;
    color: #ffffff;
    position: relative;
    overflow: hidden;
}

.kid-course-cta::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.kid-course-cta:hover::before {
    left: 100%;
}
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    color: white;
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    box-shadow: 0 12px 20px rgba(37, 99, 235, 0.35);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    width: 100%;
}

.kid-course-cta.completed {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
}

.kid-course-cta.completed:hover {
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
}

.kid-course-cta.in-progress {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
}

.kid-course-cta.in-progress:hover {
    background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
}

.kid-course-cta.not-started {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
}

.kid-course-cta.not-started:hover {
    background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);
}

.kid-course-cta:hover {
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .course-card-body {
        padding: 1rem 1.2rem;
    }

    .course-title-row {
        flex-direction: column;
        gap: 0.4rem;
    }

    .course-card-hero {
        height: 70px;
    }

    .course-stats-row {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    }

    .kid-course-cta {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .elementary-courses-container {
        grid-template-columns: 1fr;
    }

    .progress-track {
        height: 10px;
    }

    .stat-chip {
        padding: 0.5rem;
    }
}

/* High School Dashboard - Extra margin to prevent cutting */
.highschool-dashboard {
    padding-top: 0 !important;
    color: var(--hs-muted, #4d5f7a);
}
.highschool-dashboard .dashboard-metrics .metric-card {
    padding: 0.5rem;
}
.highschool-dashboard-wrapper {
    --hs-dominant: #e7effc;
    --hs-secondary: #1f3a60;
    --hs-surface: #f4f7ff;
    --hs-muted: #4d5f7a;
    --hs-border: #c8d7f0;
    --hs-accent: #f7c948;
    --hs-success: #3fb37f;
    --hs-depth: #d4e2fb;
    --hs-shadow: rgba(31, 58, 96, 0.12);
    position: relative;
    margin-left: 230px;
    padding: 30px 30px 40px 30px;
    width: calc(127vw - 320px);
    max-width: calc(103vw - 320px);
    min-height: calc(100vh - 80px);
    box-sizing: border-box;
}

/* 60-30-10 palette for the high school dashboard:
   60% calm blues (dominant), 30% deep navy structure, 10% optimistic yellow accent */

.highschool-dashboard .analytics-dashboard,
.highschool-dashboard .middle-courses-section,
.highschool-dashboard .enhanced-active-sections,
.highschool-dashboard .learning-progress-sidebar,
.highschool-dashboard .middle-sidebar .sidebar-section,
.highschool-dashboard .weekly-activity-section {
    background: var(--hs-surface);
    border: 1px solid var(--hs-border);
    border-radius: 22px;
    box-shadow: 0 25px 40px var(--hs-shadow);
    color: var(--hs-muted);
}

.highschool-dashboard .section-header,
.highschool-dashboard .progress-header,
.highschool-dashboard .dashboard-header {
    color: var(--hs-secondary);
}

.highschool-dashboard .dashboard-metrics .metric-card {
    background: linear-gradient(160deg, var(--hs-surface) 0%, var(--hs-dominant) 100%);
    border: 1px solid var(--hs-border);
    box-shadow: 0 18px 35px var(--hs-shadow);
}

.highschool-dashboard .metric-card::before {
    background: linear-gradient(90deg, var(--hs-secondary), rgba(31, 58, 96, 0.75));
    opacity: 0.25;
}

.highschool-dashboard .metric-card.enrolled-courses .metric-icon {
    background: linear-gradient(135deg, #5e88d4 0%, #365a9c 100%);
}

.highschool-dashboard .metric-card.completed-assignments .metric-icon,
.highschool-dashboard .progress-stat-card .stat-icon {
    background: linear-gradient(135deg, var(--hs-success), #2c8a5d);
}

.highschool-dashboard .metric-card.pending-assignments .metric-icon,
.highschool-dashboard .continue-btn,
.highschool-dashboard .start-learning-btn {
    background: linear-gradient(135deg, var(--hs-accent), #f4a11c);
    color: #1f2a44 !important;
}

.highschool-dashboard .metric-card.average-grade .metric-icon {
    background: linear-gradient(135deg, #2e4f88, var(--hs-secondary));
}

.highschool-dashboard .metric-title {
    color: rgba(31, 58, 96, 0.85);
}

.highschool-dashboard .metric-value,
.highschool-dashboard .stat-number,
.highschool-dashboard .section-title,
.highschool-dashboard .course-title {
    color: var(--hs-secondary);
}

.highschool-dashboard .metric-trend.positive,
.highschool-dashboard .section-status-badge.completed,
.highschool-dashboard .course-button.completed {
    color: #f6fdf5;
    background: linear-gradient(135deg, var(--hs-success), #2c8a5d);
}

.highschool-dashboard .metric-trend.neutral {
    color: rgba(31, 58, 96, 0.65);
}

.highschool-dashboard .metric-trend.urgent {
    color: #cc3a2d;
}

.highschool-dashboard .enhanced-course-card,
.highschool-dashboard .section-list-item,
.highschool-dashboard .progress-stat-card {
    background: var(--hs-surface);
    border: 1px solid var(--hs-border);
    box-shadow: 0 18px 30px var(--hs-shadow);
}

.highschool-dashboard .course-image-container {
    background: linear-gradient(135deg, rgba(31, 58, 96, 0.9), #2a4b86);
}

.highschool-dashboard .course-level-badge {
    background: rgba(247, 201, 72, 0.15);
    color: var(--hs-secondary);
}

.highschool-dashboard .progress-bar {
    background: rgba(31, 58, 96, 0.08);
}

.highschool-dashboard .progress-fill {
    background: linear-gradient(90deg, var(--hs-success), #50d18d);
}

.highschool-dashboard .section-status-badge.in-progress {
    background: rgba(31, 58, 96, 0.15);
    color: var(--hs-secondary);
}

.highschool-dashboard .course-button {
    border: none;
    border-radius: 14px;
    padding: 0.65rem 1.5rem;
    font-weight: 600;
    box-shadow: 0 12px 22px var(--hs-shadow);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.highschool-dashboard .course-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 16px 30px rgba(31, 58, 96, 0.2);
}

.highschool-dashboard .course-button.not-started {
    background: var(--hs-accent);
    color: #1f2a44;
}

.highschool-dashboard .course-button.in-progress {
    background: var(--hs-secondary);
    color: #f5f7ff;
}

.highschool-dashboard .course-button.completed {
    border: none;
}

.highschool-dashboard .course-details-btn {
    background: rgba(31, 58, 96, 0.08);
    color: var(--hs-secondary);
}

.highschool-dashboard .calendar-day {
    background: rgba(255, 255, 255, 0.25);
    border: 1px solid rgba(31, 58, 96, 0.15);
    color: var(--hs-secondary);
}

.highschool-dashboard .calendar-day.has-events {
    background: rgba(247, 201, 72, 0.15);
}

.highschool-dashboard .event-item {
    border: 1px solid rgba(31, 58, 96, 0.12);
    background: var(--hs-surface);
}

.highschool-dashboard .learning-progress-sidebar .progress-stat-card {
    background: linear-gradient(160deg, var(--hs-surface), rgba(255, 255, 255, 0.75));
}

.highschool-dashboard .stat-label {
    color: rgba(31, 58, 96, 0.6);
}

.highschool-dashboard .continue-btn {
    border: none;
}

.highschool-dashboard .continue-btn i {
    color: inherit;
}

.highschool-dashboard .weekly-activity-section .chart-container {
    background: var(--hs-surface);
    border: 1px dashed rgba(31, 58, 96, 0.2);
    border-radius: 18px;
    padding: 1rem;
}

.highschool-dashboard .hs-schedule-card .sidebar-section {
    display: flex;
    flex-direction: column;
    gap: 16px;
    height: 100%;
}

.highschool-dashboard .hs-schedule-card .upcoming-events {
    flex: 1;
}

.highschool-dashboard .start-learning-btn i,
.highschool-dashboard .continue-btn i {
    color: #1f2a44;
}
body.has-student-sidebar.has-enhanced-sidebar:not(.path-course-view) .highschool-dashboard{
    margin-top: 10px !important;
}

.highschool-dashboard .sub-nav {
    background: #f4f7ff;
}

.highschool-dashboard .hs-hero {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 24px;
    margin-bottom: 24px;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%);
    border-radius: 28px;
    padding: 40px 20px;
    color: #1e293b;
    position: relative;
    overflow: hidden;
    min-height: 180px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
}

/* Hero animated background - Mesh gradient overlay */
.hs-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        radial-gradient(ellipse at 10% 90%, rgba(59, 130, 246, 0.12) 0%, transparent 50%),
        radial-gradient(ellipse at 90% 10%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 50%, rgba(6, 182, 212, 0.08) 0%, transparent 60%);
    animation: meshShift 12s ease-in-out infinite;
    z-index: 0;
}

/* Animated background container */
.hs-hero-bg-animation {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 0;
    pointer-events: none;
}

/* Professional grid pattern */
.hs-hero-orb {
    position: absolute;
    opacity: 0;
}

.hs-hero-orb:nth-child(1),
.hs-hero-orb:nth-child(2),
.hs-hero-orb:nth-child(3),
.hs-hero-orb:nth-child(4),
.hs-hero-orb:nth-child(5) {
    display: none;
}

/* Geometric accent lines */
.hs-hero-shape {
    position: absolute;
    opacity: 0.15;
}

.hs-hero-shape:nth-child(6) {
    width: 300px;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.4), transparent);
    border: none;
    border-radius: 0;
    top: 30%;
    right: -50px;
    transform: rotate(-15deg);
    animation: lineGlow 6s ease-in-out infinite;
}

.hs-hero-shape:nth-child(7) {
    width: 250px;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.4), transparent);
    border: none;
    border-radius: 0;
    bottom: 35%;
    left: -30px;
    transform: rotate(10deg);
    animation: lineGlow 6s ease-in-out infinite;
    animation-delay: -3s;
}

/* Subtle floating particles */
.hs-hero-sparkle {
    position: absolute;
    width: 3px;
    height: 3px;
    background: rgba(59, 130, 246, 0.5);
    border-radius: 50%;
    opacity: 0;
    animation: subtleFloat 8s ease-in-out infinite;
}

.hs-hero-sparkle:nth-child(8) { top: 25%; left: 15%; animation-delay: 0s; background: rgba(59, 130, 246, 0.4); }
.hs-hero-sparkle:nth-child(9) { top: 45%; left: 75%; animation-delay: 1.5s; background: rgba(139, 92, 246, 0.4); }
.hs-hero-sparkle:nth-child(10) { top: 65%; left: 35%; animation-delay: 3s; background: rgba(6, 182, 212, 0.4); }
.hs-hero-sparkle:nth-child(11) { top: 35%; left: 88%; animation-delay: 4.5s; background: rgba(59, 130, 246, 0.4); }
.hs-hero-sparkle:nth-child(12) { top: 75%; left: 20%; animation-delay: 6s; background: rgba(139, 92, 246, 0.4); }

/* Grid wave pattern */
.hs-hero-wave {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    background-image: 
        linear-gradient(rgba(148, 163, 184, 0.15) 1px, transparent 1px),
        linear-gradient(90deg, rgba(148, 163, 184, 0.15) 1px, transparent 1px);
    background-size: 40px 40px;
    animation: gridPulse 8s ease-in-out infinite;
    z-index: 0;
}

/* Aurora effect */
.hs-hero::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: conic-gradient(
        from 0deg at 50% 50%,
        transparent 0deg,
        rgba(59, 130, 246, 0.08) 60deg,
        transparent 120deg,
        rgba(139, 92, 246, 0.08) 180deg,
        transparent 240deg,
        rgba(6, 182, 212, 0.08) 300deg,
        transparent 360deg
    );
    animation: auroraRotate 30s linear infinite;
    z-index: 0;
}

/* Keyframe animations */
@keyframes meshShift {
    0%, 100% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.7;
        transform: scale(1.05);
    }
}

@keyframes lineGlow {
    0%, 100% {
        opacity: 0.08;
        transform: translateX(0) rotate(-15deg);
    }
    50% {
        opacity: 0.15;
        transform: translateX(20px) rotate(-15deg);
    }
}

@keyframes subtleFloat {
    0%, 100% {
        opacity: 0;
        transform: translateY(0);
    }
    20% {
        opacity: 0.6;
    }
    50% {
        opacity: 0.4;
        transform: translateY(-15px);
    }
    80% {
        opacity: 0.6;
    }
}

@keyframes gridPulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

@keyframes auroraRotate {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

/* Legacy keyframes - keeping for compatibility */
@keyframes heroGradientShift {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

@keyframes floatOrb {
    0%, 100% { transform: translate(0, 0); }
}

@keyframes rotateShape {
    0%, 100% { transform: rotate(0deg); }
}

@keyframes sparkle {
    0%, 100% { opacity: 0; }
    50% { opacity: 0.6; }
}

@keyframes waveMove {
    0%, 100% { transform: translateX(0); }
}

/* Ensure hero content stays above animations */
.hs-hero-text {
    position: relative;
    z-index: 2;
}

.hs-hero > * {
    position: relative;
    z-index: 2;
}

.highschool-dashboard .hs-hero-text .eyebrow {
    text-transform: uppercase;
    letter-spacing: 0.18em;
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.7);
    margin-bottom: 10px;
}

.highschool-dashboard .hs-hero-text h1 {
    margin: 0 0 10px 0;
    font-size: 2.25rem;
    font-weight: 600;
    color: #1e293b;
    text-shadow: none;
    letter-spacing: -0.02em;
}

.highschool-dashboard .hs-hero-text p {
    margin: 0;
    font-size: 1.05rem;
    color: rgba(255, 255, 255, 0.85);
}

.highschool-dashboard .hs-hero-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 16px;
    flex: 1;
}

.highschool-dashboard .hs-hero-stat {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%);
    border-radius: 18px;
    padding: 15px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    text-align: center;
}

.highschool-dashboard .hs-hero-stat span.label {
    display: block;
    font-size: 0.75rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: #000;
}

.highschool-dashboard .hs-hero-stat span.value {
    display: block;
    font-size: 1.9rem;
    font-weight: 700;
    color: #000;
    margin-top: 6px;
}

.highschool-dashboard .hs-dashboard-grid {
    display: grid;
    grid-template-columns: minmax(0, 2fr) minmax(280px, 0.9fr);
    gap: 28px;
    margin-top: 32px;
}

.highschool-dashboard .hs-insights-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 24px;
    margin-top: 32px;
    align-items: stretch;
}

.highschool-dashboard .hs-main-column,
.highschool-dashboard .hs-side-column {
    display: flex;
    flex-direction: column;
    gap: 26px;
}

.highschool-dashboard .hs-surface-card {
    background: var(--hs-surface);
    border: 1px solid var(--hs-border);
    border-radius: 24px;
    padding: 24px;
    box-shadow: 0 25px 35px var(--hs-shadow);
    margin-top: 1%;
}

.highschool-dashboard .hs-block-title {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 12px;
    margin-bottom: 20px;
}

.highschool-dashboard .hs-block-title h3 {
    margin: 0;
    font-size: 1.25rem;
    color: var(--hs-secondary);
}

.highschool-dashboard .hs-block-title p {
    margin: 4px 0 0;
    font-size: 0.9rem;
    color: rgba(31, 58, 96, 0.65);
}

.highschool-dashboard .hs-inline-link {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--hs-secondary);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.highschool-dashboard .hs-inline-link i {
    font-size: 0.85rem;
}

.highschool-dashboard .hs-assignment-list {
    display: flex;
    flex-direction: column;
    gap: 14px;
}

.highschool-dashboard .hs-assignment-card {
    border: 1px solid rgba(31, 58, 96, 0.12);
    border-radius: 18px;
    padding: 18px;
    background: rgba(255, 255, 255, 0.9);
    display: flex;
    gap: 16px;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.highschool-dashboard .hs-assignment-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 18px 30px rgba(31, 58, 96, 0.15);
}

.highschool-dashboard .hs-assignment-date {
    min-width: 64px;
    text-align: center;
    border-right: 1px solid rgba(31, 58, 96, 0.08);
    padding-right: 16px;
}

.highschool-dashboard .hs-assignment-date span.day {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--hs-secondary);
}

.highschool-dashboard .hs-assignment-date span.month {
    display: block;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    font-size: 0.7rem;
    color: rgba(31, 58, 96, 0.6);
}

.highschool-dashboard .hs-assignment-content {
    flex: 1;
    padding-right: 16px;
}

.highschool-dashboard .hs-assignment-content h4 {
    margin: 0;
    font-size: 1rem;
    color: var(--hs-secondary);
}

.highschool-dashboard .hs-assignment-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    font-size: 0.85rem;
    color: rgba(31, 58, 96, 0.65);
    margin-top: 6px;
}

.highschool-dashboard .hs-assignment-pill {
    padding: 6px 14px;
    border-radius: 999px;
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    background: rgba(31, 58, 96, 0.08);
    color: var(--hs-secondary);
}

.highschool-dashboard .hs-assignment-card.due-now .hs-assignment-pill {
    background: rgba(255, 99, 72, 0.15);
    color: #b42318;
}

.highschool-dashboard .hs-assignment-card.due-soon .hs-assignment-pill {
    background: rgba(244, 161, 28, 0.2);
    color: #b05a00;
}

.highschool-dashboard .hs-assignment-card.due-later .hs-assignment-pill {
    background: rgba(63, 179, 127, 0.18);
    color: #1d6d49;
}

.highschool-dashboard .hs-calendar-toggle {
    display: inline-flex;
    border: 1px solid rgba(31, 58, 96, 0.12);
    border-radius: 999px;
    overflow: hidden;
}

.highschool-dashboard .hs-calendar-toggle button {
    border: none;
    background: transparent;
    padding: 6px 16px;
    font-size: 0.85rem;
    font-weight: 600;
    color: rgba(31, 58, 96, 0.65);
    cursor: pointer;
}

.highschool-dashboard .hs-calendar-toggle button.active {
    background: rgba(31, 58, 96, 0.1);
    color: var(--hs-secondary);
}

.highschool-dashboard .hs-progress-panel .hs-progress-item {
    margin-bottom: 18px;
}

.highschool-dashboard .hs-progress-panel .progress-meta {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    color: var(--hs-secondary);
    margin-bottom: 6px;
}

.highschool-dashboard .hs-progress-panel .progress-rail {
    height: 8px;
    border-radius: 999px;
    background: rgba(31, 58, 96, 0.1);
    overflow: hidden;
}

.highschool-dashboard .hs-progress-panel .progress-fill {
    display: block;
    height: 100%;
    border-radius: inherit;
    background: linear-gradient(90deg, var(--hs-success), #3dd1aa);
}

.highschool-dashboard .hs-progress-stats {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 14px;
    margin-top: 10px;
}

.highschool-dashboard .hs-progress-stats .stat {
    background: rgba(31, 58, 96, 0.04);
    border-radius: 14px;
    padding: 12px;
}

.highschool-dashboard .hs-progress-stats .stat span.label {
    display: block;
    font-size: 0.75rem;
    color: rgba(31, 58, 96, 0.6);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.highschool-dashboard .hs-progress-stats .stat span.value {
    display: block;
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--hs-secondary);
}

.highschool-dashboard .hs-quick-links-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 12px;
}

.highschool-dashboard .hs-quick-link {
    border: 1px solid rgba(31, 58, 96, 0.12);
    border-radius: 16px;
    padding: 12px 14px;
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
    color: var(--hs-secondary);
    font-weight: 600;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.92), rgba(239, 245, 255, 0.92));
}

.highschool-dashboard .hs-quick-link i {
    width: 36px;
    height: 36px;
    border-radius: 12px;
    background: rgba(31, 58, 96, 0.08);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: var(--hs-secondary);
}

.highschool-dashboard .hs-announcement-list,
.highschool-dashboard .hs-notification-list {
    display: flex;
    flex-direction: column;
    gap: 14px;
}

.highschool-dashboard .hs-announcement-card {
    border-left: 4px solid rgba(31, 58, 96, 0.25);
    padding-left: 16px;
}

.highschool-dashboard .hs-announcement-card h4 {
    margin: 0;
    font-size: 0.95rem;
    color: var(--hs-secondary);
}

.highschool-dashboard .hs-announcement-card span.meta {
    display: block;
    font-size: 0.8rem;
    color: rgba(31, 58, 96, 0.65);
    margin-top: 4px;
}

.highschool-dashboard .hs-notification {
    display: flex;
    justify-content: space-between;
    gap: 16px;
    padding: 16px;
    border-radius: 16px;
    border: 1px solid rgba(31, 58, 96, 0.1);
    background: rgba(248, 251, 255, 0.9);
}

.highschool-dashboard .hs-notification p {
    margin: 0 0 4px 0;
    font-weight: 600;
    color: var(--hs-secondary);
}

.highschool-dashboard .hs-notification span.meta {
    font-size: 0.85rem;
    color: rgba(31, 58, 96, 0.65);
}

.highschool-dashboard .hs-notification a {
    align-self: center;
    color: var(--hs-secondary);
    font-weight: 600;
    text-decoration: none;
}

.highschool-dashboard .hs-performance-trend .trend-chart-wrap {
    height: 230px;
}

.highschool-dashboard .hs-trend-legend {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 0.85rem;
    color: rgba(31, 58, 96, 0.65);
}

.highschool-dashboard .hs-trend-pill {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-weight: 600;
}

.highschool-dashboard .hs-trend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
}

.highschool-dashboard .hs-trend-dot.engagement {
    background: rgba(63, 179, 127, 0.9);
}

.highschool-dashboard .hs-trend-dot.completion {
    background: rgba(247, 201, 72, 0.9);
}

.highschool-dashboard .hs-empty-state {
    text-align: center;
    padding: 30px 10px;
    border: 1px dashed rgba(31, 58, 96, 0.2);
    border-radius: 18px;
    color: rgba(31, 58, 96, 0.6);
}

/* Active Lessons Section */
.highschool-dashboard .hs-active-lessons {
    margin-top: 24px;
}

.highschool-dashboard .hs-active-lessons-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

/* Active Activities Section */
.highschool-dashboard .hs-active-activities {
    margin-top: 24px;
}

.highschool-dashboard .hs-active-activities-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 16px;
}

.highschool-dashboard .hs-activity-card {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(31, 58, 96, 0.1);
    border-radius: 16px;
    padding: 20px;
    text-decoration: none;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
}

.highschool-dashboard .hs-activity-card:hover {
    border-color: rgba(31, 58, 96, 0.2);
    box-shadow: 0 8px 20px rgba(31, 58, 96, 0.12);
    transform: translateY(-4px);
}

.highschool-dashboard .hs-activity-card.in-progress {
    border-left: 4px solid #f7c948;
}

.highschool-dashboard .hs-activity-card.not-started {
    border-left: 4px solid rgba(31, 58, 96, 0.2);
}

.highschool-dashboard .hs-activity-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
}

.highschool-dashboard .hs-activity-icon-wrapper {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(31, 58, 96, 0.05);
    border-radius: 12px;
    flex-shrink: 0;
}

.highschool-dashboard .hs-activity-card.in-progress .hs-activity-icon-wrapper {
    background: rgba(247, 201, 72, 0.1);
}

.highschool-dashboard .hs-activity-card .hs-activity-icon {
    font-size: 1.5rem;
    color: #1f3a60;
}

.highschool-dashboard .hs-activity-card.in-progress .hs-activity-icon {
    color: #f7c948;
}

.highschool-dashboard .hs-activity-status-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
}
.hs-course-overview{
    width:70%;
}
.highschool-dashboard .hs-activity-status-badge.in-progress {
    background: rgba(247, 201, 72, 0.1);
    color: #f7c948;
}

.highschool-dashboard .hs-activity-status-badge.not-started {
    background: rgba(31, 58, 96, 0.05);
    color: rgba(31, 58, 96, 0.7);
}

.highschool-dashboard .hs-activity-card-content {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.highschool-dashboard .hs-activity-card-title {
    font-size: 1rem;
    font-weight: 600;
    color: #1f3a60;
    margin: 0 0 8px 0;
    line-height: 1.4;
}

.highschool-dashboard .hs-activity-card-course {
    font-size: 0.875rem;
    color: rgba(31, 58, 96, 0.7);
    margin: 0 0 4px 0;
    font-weight: 500;
}

.highschool-dashboard .hs-activity-card-section {
    font-size: 0.75rem;
    color: rgba(31, 58, 96, 0.5);
    margin: 0 0 12px 0;
}

.highschool-dashboard .hs-activity-card-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: auto;
    padding-top: 12px;
    border-top: 1px solid rgba(31, 58, 96, 0.1);
}

.highschool-dashboard .hs-activity-type-badge {
    display: inline-block;
    padding: 4px 10px;
    background: rgba(31, 58, 96, 0.05);
    border-radius: 8px;
    font-size: 0.75rem;
    color: rgba(31, 58, 96, 0.7);
    text-transform: capitalize;
    font-weight: 500;
}

.highschool-dashboard .hs-activity-duration {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 0.75rem;
    color: rgba(31, 58, 96, 0.6);
}

.highschool-dashboard .hs-activity-duration i {
    font-size: 0.7rem;
}

.highschool-dashboard .hs-lesson-card {
    background: rgba(255, 255, 255, 0.6);
    border: 1px solid rgba(31, 58, 96, 0.1);
    border-radius: 16px;
    padding: 20px;
    transition: all 0.3s ease;
}

.highschool-dashboard .hs-lesson-card:hover {
    border-color: rgba(31, 58, 96, 0.2);
    box-shadow: 0 4px 12px rgba(31, 58, 96, 0.08);
    transform: translateY(-2px);
}

.highschool-dashboard .hs-lesson-card.completed {
    border-left: 4px solid #3fb37f;
}

.highschool-dashboard .hs-lesson-card.in-progress {
    border-left: 4px solid #f7c948;
}

.highschool-dashboard .hs-lesson-card.not-started {
    border-left: 4px solid rgba(31, 58, 96, 0.2);
}

.highschool-dashboard .hs-lesson-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
}

.highschool-dashboard .hs-lesson-info {
    flex: 1;
}

.highschool-dashboard .hs-lesson-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #1f3a60;
    margin: 0 0 6px 0;
}

.highschool-dashboard .hs-lesson-course {
    font-size: 0.875rem;
    color: rgba(31, 58, 96, 0.6);
    margin: 0;
}

.highschool-dashboard .hs-lesson-progress-badge {
    background: rgba(31, 58, 96, 0.05);
    border-radius: 12px;
    padding: 8px 16px;
    font-weight: 600;
    color: #1f3a60;
}

.highschool-dashboard .hs-lesson-card.completed .hs-lesson-progress-badge {
    background: rgba(63, 179, 127, 0.1);
    color: #3fb37f;
}

.highschool-dashboard .hs-lesson-card.in-progress .hs-lesson-progress-badge {
    background: rgba(247, 201, 72, 0.1);
    color: #f7c948;
}

.highschool-dashboard .hs-progress-percentage {
    font-size: 0.9rem;
}

.highschool-dashboard .hs-lesson-stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 16px;
    border-bottom: 1px solid rgba(31, 58, 96, 0.1);
}

.highschool-dashboard .hs-lesson-stat {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.875rem;
    color: rgba(31, 58, 96, 0.7);
}

.highschool-dashboard .hs-lesson-stat i {
    color: rgba(31, 58, 96, 0.5);
}

.highschool-dashboard .hs-lesson-view-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 0.875rem;
    color: #1f3a60;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.2s ease;
}

.highschool-dashboard .hs-lesson-view-btn:hover {
    color: #3fb37f;
    gap: 8px;
}

.highschool-dashboard .hs-activities-preview {
    margin-top: 12px;
}

.highschool-dashboard .hs-activities-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.highschool-dashboard .hs-activity-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: rgba(255, 255, 255, 0.5);
    border: 1px solid rgba(31, 58, 96, 0.08);
    border-radius: 12px;
    text-decoration: none;
    transition: all 0.2s ease;
}

.highschool-dashboard .hs-activity-item:hover {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(31, 58, 96, 0.15);
    transform: translateX(4px);
}

.highschool-dashboard .hs-activity-item.completed {
    border-left: 3px solid #3fb37f;
}

.highschool-dashboard .hs-activity-item.in-progress {
    border-left: 3px solid #f7c948;
}

.highschool-dashboard .hs-activity-icon {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(31, 58, 96, 0.05);
    border-radius: 10px;
    color: #1f3a60;
    font-size: 1rem;
    flex-shrink: 0;
}

.highschool-dashboard .hs-activity-item.completed .hs-activity-icon {
    background: rgba(63, 179, 127, 0.1);
    color: #3fb37f;
}

.highschool-dashboard .hs-activity-item.in-progress .hs-activity-icon {
    background: rgba(247, 201, 72, 0.1);
    color: #f7c948;
}

.highschool-dashboard .hs-activity-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.highschool-dashboard .hs-activity-name {
    font-size: 0.9rem;
    font-weight: 500;
    color: #1f3a60;
}

.highschool-dashboard .hs-activity-type {
    font-size: 0.75rem;
    color: rgba(31, 58, 96, 0.5);
    text-transform: capitalize;
}

.highschool-dashboard .hs-activity-status {
    color: #3fb37f;
    font-size: 1.1rem;
    flex-shrink: 0;
}

.highschool-dashboard .hs-activity-item.in-progress .hs-activity-status {
    color: #f7c948;
}

.highschool-dashboard .hs-more-activities {
    margin-top: 8px;
    padding-top: 12px;
    border-top: 1px solid rgba(31, 58, 96, 0.1);
}

.highschool-dashboard .hs-view-more-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 0.875rem;
    color: #1f3a60;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.2s ease;
}

.highschool-dashboard .hs-view-more-link:hover {
    color: #3fb37f;
    gap: 8px;
}

/* Available Courses Section */
.highschool-dashboard .hs-available-courses {
    margin-top: 24px;
}

.highschool-dashboard .hs-available-courses-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
}

.highschool-dashboard .hs-available-course-card {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(31, 58, 96, 0.1);
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
}

.highschool-dashboard .hs-available-course-card:hover {
    border-color: rgba(31, 58, 96, 0.2);
    box-shadow: 0 8px 20px rgba(31, 58, 96, 0.12);
    transform: translateY(-4px);
}

.highschool-dashboard .hs-course-image {
    width: 100%;
    height: 160px;
    background-size: cover;
    background-position: center;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.highschool-dashboard .hs-course-image-placeholder {
    background: linear-gradient(135deg, rgba(31, 58, 96, 0.1) 0%, rgba(63, 179, 127, 0.1) 100%);
}

.highschool-dashboard .hs-course-image-placeholder i {
    font-size: 3rem;
    color: rgba(31, 58, 96, 0.3);
}

.highschool-dashboard .hs-course-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.3) 100%);
}

.highschool-dashboard .hs-course-content {
    padding: 20px;
    flex: 1;
    display: flex;
    flex-direction: column;
}

.highschool-dashboard .hs-course-category {
    font-size: 0.75rem;
    color: rgba(31, 58, 96, 0.6);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
    font-weight: 600;
}

.highschool-dashboard .hs-course-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #1f3a60;
    margin: 0 0 12px 0;
    line-height: 1.4;
}

.highschool-dashboard .hs-course-summary {
    font-size: 0.875rem;
    color: rgba(31, 58, 96, 0.7);
    margin: 0 0 16px 0;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    flex: 1;
}

.highschool-dashboard .hs-course-actions {
    margin-top: auto;
    padding-top: 12px;
    border-top: 1px solid rgba(31, 58, 96, 0.1);
}
.hs-subject-share{
    width:30%;
}
.highschool-dashboard .hs-enroll-btn,
.highschool-dashboard .hs-view-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    border-radius: 10px;
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 600;
    transition: all 0.2s ease;
    width: 100%;
    justify-content: center;
}

.highschool-dashboard .hs-enroll-btn {
    background: linear-gradient(135deg, #3fb37f 0%, #2d9a6b 100%);
    color: white;
    border: none;
}

.highschool-dashboard .hs-enroll-btn:hover {
    background: linear-gradient(135deg, #2d9a6b 0%, #1f7a4f 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(63, 179, 127, 0.3);
    color: white;
}

.highschool-dashboard .hs-view-btn {
    background: rgba(31, 58, 96, 0.05);
    color: #1f3a60;
    border: 1px solid rgba(31, 58, 96, 0.1);
}

.highschool-dashboard .hs-view-btn:hover {
    background: rgba(31, 58, 96, 0.1);
    border-color: rgba(31, 58, 96, 0.2);
    color: #1f3a60;
}
.courseSubject{
    display: flex;
    gap: 0.5%;
}
@media (max-width: 768px) {
    .highschool-dashboard .hs-lesson-header {
        flex-direction: column;
        gap: 12px;
    }
    
    .highschool-dashboard .hs-lesson-stats {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
    }
    
    .highschool-dashboard .hs-available-courses-grid {
        grid-template-columns: 1fr;
    }
    
    .highschool-dashboard .hs-active-activities-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 1200px) {
    .highschool-dashboard .hs-dashboard-grid {
        grid-template-columns: 1fr;
    }

    .highschool-dashboard .hs-hero {
        flex-direction: column;
        align-items: flex-start;
    }
}

@media (max-width: 768px) {
    .highschool-dashboard .hs-hero-stats {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .highschool-dashboard .hs-quick-links-grid {
        grid-template-columns: repeat(1, minmax(0, 1fr));
    }
}

.highschool-dashboard-wrapper::-webkit-scrollbar {
    width: 0;
    height: 0;
}

/* Ensure page containers don't add extra padding */
body.custom-dashboard-page #page,
body.custom-dashboard-page #page-wrapper,
body.custom-dashboard-page .main-inner {
    padding-top: 0 !important;
    margin-top: 60px !important;
    overflow-x: hidden;
}

/* Prevent overflow on body and html */
body.custom-dashboard-page,
html {
    overflow-x: hidden;
    max-width: 100vw;
}

/* Additional specific selectors for dashboard content */


/* Show regular dashboard content below custom dashboard */
.custom_dashboard ~ .dashboard-content,
body.custom-dashboard-page .dashboard-content {
    display: block !important;
    visibility: visible !important;
    margin-top: 40px !important;
    padding: 20px !important;
    clear: both;
}

/* Ensure dashboard-content appears below custom dashboards with proper spacing */
body.custom-dashboard-page .custom_dashboard + .dashboard-content {
    margin-top: 40px !important;
    padding-top: 30px !important;
    border-top: 1px solid #e0e0e0;
}

/* Dashboard-content positioning tied to dashboard type */
.custom_dashboard.dashboard-type-elementary + .dashboard-content {
    position: relative;
    margin-left: 280px !important;
    width: calc(100vw - 280px) !important;
    max-width: calc(100vw - 280px) !important;
    clear: both;
    z-index: 1;
}

.custom_dashboard.dashboard-type-middle + .dashboard-content {
    position: relative;
    margin-left: 280px !important;
    width: calc(100vw - 280px) !important;
    max-width: calc(100vw - 280px) !important;
    clear: both;
    z-index: 1;
}

.custom_dashboard.dashboard-type-highschool + .dashboard-content {
    position: relative;
    margin-left: 320px !important;
    margin-top: 40px !important;
    padding: 30px !important;
    width: calc(100vw - 320px) !important;
    max-width: calc(100vw - 320px) !important;
    clear: both;
    z-index: 1;
}

/* Target the main content area more specifically */
body.custom-dashboard-page .custom_dashboard,
body.custom-dashboard-page .middle-dashboard,
body.custom-dashboard-page .elementary-dashboard,
body.custom-dashboard-page .default-dashboard {
    
    padding-top: 0 !important;
}

/* Fix sidebar overlap for middle school dashboard */
body.custom-dashboard-page .middle-dashboard {
    margin-left: 280px !important;
}

/* High School Dashboard - Extra margin for body context */
body.custom-dashboard-page .highschool-dashboard {
    margin: 0 !important;
    padding-top: 0 !important;
    overflow-x: hidden;
    background: transparent;
    min-height: 100%;
}

body.custom-dashboard-page .highschool-dashboard-wrapper {
    margin-top: 60px !important;
}

/* Enhanced High School Dashboard Styles */
.dashboard-header {
    box-shadow: rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px;
    color: #1e293b;
    padding: 2rem 0;
    margin-bottom: 2rem;
    border-bottom: 3px solid #7dd3fc;
}

.dashboard-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: #1e293b;
}

.dashboard-subtitle {
    font-size: 1.1rem;
    color: #64748b;
    margin-bottom: 0;
}

.dashboard-actions {
    display: flex;
    gap: 1rem;
    align-items: center;
}

.dashboard-actions .btn {
    padding: 0.75rem 1.5rem;
    border-radius: 12px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.dashboard-actions .btn-primary {
    background: linear-gradient(135deg, #7dd3fc 0%, #38bdf8 100%);
    border: none;
    color: #1e293b;
    box-shadow: 0 4px 15px rgba(125, 211, 252, 0.3);
}

.dashboard-actions .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(125, 211, 252, 0.4);
    color: #1e293b;
}

.dashboard-actions .btn-outline-primary {
    background: transparent;
    border: 2px solid #7dd3fc;
    color: #0284c7;
}

.dashboard-actions .btn-outline-primary:hover {
    background: #7dd3fc;
    color: #1e293b;
    transform: translateY(-2px);
}

/* Enhanced Metric Cards */
.dashboard-metrics {
    display: flex;
    gap: 1.5rem;
    margin-bottom: 2rem;
    flex-wrap: nowrap; /* keep cards in a single row */
    overflow-x: auto; /* allow horizontal scroll on small screens */
    -webkit-overflow-scrolling: touch;
}

.metric-card {
    background: #fff;
    border-radius: 20px;
    padding: 20px 22px;
    display: flex;
    align-items: center;
    gap: 18px;
    box-shadow: 0 10px 30px rgba(16, 24, 40, 0.06);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
    border: 2px solid rgba(0,0,0,0.04);
    position: relative;
    overflow: hidden;
    flex: 0 0 310px; /* wider base to match visual */
    min-width: 260px;
    border-bottom: 8px solid transparent; /* visible colored accent */
}

.metric-card::before {
    height: 6px;
}

.metric-card .metric-content {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.metric-card .metric-title {
    font-size: 1rem;
    font-weight: 700;
    color: #374151;
    text-transform: none;
}

.metric-card .metric-value {
    font-size: 2.4rem;
    font-weight: 800;
    color: #0f172a;
    line-height: 1;
}

.metric-card .metric-sublabel {
    font-size: 0.85rem;
    color: #6b7280;
}

/* Illustration on the right */
.metric-card .metric-illustration {
    width: 96px;
    height: 96px;
    border-radius: 16px;
    flex-shrink: 0;
    margin-left: auto;
    background-size: cover;
    background-position: center;
}

.metric-card .metric-illustration img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 12px;
}

/* Color variants (use existing semantic classes to keep palette) */
.metric-card.enrolled-courses { border-bottom-color: #C7D2FE; }
.metric-card.completed-assignments { border-bottom-color: #BBF7D0; }
.metric-card.pending-assignments { border-bottom-color: #FEF3C7; }
.metric-card.average-grade { border-bottom-color: #FECACA; }

/* Elementary Metrics Grid - Equal spacing */
.elementary-metrics-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: space-between;
    align-items: stretch;
    width: 100%;
    padding: 0;
    margin: 0;
}

.elementary-metrics-grid .metric-card {
    flex: 1 1 240px;
    min-width: 220px;
}

.leaderboard-main-container {
    width: 100%;
    border-radius: 28px;
    padding: 2rem 2.25rem;
    background: linear-gradient(135deg, #fefefe 0%, #f5f1ff 50%, #eef3ff 100%);
    position: relative;
    box-shadow: 0 20px 40px rgba(15, 23, 42, 0.08);
    overflow: hidden;
    border: 1px solid rgba(79, 70, 229, 0.12);
}

.leaderboard-header-decoration {
    position: absolute;
    top: -20px;
    right: -40px;
    width: 160px;
    height: 160px;
    border-radius: 50%;
    background: radial-gradient(circle at center, rgba(59, 130, 246, 0.25), transparent 70%);
    pointer-events: none;
}

.leaderboard-header-decoration .trophy-icon-large {
    position: absolute;
    top: 12px;
    right: 20px;
    width: 72px;
    height: 72px;
    border-radius: 50%;
    background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
    box-shadow: 0 15px 30px rgba(79, 70, 229, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
}

.leaderboard-section-wrapper {
    position: relative;
    z-index: 2;
}

.leaderboard-section-title {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
    margin-top: 0;
    margin-bottom: 1rem;
}

.leaderboard-title-text {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 700;
    font-size: 1.1rem;
    color: #1f2937;
}

.leaderboard-icon {
    color: #4f46e5;
}

.leaderboard-subtitle {
    font-size: 0.85rem;
    color: #6b7280;
    font-weight: 600;
}

.leaderboard-widget {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.leaderboard-top-3 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 0.75rem;
}

.leaderboard-top-entry {
    border-radius: 14px;
    padding: 0.75rem 1rem;
    background: white;
    border: 1px solid rgba(79, 70, 229, 0.15);
    box-shadow: 0 6px 20px rgba(15, 23, 42, 0.08);
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
}

.leaderboard-top-entry strong {
    font-size: 0.8rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: #6366f1;
}

.leaderboard-top-entry span {
    font-weight: 600;
    color: #0f172a;
}

.leaderboard-top-entry em {
    font-size: 0.75rem;
    color: #6b7280;
    font-style: normal;
}

.gold-entry { border-color: rgba(245, 158, 11, 0.3); }
.silver-entry { border-color: rgba(148, 163, 184, 0.4); }
.bronze-entry { border-color: rgba(239, 68, 68, 0.2); }

.leaderboard-top-empty {
    background: rgba(255, 255, 255, 0.6);
    border-radius: 16px;
    padding: 1rem;
    text-align: center;
    font-weight: 600;
    color: #475569;
}

.leaderboard-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.leaderboard-item {
    background: rgba(255, 255, 255, 0.85);
    border-radius: 14px;
    border: 1px solid rgba(15, 23, 42, 0.07);
    display: grid;
    grid-template-columns: auto auto 1fr auto;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    position: relative;
}

.leaderboard-item.current-user {
    border-color: #10b981;
    box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.15);
}

.leaderboard-rank {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #e0f2fe;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    color: #1d4ed8;
}

.leaderboard-rank.gold-rank { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: #fff; }
.leaderboard-rank.silver-rank { background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%); color: #fff; }
.leaderboard-rank.bronze-rank { background: linear-gradient(135deg, #d97706 0%, #b45309 100%); color: #fff; }
.leaderboard-rank.current-rank { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #fff; }

.leaderboard-avatar {
    font-size: 1.6rem;
    color: #4c1d95;
}

.leaderboard-info {
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
}

.leaderboard-name {
    font-weight: 700;
    color: #0f172a;
}

.leaderboard-score {
    font-weight: 600;
    color: #475569;
}

.leaderboard-badge,
.leaderboard-medal {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 999px;
    padding: 0.2rem 0.55rem;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    gap: 0.3rem;
    background: rgba(16, 185, 129, 0.1);
    color: #059669;
}

.leaderboard-medal i {
    font-size: 0.9rem;
}

.leaderboard-empty {
    text-align: center;
    font-weight: 600;
    color: #94a3b8;
    margin: 0;
}

.elementary-metrics-grid .metric-card {
    flex: 1;
    flex-basis: 0;
    min-width: 0;
    max-width: none;
}

/* Dynamic Leaderboard Styling */
.leaderboard-rank.gold-rank {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
}

.leaderboard-rank.silver-rank {
    background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
    color: white;
}

.leaderboard-rank.bronze-rank {
    background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
    color: white;
}

/* Compact Leaderboard Animations */
@keyframes sparkle {
    0%, 100% { opacity: 0; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.2); }
}

.leaderboard-item-compact:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(249, 115, 22, 0.15) !important;
}

.leaderboard-link-compact:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(59, 130, 246, 0.5) !important;
}

.leaderboard-link-compact:hover div:first-child {
    left: 100%;
}

.metric-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #7dd3fc 0%, #38bdf8 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.metric-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 40px rgba(125, 211, 252, 0.25);
    border-color: #7dd3fc;
}

.metric-card:hover::before {
    opacity: 1;
}

.metric-icon {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: white;
    flex-shrink: 0;
}

.metric-card.enrolled-courses .metric-icon {
    background: linear-gradient(135deg, #7dd3fc 0%, #38bdf8 100%);
}

.metric-card.completed-assignments .metric-icon {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
}

.metric-card.pending-assignments .metric-icon {
    background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
}

.metric-card.average-grade .metric-icon {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
}

.metric-content {
    flex: 1;
}

.metric-title {
    font-size: 0.9rem;
    font-weight: 600;
    color: #64748b;
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.metric-value {
    font-size: 2.5rem;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 0.5rem;
    line-height: 1;
}

.metric-trend {
    font-size: 0.8rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.metric-trend.positive {
    color: #059669;
}

.metric-trend.neutral {
    color: #64748b;
}

.metric-trend.urgent {
    color: #dc2626;
}

.metric-trend i {
    font-size: 0.7rem;
}

.maptest-launch-card {
    background: linear-gradient(120deg, #2563eb 0%, #3b82f6 45%, #60a5fa 100%);
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 2rem;
    color: #fff;
    box-shadow: 0 20px 35px rgba(37, 99, 235, 0.25);
}

.maptest-card-body {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 1.5rem;
}

.maptest-card-text {
    max-width: 680px;
}

.maptest-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.35rem 0.9rem;
    border-radius: 999px;
    font-size: 0.85rem;
    font-weight: 600;
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.35);
    margin-bottom: 0.75rem;
}

.maptest-card-title {
    font-size: 2rem;
    margin: 0 0 0.5rem 0;
}

.maptest-card-description {
    margin: 0;
    font-size: 1rem;
    line-height: 1.5;
    color: rgba(255, 255, 255, 0.9);
}

.maptest-card-actions {
    display: flex;
    align-items: center;
    justify-content: flex-end;
}

.maptest-start-btn {
    border: none;
    border-radius: 999px;
    padding: 0.85rem 2.75rem;
    font-size: 1rem;
    font-weight: 600;
    background: #fff;
    color: #1d4ed8;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    box-shadow: 0 15px 30px rgba(15, 23, 42, 0.25);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.maptest-start-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 30px rgba(15, 23, 42, 0.35);
}

.maptest-start-btn i {
    font-size: 1.1rem;
}

@media (max-width: 768px) {
    .maptest-card-body {
        flex-direction: column;
        align-items: flex-start;
    }

    .maptest-card-actions {
        width: 100%;
        justify-content: flex-start;
    }

    .maptest-start-btn {
        width: 100%;
        justify-content: center;
    }
}

.middle-dashboard .maptest-course-card {
    border: 1px solid #e9ecef;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    height: 100%;
}

.middle-dashboard .maptest-course-card .course-image-container {
    background: linear-gradient(140deg, #fef9c3 0%, #fde047 55%, #facc15 100%);
    height: 140px;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
    color: #fff;
    position: relative;
    text-align: center;
}

.maptest-course-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.35rem 0.85rem;
    background: rgba(255, 255, 255, 0.22);
    border-radius: 999px;
    font-size: 0.8rem;
    font-weight: 600;
    letter-spacing: 0.5px;
}

.maptest-course-title {
    margin: 0;
    font-size: 1.4rem;
    font-weight: 700;
    color: #fff;
}

.maptest-course-subtitle {
    margin: 0;
    font-size: 0.95rem;
    color: rgba(255, 255, 255, 0.9);
}

.middle-dashboard .maptest-course-card .course-content {
    background: #fff;
    color: #1e293b;
    padding: 16px;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.middle-dashboard .maptest-course-card .course-summary {
    color: #6c757d;
    font-size: 0.9rem;
    margin: 0 0 16px 0;
    line-height: 1.4;
}

.maptest-description-block {
    background: #f8fafc;
    border: 1px solid rgba(37, 99, 235, 0.12);
    border-radius: 16px;
    padding: 1rem;
    margin-bottom: 1.5rem;
}

.maptest-course-content .course-summary {
    margin: 0;
    color: #475569;
    font-size: 0.95rem;
    line-height: 1.5;
    font-weight: 500;
}

.maptest-feature-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 0.85rem;
    margin-bottom: 1.5rem;
}

.maptest-feature {
    display: flex;
    align-items: center;
    gap: 0.85rem;
    padding: 0.9rem 1rem;
    border-radius: 14px;
    border: 1px solid rgba(37, 99, 235, 0.12);
    background: #fff;
    box-shadow: 0 8px 18px rgba(15, 23, 42, 0.05);
}

.maptest-feature-icon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    background: #e0f2fe;
    color: #0ea5e9;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
}

.maptest-feature-text {
    display: flex;
    flex-direction: column;
    line-height: 1.1;
}

.maptest-feature-text .feature-title {
    font-weight: 700;
    font-size: 1.05rem;
    color: #0f172a;
}

.maptest-feature-text .feature-subtitle {
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: #64748b;
}

@media (max-width: 600px) {
    .maptest-feature-grid {
        grid-template-columns: 1fr;
    }
}

.maptest-course-card .course-button {
    background: #2563eb;
    border: none;
}

.maptest-course-card .course-button:hover {
    background: #1d4ed8;
}

.middle-dashboard .maptest-course-card .course-actions {
    margin-top: auto;
}

/* ============================================
   Simplified Elementary Dashboard Styles
   ============================================ */

.elementary-dashboard {
    background: #f8fafc;
}

/* Hide page context header and unwanted containers */
.page-header,
.page-header *,
.context-header,
.context-header * {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    overflow: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Remove container margins and padding for full width */
.container,
.container-fluid,
div.container,
div.container-fluid {
    margin: 0 !important;
    padding: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
}

/* Remove page container and drawers */
#page,
#page.drawers,
#page.drag-container,
div#page,
div#page.drawers,
div#page.drag-container {
    margin: 0 !important;
    padding: 0 !important;
    background: transparent !important;
    top: 0 !important;
}

/* Elementary Dashboard Inline Styles - Ensures immediate styling */
.elementary-dashboard {
    margin: 0;
    padding: 0 !important;
    min-height: 100vh;
    background: white;
    position: relative;
    margin-left: 320px;
    width: calc(100% - 320px) !important;
    max-width: calc(100% - 320px) !important;
    box-sizing: border-box;
    overflow-x: hidden;
    padding-left: 24px !important;
    padding-right: 24px !important;
    transition: margin-left 0.35s ease, width 0.35s ease, padding 0.35s ease;
}

body.sidebar-collapsed .elementary-dashboard {
    margin-left: 0;
    width: 100% !important;
    max-width: 100% !important;
    padding-left: 32px !important;
    padding-right: 32px !important;
}

.elementary-dashboard .elementary-courses-container {
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 0.85rem;
}

.elementary-dashboard .elementary-courses-container .adventure-card-item,
.elementary-dashboard .elementary-courses-container .elementary-course-card {
    min-height: 300px;
}

.elementary-dashboard .adventure-content-wrapper,
.elementary-dashboard .course-content {
    padding: 1.15rem;
}

.elementary-dashboard .adventure-content-wrapper,
.elementary-dashboard .course-content {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
}

@media (max-width: 1200px) {
    .elementary-dashboard {
        margin-left: 0;
        width: 100% !important;
        max-width: 100% !important;
        padding-left: 20px !important;
        padding-right: 20px !important;
    }

    .elementary-dashboard .elementary-courses-container {
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }

    .elementary-metrics-grid .metric-card {
        flex: 1 1 200px;
        min-width: 190px;
    }
}

@media (max-width: 768px) {
    .elementary-dashboard {
        padding-left: 16px !important;
        padding-right: 16px !important;
    }

    .elementary-dashboard .elementary-courses-container {
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .elementary-dashboard .elementary-courses-container .adventure-card-item,
    .elementary-dashboard .elementary-courses-container .elementary-course-card {
        min-height: 300px;
    }

    .elementary-metrics-grid {
        gap: 12px;
    }

    .elementary-metrics-grid .metric-card {
        flex: 1 1 180px;
        min-width: 170px;
    }
}

/* Hide scrollbar for elementary dashboard - Clean Look */
.elementary-dashboard::-webkit-scrollbar {
    width: 0px;
    display: none;
}

/* For Firefox - hide scrollbar */
.elementary-dashboard {
    scrollbar-width: none;
}

/* For IE/Edge */
.elementary-dashboard {
    -ms-overflow-style: none;
}

/* Welcome Header with Bubble Animations */
.welcome-header {
    background: #ffffff;
    border-radius: 24px;
    padding: 50px 40px;
    margin-bottom: 30px;
    box-shadow: 0 4px 20px rgba(129, 140, 248, 0.15);
    text-align: center;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    min-height: 180px;
    border: 1px solid rgba(129, 140, 248, 0.1);
}

.welcome-header-content {
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    flex: 1;
}

/* Animated Bubbles */
.welcome-bubbles {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 200px;
    pointer-events: none;
    z-index: 1;
}

.welcome-bubbles-left {
    left: -50px;
}

.welcome-bubbles-right {
    right: -50px;
}

.welcome-bubble {
    position: absolute;
    border-radius: 50%;
    background: rgba(129, 140, 248, 0.15);
    backdrop-filter: blur(10px);
    animation: floatBubble 15s ease-in-out infinite;
}

.welcome-bubble-1 {
    width: 80px;
    height: 80px;
    top: 10%;
    left: 20%;
    animation-delay: 0s;
}

.welcome-bubble-2 {
    width: 60px;
    height: 60px;
    top: 50%;
    left: 10%;
    animation-delay: 1.5s;
}

.welcome-bubble-3 {
    width: 100px;
    height: 100px;
    top: 70%;
    left: 30%;
    animation-delay: 3s;
}

.welcome-bubble-4 {
    width: 50px;
    height: 50px;
    top: 30%;
    left: 50%;
    animation-delay: 0.5s;
}

.welcome-bubble-5 {
    width: 90px;
    height: 90px;
    top: 15%;
    right: 15%;
    animation-delay: 2s;
}

.welcome-bubble-6 {
    width: 70px;
    height: 70px;
    top: 45%;
    right: 25%;
    animation-delay: 0.8s;
}

.welcome-bubble-7 {
    width: 55px;
    height: 55px;
    top: 65%;
    right: 10%;
    animation-delay: 2.5s;
}

.welcome-bubble-8 {
    width: 85px;
    height: 85px;
    top: 25%;
    right: 40%;
    animation-delay: 1.2s;
}

@keyframes floatBubble {
    0%, 100% {
        transform: translateY(0px) translateX(0px) scale(1);
        opacity: 0.6;
    }
    25% {
        transform: translateY(-8px) translateX(4px) scale(1.03);
        opacity: 0.7;
    }
    50% {
        transform: translateY(-4px) translateX(-2px) scale(0.98);
        opacity: 0.65;
    }
    75% {
        transform: translateY(-10px) translateX(6px) scale(1.02);
        opacity: 0.72;
    }
}

/* Student Profile Picture in Welcome Header */
.welcome-student-picture {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 4px solid rgba(129, 140, 248, 0.2);
    object-fit: cover;
    box-shadow: 0 4px 15px rgba(129, 140, 248, 0.2);
    background: white;
}

@keyframes shimmer {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.welcome-title {
    font-size: 2.5rem;
    color: #6366f1;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    position: relative;
    z-index: 1;
    text-shadow: none;
    font-weight: 700;
}

.welcome-title i {
    color: #818cf8;
    filter: none;
}

.welcome-subtitle {
    color: #6b7280;
    font-size: 1.2rem;
    position: relative;
    z-index: 1;
    text-shadow: none;
}

/* Statistics Cards - Pastel Gradient Design */
.elementary-stats-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 25px;
    margin-bottom: 40px;
}

/* Courses Container - Remove left and right margins */
.elementary-courses-container {
    margin-left: 0 !important;
    margin-right: 0 !important;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    padding: 27px;
}

/* Limit to 3 cards on dashboard */
.elementary-courses-container .elementary-course-card:nth-child(n+4) {
    display: none !important;
}


.elementary-sections-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
}

@media (min-width: 768px) {
    .elementary-sections-container {
        grid-template-columns: repeat(2, 1fr);
        max-width: 100%;
    }
}

@media (min-width: 1200px) {
    .elementary-sections-container {
        grid-template-columns: repeat(3, 1fr);
        max-width: 100%;
    }
}

@media (min-width: 1600px) {
    .elementary-sections-container {
        grid-template-columns: repeat(5, 1fr);
        max-width: 100%;
    }
}

.elementary-lessons-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    padding: 0;
    margin-left: 0;
    margin-right: 0;
}

@media (min-width: 1200px) {
    .elementary-lessons-container {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* Ensure parent containers don't limit width */
.elementary-dashboard .row,
.elementary-dashboard .col-12 {
    margin-left: 0;
    margin-right: 0;
    padding-left: 0;
    padding-right: 0;
    max-width: 100%;
}

.elementary-lesson-card {
    background: white;
    border-radius: 1rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 1px solid rgba(0, 0, 0, 0.05);
    text-decoration: none;
    color: inherit;
    display: flex;
    width: 100% !important;
    box-sizing: border-box !important;
    height: 100%;
    cursor: pointer;
}

.elementary-lesson-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
    text-decoration: none;
    color: inherit;
}

.elementary-lesson-card:visited {
    color: inherit;
    text-decoration: none;
}

.elementary-lesson-card .lesson-content {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    height: 100%;
    text-align: center;
    align-items: center;
}

.elementary-lesson-card .lesson-header {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 0.5rem;
    gap: 1rem;
    width: 100%;
    text-align: center;
}

.elementary-lesson-card .lesson-title,
.elementary-lesson-card .lesson-name {
    font-size: 1.1rem;
    font-weight: 700;
    color: #1f2937;
    margin: 0;
    line-height: 1.4;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    text-transform: uppercase;
    letter-spacing: 0.02em;
    text-align: center;
    width: 100%;
}

.elementary-lesson-card .lesson-course {
    font-size: 0.85rem;
    color: #6b7280;
    background: #f3f4f6;
    padding: 0.4rem 0.8rem;
    border-radius: 1rem;
    display: inline-block;
    width: auto;
    max-width: 100%;
    font-weight: 500;
    margin: 0;
    word-wrap: break-word;
    overflow-wrap: break-word;
    box-sizing: border-box;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-align: center;
}


.elementary-lesson-card .lesson-description {
    color: #7f8c8d;
    font-size: 0.95rem;
    line-height: 1.5;
    margin-bottom: 1.25rem;
    overflow: hidden;
}

.lesson-icon-wrapper {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 0.5rem;
}

.lesson-icon-wrapper-centered {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    margin: 1rem 0;
    position: relative;
}

.lesson-icon-container {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.lesson-icon-container-centered {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    margin: 0 auto;
}

.lesson-icon-container-centered i {
    color: #4a5568;
    font-size: 1.8rem;
}

.lesson-icon-container i {
    color: #4a5568;
    font-size: 1.2rem;
}

.lesson-status-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #4a90e2;
    border: 2px solid #fff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    position: absolute;
    top: 5px;
    right: 5px;
}

.elementary-lesson-card .section-button {
    background: linear-gradient(135deg, #FF6B35, #FF8C42);
    color: white;
    padding: 0.875rem 1.5rem;
    border-radius: 0.75rem;
    text-decoration: none;
    font-weight: 500;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
    width: 100%;
}

.elementary-lesson-card .section-button:hover {
    background: linear-gradient(135deg, #e55a2b, #e67e22);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
    color: white;
    text-decoration: none;
}

/* Active Activities card (bright gradients inspired by hero cards) */
.elementary-lesson-card.activity-card-v2 {
    border-radius: 1.5rem;
    overflow: hidden;
    border: none;
    display: flex;
    flex-direction: column;
    background: #ffffff;
    box-shadow: 0 20px 50px rgba(15, 23, 42, 0.1);
    transition: transform 0.35s ease, box-shadow 0.35s ease;
}

.elementary-lesson-card.activity-card-v2:hover {
    transform: translateY(-6px);
    box-shadow: 0 24px 60px rgba(15, 23, 42, 0.15);
}

.elementary-lesson-card.activity-card-v2 .activity-hero {
    padding: 1.4rem 1.5rem;
    min-height: 190px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: 0.9rem;
    background: radial-gradient(circle at top left, #c4b5fd 0%, #a855f7 45%, #7c3aed 100%);
    color: #fff;
}

.elementary-lesson-card.activity-card-v2 .activity-hero-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.5rem;
}

.elementary-lesson-card.activity-card-v2 .activity-chip {
    font-size: 0.85rem;
    font-weight: 700;
    color: #0f172a;
    background: rgba(255, 255, 255, 0.9);
    padding: 0.35rem 0.85rem;
    border-radius: 999px;
    max-width: 55%;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.elementary-lesson-card.activity-card-v2 .activity-status-pill {
    font-size: 0.85rem;
    font-weight: 600;
    padding: 0.4rem 0.9rem;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.25);
    border: 1px solid rgba(255, 255, 255, 0.4);
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    text-transform: capitalize;
}

.elementary-lesson-card.activity-card-v2 .activity-status-pill i {
    font-size: 0.9rem;
    color: var(--activity-accent, #f97316);
}

.elementary-lesson-card.activity-card-v2 .activity-hero-title h4 {
    margin: 0;
    font-size: 1.35rem;
    line-height: 1.3;
    font-weight: 800;
    text-transform: none;
    letter-spacing: 0.02em;
}

.elementary-lesson-card.activity-card-v2 .activity-card-body {
    padding: 1.25rem 1.4rem 1.4rem;
    display: flex;
    flex-direction: column;
    gap: 0.85rem;
}

.elementary-lesson-card.activity-card-v2 .activity-description {
    margin: 0;
    color: #475569;
    font-size: 0.9rem;
    line-height: 1.4;
    min-height: 2.8rem;
}

.elementary-lesson-card.activity-card-v2 .activity-description--empty {
    color: #94a3b8;
}

.elementary-lesson-card.activity-card-v2 .activity-progress {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
}

.elementary-lesson-card.activity-card-v2 .activity-progress-track {
    position: relative;
    width: 100%;
    height: 10px;
    border-radius: 999px;
    background: #e0e7ff;
    overflow: hidden;
    box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.1);
}

.elementary-lesson-card.activity-card-v2 .activity-progress-fill {
    position: absolute;
    inset: 0;
    height: 100%;
    border-radius: inherit;
    background: linear-gradient(90deg, var(--activity-accent, #34d399) 0%, rgba(255, 255, 255, 0.8) 100%);
    transition: width 0.4s ease;
    width: 0;
}

.elementary-lesson-card.activity-card-v2 .activity-progress-fill[data-status="completed"] {
    width: 100%;
}

.elementary-lesson-card.activity-card-v2 .activity-progress-fill[data-status="active"] {
    width: 68%;
}

.elementary-lesson-card.activity-card-v2 .activity-progress-fill[data-status="future"] {
    width: 28%;
}

.elementary-lesson-card.activity-card-v2 .activity-progress-meta {
    display: flex;
    justify-content: space-between;
    font-size: 0.85rem;
    color: #475569;
    font-weight: 600;
    text-transform: capitalize;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.elementary-lesson-card.activity-card-v2 .activity-cta {
    margin-top: 0.25rem;
    font-size: 0.9rem;
    font-weight: 600;
    color: #0f172a;
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    text-transform: uppercase;
}

.elementary-lesson-card.activity-card-v2 .activity-hero-title .lesson-subtitle {
    margin: 0;
    font-size: 0.75rem;
    letter-spacing: 0.4em;
    text-transform: uppercase;
    opacity: 0.85;
}

/******/
.elementary-lessons-container .elementary-lesson-card.activity-card-v2:nth-child(5n+1) {
    --activity-accent: #f97316;
}

.elementary-lessons-container .elementary-lesson-card.activity-card-v2:nth-child(5n+2) {
    --activity-accent: #0ea5e9;
}

.elementary-lessons-container .elementary-lesson-card.activity-card-v2:nth-child(5n+3) {
    --activity-accent: #6366f1;
}

.elementary-lessons-container .elementary-lesson-card.activity-card-v2:nth-child(5n+4) {
    --activity-accent: #14b8a6;
}

.elementary-lessons-container .elementary-lesson-card.activity-card-v2:nth-child(5n) {
    --activity-accent: #f472b6;
}

.elementary-lessons-container .elementary-lesson-card.activity-card-v2:nth-child(5n+1) .activity-hero {
    background: radial-gradient(circle at top right, #fff8e7 0%, #ffe5a4 55%, #ffd170 100%);
}

.elementary-lessons-container .elementary-lesson-card.activity-card-v2:nth-child(5n+2) .activity-hero {
    background: radial-gradient(circle at top right, #ffe8f0 0%, #ffb6ce 55%, #ff8fb8 100%);
}

.elementary-lessons-container .elementary-lesson-card.activity-card-v2:nth-child(5n+3) .activity-hero {
    background: radial-gradient(circle at top right, #e5ffe8 0%, #c1f2b1 55%, #8fe391 100%);
}

.elementary-lessons-container .elementary-lesson-card.activity-card-v2:nth-child(5n+4) .activity-hero {
    background: radial-gradient(circle at top right, #f0e9ff 0%, #d9c4ff 55%, #b89cff 100%);
}

.elementary-lessons-container .elementary-lesson-card.activity-card-v2:nth-child(5n) .activity-hero {
    background: radial-gradient(circle at top right, #f6f0ff 0%, #d2c9ff 55%, #b5a6ff 100%);
}
/* Active Lessons Section Card Styling */
.elementary-section-card {
    background: linear-gradient(145deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%);
    border-radius: 16px;
    box-shadow: 0 8px 32px rgba(31, 58, 96, 0.12);
    overflow: hidden;
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    border: 2px solid rgba(31, 58, 96, 0.08);
    display: flex;
    flex-direction: column;
    height: 100%;
    min-height: 240px;
    position: relative;
}

.elementary-section-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #1f3a60, #818cf8, #1f3a60);
    border-radius: 16px 16px 0 0;
}

.elementary-section-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 40px rgba(31, 58, 96, 0.18);
    border-color: rgba(129, 140, 248, 0.3);
}

.elementary-section-card .section-content {
    padding: 0;
    display: flex;
    flex-direction: column;
    height: 100%;
}

.elementary-section-card .section-header {
    background: linear-gradient(135deg, rgba(31, 58, 96, 0.02), rgba(129, 140, 248, 0.05));
    padding: 1.2rem 1.25rem;
    margin: 0;
    display: flex !important;
    flex-direction: column !important;
    gap: 0.7rem;
    border-radius: 0;
    align-items: flex-start !important;
    justify-content: flex-start !important;
    border-bottom: 2px solid rgba(31, 58, 96, 0.08);
    position: relative;
}

.elementary-section-card .section-header .section-title {
    font-size: 1.15rem !important;
    font-weight: 700 !important;
    color: #1f3a60 !important;
    margin: 0 !important;
    padding: 0 !important;
    line-height: 1.4 !important;
    word-wrap: break-word;
    overflow-wrap: break-word;
    display: block !important;
    width: 100% !important;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
    box-sizing: border-box;
    align-items: normal !important;
    gap: 0 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.elementary-section-card .section-header .section-title i {
    display: none !important;
}

.elementary-section-card .section-header .section-title:first-child {
    margin-top: 0;
}

.elementary-section-card .section-course {
    font-size: 0.85rem !important;
    color: #ffffff !important;
    background: linear-gradient(135deg, #1f3a60, #3b5998) !important;
    padding: 0.4rem 0.85rem !important;
    border-radius: 999px !important;
    display: inline-block !important;
    width: auto !important;
    max-width: 100% !important;
    font-weight: 600 !important;
    margin: 0 !important;
    word-wrap: break-word;
    overflow-wrap: break-word;
    box-sizing: border-box;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    box-shadow: 0 2px 8px rgba(31, 58, 96, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.elementary-section-card .section-summary {
    padding: 0.75rem 1.25rem;
    color: #4b5563;
    font-size: 0.9rem;
    line-height: 1.5;
    margin: 0;
    word-wrap: break-word;
    overflow-wrap: break-word;
    overflow: hidden;
}

.elementary-section-card .section-stats {
    padding: 0 1.25rem;
    margin: 0.35rem 0 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.elementary-section-card .section-stat-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
    color: #374151;
    font-weight: 500;
}

.elementary-section-card .section-stat-item i {
    font-size: 1rem;
}

.elementary-section-card .section-stat-item span {
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.elementary-section-card .section-button {
    background: linear-gradient(135deg, #1f3a60, #3b5998);
    color: white;
    padding: 0.8rem 1.25rem;
    border-radius: 12px;
    text-decoration: none;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(31, 58, 96, 0.3);
    width: 100%;
    margin-top: auto;
    border: none;
    font-size: 0.95rem;
    position: relative;
    overflow: hidden;
}

.elementary-section-card .section-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.elementary-section-card .section-button:hover::before {
    left: 100%;
}

.elementary-section-card .section-button:hover {
    background: linear-gradient(135deg, #2d4a6b, #4a6fa5);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(31, 58, 96, 0.4);
    color: white;
    text-decoration: none;
}

.elementary-section-card .section-button i {
    font-size: 0.9rem;
}

/* Enhanced Active Lessons cards (elementary dashboard) */
.lesson-card-v2 {
    background: #f8fafc;
    border: none;
    border-radius: 18px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(79, 70, 229, 0.12);
    display: flex;
    flex-direction: column;
    height: 100%;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.lesson-card-v2:hover {
    transform: translateY(-4px);
    box-shadow: 0 14px 36px rgba(79, 70, 229, 0.16);
}

.lesson-card-v2 .lesson-card-hero {
    position: relative;
    min-height: 180px;
    background: linear-gradient(145deg, #e0f2fe 0%, #c7d2fe 30%, #ddd6fe 60%, #f0f9ff 100%);
    background-size: cover;
    background-position: center;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 1.25rem;
    gap: 0.7rem;
    border-bottom: 2px solid rgba(31, 58, 96, 0.1);
}

.lesson-card-v2 .lesson-hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(15, 23, 42, 0.05) 0%, rgba(15, 23, 42, 0.45) 100%);
}

.lesson-card-v2 .lesson-hero-top {
    position: relative;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.lesson-card-v2 .lesson-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    background: linear-gradient(135deg, rgba(31, 58, 96, 0.95), rgba(129, 140, 248, 0.9));
    color: #ffffff;
    padding: 0.45rem 0.85rem;
    border-radius: 999px;
    font-weight: 700;
    font-size: 0.85rem;
    box-shadow: 0 6px 16px rgba(31, 58, 96, 0.25);
    max-width: 65%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
    min-width: 0;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.lesson-card-v2 .lesson-progress-pill {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    background: linear-gradient(135deg, #10b981, #059669);
    color: #fff;
    padding: 0.4rem 0.9rem;
    border-radius: 12px;
    font-weight: 700;
    font-size: 0.8rem;
    box-shadow: 0 8px 18px rgba(16, 185, 129, 0.3);
    flex-shrink: 0;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.lesson-card-v2 .lesson-progress-pill i {
    font-size: 0.85rem;
}

.lesson-card-v2 .lesson-hero-title {
    position: relative;
    z-index: 1;
    color: #fff;
    margin-top: 0.85rem;
}

.lesson-card-v2 .lesson-subtitle {
    margin: 0;
    font-size: 0.9rem;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    opacity: 0.9;
    font-weight: 700;
}

.lesson-card-v2 .lesson-hero-title .section-title {
    margin: 0;
    padding: 0;
    font-size: 1.4rem !important;
    font-weight: 800 !important;
    color: #fff !important;
    line-height: 1.35 !important;
    -webkit-line-clamp: 3;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.lesson-card-v2 .lesson-card-body {
    background: #fff;
    padding: 1.1rem 1.25rem 1.25rem;
    display: flex;
    flex-direction: column;
    gap: 0.65rem;
    height: 100%;
}

.lesson-card-v2 .lesson-card-body .section-summary {
    padding: 0;
    margin: 0;
    color: #475569;
    font-size: 0.92rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.lesson-card-v2 .lesson-progress {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
}

.lesson-card-v2 .lesson-progress-track {
    position: relative;
    width: 100%;
    height: 10px;
    background: #eef2ff;
    border-radius: 999px;
    overflow: hidden;
}

.lesson-card-v2 .lesson-progress-fill {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 0;
    background: linear-gradient(90deg, #34d399, #22c55e, #10b981);
    border-radius: 999px;
    box-shadow: 0 6px 14px rgba(16, 185, 129, 0.25);
}

.lesson-card-v2 .lesson-progress-meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    flex-wrap: wrap;
    font-weight: 700;
    color: #0f172a;
    font-size: 0.9rem;
}

.lesson-card-v2 .lesson-progress-meta .progress-activities {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    color: #0ea5e9;
    font-weight: 700;
}

.lesson-card-v2 .lesson-progress-meta .progress-activities i {
    color: #10b981;
}

.lesson-card-v2 .section-button {
    margin-top: auto;
    border-radius: 12px;
    font-weight: 800;
    box-shadow: 0 10px 25px rgba(255, 107, 53, 0.35);
}

.lesson-card-v2 .section-button:hover {
    transform: translateY(-2px);
}

/* AI Learning Assistant Promotional Card - Modern Design */
.ai-assistant-promo-card {
    background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
    border-radius: 18px;
    padding: 20px 24px;
    margin-bottom: 24px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 8px 30px rgba(59, 130, 246, 0.12);
    border: 1px solid rgba(59, 130, 246, 0.1);
    transition: all 0.3s ease;
}

.ai-assistant-promo-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 40px rgba(59, 130, 246, 0.2);
}

.ai-assistant-promo-content {
    position: relative;
    z-index: 2;
}

.ai-assistant-promo-badge {
    margin-bottom: 8px;
}

.ai-badge {
    display: inline-block;
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    color: white;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
}

.ai-assistant-promo-text {
    margin-bottom: 16px;
}

.ai-assistant-promo-title {
    font-size: 1.4rem;
    font-weight: 700;
    color: #1f2937;
    margin: 0 0 8px 0;
    line-height: 1.3;
    display: flex;
    align-items: center;
    gap: 10px;
}

.ai-assistant-promo-title i {
    color: #3b82f6;
    font-size: 1.3rem;
}

.ai-assistant-promo-description {
    font-size: 0.9rem;
    color: #6b7280;
    line-height: 1.5;
    margin: 0;
    max-width: 500px;
}

.ai-assistant-promo-actions {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
}

.ai-assistant-cta-button {
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    color: white;
    padding: 12px 24px;
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.9rem;
    text-decoration: none;
    box-shadow: 0 6px 20px rgba(59, 130, 246, 0.35);
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
}

/* Ensure link buttons work properly */
.ai-assistant-cta-button,
.ai-assistant-cta-button:link,
.ai-assistant-cta-button:visited {
    text-decoration: none;
    color: white;
}

.ai-assistant-cta-button:hover {
    background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
    transform: translateY(-2px);
    box-shadow: 0 12px 32px rgba(59, 130, 246, 0.5);
    color: white;
    text-decoration: none;
}

.ai-assistant-cta-button:active {
    transform: translateY(0);
}

.ai-assistant-cta-button i {
    font-size: 0.9rem;
    transition: transform 0.3s ease;
}

.ai-assistant-cta-button:hover i {
    transform: translateX(4px);
}

.ai-assistant-promo-decoration {
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
}

.ai-promo-circle {
    position: absolute;
    border-radius: 50%;
    opacity: 0.1;
    animation: pulse 4s ease-in-out infinite;
}

.ai-promo-circle-1 {
    width: 200px;
    height: 200px;
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    top: -50px;
    right: -50px;
    animation-delay: 0s;
}

.ai-promo-circle-2 {
    width: 150px;
    height: 150px;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    bottom: -30px;
    right: 50px;
    animation-delay: 1s;
}

.ai-promo-circle-3 {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, #93c5fd, #c084fc);
    top: 50%;
    right: 20px;
    animation-delay: 2s;
}

/* Responsive Design for AI Assistant Promo */
@media (max-width: 768px) {
    .ai-assistant-promo-card {
        padding: 18px 20px;
    }

    .ai-assistant-promo-title {
        font-size: 1.2rem;
    }

    .ai-assistant-promo-description {
        font-size: 0.85rem;
    }

    .ai-assistant-cta-button {
        padding: 10px 20px;
        font-size: 0.85rem;
    }
}

/* Section Titles - My Courses, Active Lessons, Active Activities */
.sections-section-title,
.lessons-section-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 24px;
    display: flex;
    align-items: center;
    gap: 12px;
    background: linear-gradient(135deg, #1f3a60, #3b5998);
    padding: 1.4rem 1.6rem;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(31, 58, 96, 0.25);
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
}

.sections-section-title::before,
.lessons-section-title::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.6s;
}

.sections-section-title:hover::before,
.lessons-section-title:hover::before {
    left: 100%;
}

.sections-section-title i,
.lessons-section-title i {
    color: #ffffff;
    font-size: 1.5rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.sections-section-title,
.lessons-section-title {
    position: relative;
}

.view-all-link {
    position: absolute;
    right: 0;
    color: #ffffff;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.view-all-link:hover {
    color: #e0f2fe;
    text-decoration: none;
    transform: translateX(2px);
}

/* Leaderboard Sidebar */
.leaderboard-sidebar {
    background: linear-gradient(145deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 8px 32px rgba(31, 58, 96, 0.12);
    border: 2px solid rgba(31, 58, 96, 0.08);
    margin-bottom: 1.5rem;
}

.leaderboard-section-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 1.25rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: linear-gradient(135deg, #1f3a60, #3b5998);
    padding: 1rem 1.25rem;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(31, 58, 96, 0.25);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.leaderboard-section-title i {
    color: #ffffff;
    font-size: 1.25rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.leaderboard-container {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.leaderboard-item {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.95));
    border-radius: 12px;
    padding: 0.875rem;
    box-shadow: 0 2px 8px rgba(31, 58, 96, 0.06);
    border: 1px solid rgba(31, 58, 96, 0.05);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    position: relative;
}

.leaderboard-item:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 16px rgba(31, 58, 96, 0.12);
}

.leaderboard-item.current-user {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.05));
    border: 2px solid rgba(16, 185, 129, 0.3);
    box-shadow: 0 4px 16px rgba(16, 185, 129, 0.15);
}

.leaderboard-item.top-rank {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 193, 7, 0.05));
    border: 2px solid rgba(255, 193, 7, 0.4);
}

.leaderboard-item.second-rank {
    background: linear-gradient(135deg, rgba(192, 192, 192, 0.15), rgba(158, 158, 158, 0.05));
    border: 2px solid rgba(158, 158, 158, 0.4);
}

.leaderboard-item.third-rank {
    background: linear-gradient(135deg, rgba(205, 127, 50, 0.15), rgba(184, 115, 51, 0.05));
    border: 2px solid rgba(184, 115, 51, 0.4);
}

.leaderboard-rank {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: linear-gradient(135deg, #1f3a60, #3b5998);
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.9rem;
    flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(31, 58, 96, 0.2);
}

.leaderboard-item.top-rank .leaderboard-rank {
    background: linear-gradient(135deg, #ffd700, #ffed4e);
    color: #b45309;
}

.leaderboard-item.second-rank .leaderboard-rank {
    background: linear-gradient(135deg, #c0c0c0, #e5e5e5);
    color: #374151;
}

.leaderboard-item.third-rank .leaderboard-rank {
    background: linear-gradient(135deg, #cd7f32, #d4a574);
    color: #7c2d12;
}

.leaderboard-user {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.leaderboard-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
    border: 2px solid rgba(31, 58, 96, 0.1);
}

.leaderboard-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.avatar-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #1f3a60, #3b5998);
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.8rem;
}

.leaderboard-info {
    flex: 1;
    min-width: 0;
}

.leaderboard-name {
    font-weight: 600;
    font-size: 0.9rem;
    color: #1f2937;
    margin-bottom: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.leaderboard-stats {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
}

.leaderboard-score {
    font-size: 0.75rem;
    font-weight: 700;
    color: #059669;
}

.leaderboard-progress {
    font-size: 0.7rem;
    color: #6b7280;
}

.leaderboard-badge {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ffffff;
    font-size: 0.7rem;
    flex-shrink: 0;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.leaderboard-item .leaderboard-badge:has(i) {
    opacity: 1;
}

.leaderboard-empty {
    text-align: center;
    padding: 2rem 1rem;
    color: #6b7280;
}

.leaderboard-empty i {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    opacity: 0.5;
}

.leaderboard-empty p {
    margin: 0;
    font-size: 0.9rem;
}

/* Simple Section Header - Compact and Clean */
.simple-section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 15px;
    padding: 0;
}

.simple-section-header h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--hs-secondary, #374151);
    margin: 0;
    display: flex;
    align-items: center;
    gap: 8px;
}

.simple-section-header h3 i {
    color: #818cf8;
    font-size: 1.1rem;
}

.simple-section-header .view-all-link {
    color: #818cf8;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.9rem;
    transition: color 0.3s ease;
}

.simple-section-header .view-all-link:hover {
    color: #6366f1;
    text-decoration: none;
}

.elementary-stat-card {
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    display: flex;
    align-items: center;
    gap: 25px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.elementary-stat-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
}

.elementary-stat-card .stat-icon {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #495057;
    font-size: 32px;
    flex-shrink: 0;
    background: white !important;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    position: relative;
}

.elementary-stat-card.courses {
    background: linear-gradient(135deg,rgb(153, 204, 247) 0%,rgb(239, 193, 247) 100%) !important;
}

.elementary-stat-card.lessons {
    background: linear-gradient(135deg,rgb(198, 235, 200) 0%,rgb(211, 241, 175) 100%) !important;
}

.elementary-stat-card.activities {
    background: linear-gradient(135deg,rgb(250, 242, 172) 0%,rgb(250, 242, 167) 100%) !important;
}

.elementary-stat-card.progress {
    background: linear-gradient(135deg,rgb(241, 195, 218) 0%,rgb(250, 205, 220) 100%) !important;
}

.elementary-stat-card .stat-content {
    flex: 1;
}

.elementary-stat-card .stat-number {
    font-size: 2.5rem;
    font-weight: 700;
    color: #343a40;
    margin-bottom: 8px;
    line-height: 1;
}

.elementary-stat-card .stat-label {
    font-size: 1rem;
    color: #6c757d;
    font-weight: 500;
    margin-bottom: 4px;
}

.elementary-stat-card .stat-subtitle {
    font-size: 0.8rem;
    color: #adb5bd;
    font-weight: 400;
}

/* Section Styles - Modern Design */
.elementary-section {
    background: #f8f9fa;
    border-radius: 20px;
    padding: 0;
    margin-bottom: 30px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    overflow: hidden;
}

.section-header {
    background: #ffffff;
    margin-bottom: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    border-radius: 20px 20px 0 0;
    border-bottom: 1px solid rgba(129, 140, 248, 0.1);
}

/* Active Activities Section Header - Special Styling */
.elementary-section:has(.section-title i.fa-gamepad) {
    background: transparent !important;
    border-radius: 0 !important;
    padding: 0 !important;
    margin: 0 0 30px 0 !important;
    box-shadow: none !important;
    overflow: visible !important;
}

.elementary-section:has(.section-title i.fa-gamepad) .section-header {
    background: #ffffff;
    border-radius: 15px;
    margin: 0 0 20px 0;
    box-shadow: 0 2px 10px rgba(129, 140, 248, 0.1);
    border: 1px solid rgba(129, 140, 248, 0.1);
}

.section-title {
    font-size: 1.6rem;
    font-weight: 700;
    color: #6366f1;
    display: flex;
    align-items: center;
    gap: 15px;
    margin: 0;
}

.section-title i {
    color: #818cf8;
    font-size: 1.8rem;
}

.view-all-link {
    color: #818cf8;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
    position: absolute;
    right: 30px;
}

.view-all-link:hover {
    color: #6366f1;
    text-decoration: none;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(129, 140, 248, 0.3);
    background: rgba(129, 140, 248, 0.1);
}

/* Course Cards - Image Reference Design (10% smaller) */
.elementary-courses-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(315px, 1fr));
    gap: 27px;
    padding: 27px;
}

.elementary-course-card {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.08), 0 4px 12px rgba(0, 0, 0, 0.04);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid rgba(0, 0, 0, 0.06);
    position: relative;
    backdrop-filter: blur(10px);
}

.elementary-course-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
    border-radius: 24px 24px 0 0;
}

.elementary-course-card:hover {
    transform: translateY(-12px) scale(1.02);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15), 0 8px 20px rgba(0, 0, 0, 0.08);
    border-color: rgba(102, 126, 234, 0.2);
}

.elementary-course-card:hover::before {
    opacity: 1;
}

/* Course Header Image Section */
.course-image-container {
    position: relative;
    height: 220px;
    overflow: hidden;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    transition: all 0.4s ease;
}

.elementary-course-card:hover .course-image-container {
    transform: scale(1.05);
}

/* Course Image with Overlay - Matching elementary_my_course_clean.mustache */
/* Only apply overlay to regular course cards, NOT to MAP test card */
.elementary-dashboard .elementary-course-card:not(.maptest-course-card) .course-image-container::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.3);
    z-index: 1;
    pointer-events: none;
}

.course-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.course-image-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #2c5530 0%, #1a3d1f 100%);
    color: white;
    font-size: 4rem;
    position: relative;
}

/* Grade badge centered on course image - Exact match to My Courses page */
.elementary-dashboard .elementary-course-card .course-image-container .course-grade-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.4);
    color: white;
    padding: 6px 16px;
    border-radius: 999px;
    font-size: 12px;
    letter-spacing: 0.08em;
    font-weight: 700;
    text-transform: uppercase;
    z-index: 2;
    backdrop-filter: blur(10px);
    white-space: nowrap;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.course-badge {
    position: absolute;
    top: 16px;
    left: 16px;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.course-status {
    position: absolute;
    top: 16px;
    right: 16px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.15) 100%);
    border: 2px solid rgba(255, 255, 255, 0.3);
    color: white;
    font-size: 1.1rem;
    backdrop-filter: blur(15px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transition: all 0.3s ease;
}

.elementary-course-card:hover .course-status {
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}

.course-content {
    padding: 24px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
    backdrop-filter: blur(10px);
}

/* Course Title and Grade Row */
.course-title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 18px;
}

.course-title {
    font-size: 1.75rem;
    font-weight: 900;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 30%, #f093fb 60%, #4facfe 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0 0 16px 0;
    flex: 1;
    line-height: 1.2;
    letter-spacing: 0.5px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    max-height: 4.3rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Elementary course titles - make fully visible without truncation */
.elementary-dashboard .course-title {
    display: block !important;
    -webkit-line-clamp: unset !important;
    -webkit-box-orient: unset !important;
    overflow: visible !important;
    text-overflow: unset !important;
    max-height: unset !important;
    white-space: normal !important;
}

.course-grade {
    background: linear-gradient(135deg, #ff6b35, #f7931e);
    color: white;
    padding: 5px 14px;
    border-radius: 18px;
    font-size: 0.72rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-left: 13px;
    white-space: nowrap;
}

.elementary-dashboard .course-summary {
    color: #6b7280;
    font-size: 0.9rem;
    line-height: 1.5;
    margin: 0.5rem 0 1rem 0;
    display: block;
    overflow: hidden;
}

/* Progress Bars - Image Reference Design */
.progress-section {
    margin-bottom: 16px;
}

.progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.progress-label {
    font-size: 0.9rem;
    color: #6c757d;
    font-weight: 500;
}

.progress-percentage {
    font-size: 0.9rem;
    color: #28a745;
    font-weight: 700;
}

.progress-bar {
    height: 4px;
    background: #e9ecef;
    border-radius: 2px;
    overflow: hidden;
    position: relative;
}

.progress-fill {
    height: 100%;
    background: #28a745;
    border-radius: 2px;
    transition: width 0.8s ease;
    position: relative;
}

/* Course Stats - 2x2 Grid Design */
.course-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 9px;
    margin-bottom: 16px;
}

.stat-item {
    background: #f8f9fa;
    padding: 10px 9px;
    border-radius: 9px;
    display: flex;
    align-items: center;
    gap: 9px;
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.stat-item .stat-icon {
    width: 26px;
    height: 26px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #6c757d;
    font-size: 0.85rem;
    flex-shrink: 0;
    background: #ffffff;
    border: 1px solid #dee2e6;
}

.stat-item .stat-icon.lessons {
    color: #6c757d;
    background: #ffffff;
    border: 1px solid #dee2e6;
}

.stat-item .stat-icon.activities {
    color: #6c757d;
    background: #ffffff;
    border: 1px solid #dee2e6;
}

.stat-item .stat-icon.time {
    color: #6c757d;
    background: #ffffff;
    border: 1px solid #dee2e6;
}

.stat-item .stat-icon.points {
    color: #6c757d;
    background: #ffffff;
    border: 1px solid #dee2e6;
}

.stat-item .stat-content {
    flex: 1;
    text-align: left;
}

.stat-item .stat-number {
    font-size: 0.9rem;
    font-weight: 700;
    color: #2c3e50;
    line-height: 1.2;
}

.stat-item .stat-label {
    font-size: 0.63rem;
    color: #6c757d;
    text-transform: uppercase;
    font-weight: 500;
    letter-spacing: 0.5px;
}

/* Course Action Buttons - Image Reference Design */
.course-actions {
    display: flex;
    gap: 10px;
}

.btn-primary {
    flex: 1;
    background:rgb(142, 181, 253);
    color:rgb(84, 86, 88);
    border: 1px solid #dee2e6;
    padding: 10px 16px;
    border-radius: 10px;
    font-size: 0.82rem;
    font-weight: 700;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.3s ease;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    text-transform: none;
    letter-spacing: 0.3px;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    color: #495057;
    text-decoration: none;
    background: #f8f9fa;
    border-color: #adb5bd;
}

.btn-primary i {
    font-size: 0.9rem;
}

.btn-secondary {
    background: #6c757d;
    color: white;
    border: none;
    padding: 10px;
    border-radius: 50%;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    cursor: pointer;
    width: 38px;
    height: 38px;
    flex-shrink: 0;
}

.btn-secondary:hover {
    background: #495057;
    color: white;
    text-decoration: none;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);
}

.btn-secondary i {
    font-size: 1rem;
}

/* Course Details Panel Styles */
.course-details-panel {
    background: linear-gradient(135deg, #f8f9ff 0%, #e3f2fd 100%);
    border-radius: 15px;
    margin-top: 15px;
    border: 2px solid rgba(102, 126, 234, 0.2);
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
    overflow: hidden;
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
        max-height: 0;
    }
    to {
        opacity: 1;
        transform: translateY(0);
        max-height: 500px;
    }
}

.course-details-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 10px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: white;
}

.course-details-title {
    font-size: 0.9rem;
    font-weight: 700;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 8px;
}

.course-details-title i {
    font-size: 1rem;
}

.course-details-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.8rem;
}

.course-details-close:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.1);
}

.course-details-content {
    padding: 15px;
}

.course-details-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.course-detail-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 10px;
    border-radius: 8px;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.5);
    border: 1px solid rgba(102, 126, 234, 0.1);
}

.course-detail-item:hover {
    background: rgba(102, 126, 234, 0.1);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
}

.details-content {
    padding: 1rem;
}

.details-content h6 {
    font-size: 1rem;
    font-weight: 600;
    color: #1a202c;
    margin: 0 0 0.75rem 0;
}

.detail-item {
    margin-bottom: 0.5rem;
    font-size: 0.85rem;
    color: #4a5568;
}

.detail-item strong {
    color: #2d3748;
    margin-right: 0.5rem;
}

.teachers-list {
    margin-top: 0.25rem;
    padding-left: 0;
}

.teacher-name {
    padding: 0.25rem 0.5rem;
    margin: 0.25rem 0;
    background: rgba(102, 126, 234, 0.1);
    border-radius: 6px;
    color: #4a5568;
    font-size: 0.85rem;
    display: inline-block;
    margin-right: 0.5rem;
}

.detail-icon {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.9rem;
    flex-shrink: 0;
}

.detail-icon i {
    font-size: 0.8rem;
}

.course-detail-item:nth-child(1) .detail-icon {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
}

.course-detail-item:nth-child(2) .detail-icon {
    background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
}

.course-detail-item:nth-child(3) .detail-icon {
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
}

.course-detail-item:nth-child(4) .detail-icon {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.detail-content {
    flex: 1;
    min-width: 0;
}

.detail-label {
    font-size: 0.65rem;
    color: #6c757d;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    margin-bottom: 2px;
    line-height: 1;
}

.detail-value {
    font-size: 0.8rem;
    color: #2c3e50;
    font-weight: 600;
    line-height: 1.2;
    word-wrap: break-word;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Enhanced button styling for course details toggle */
.course-details-toggle {
    position: relative;
    transition: all 0.3s ease;
}

.course-details-toggle:hover {
    background: #667eea !important;
    color: white !important;
    transform: scale(1.1);
}

.course-details-toggle:active {
    transform: scale(0.95);
}

.btn-continue {
    background: linear-gradient(135deg, #fd7e14, #ff8c42);
    color: white;
    padding: 12px 24px;
    border-radius: 12px;
    text-decoration: none;
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(253, 126, 20, 0.3);
    font-size: 0.95rem;
}

.btn-continue:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(253, 126, 20, 0.4);
    color: white;
    text-decoration: none;
    background: linear-gradient(135deg, #e8690b, #f0781a);
}

.btn-continue i {
    font-size: 1rem;
}

/* Active Activities Grid - Image Reference Design (10% smaller) */
.elementary-active-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 20px;
    padding: 20px;
    justify-items: stretch;
}

.elementary-active-card {
    background: white;
    border-radius: 15px;
    padding: 18px 25px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    border: 1px solid rgba(0, 0, 0, 0.05);
    position: relative;
    width: 100%;
    max-width: 450px;
    min-width: 350px;
    text-align: left;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    margin: 10px;
}

.elementary-active-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
}

/* Activity Icon - Circular Design */
.activity-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: #e9ecef;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 10px;
    position: relative;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.activity-icon i {
    color: white;
    font-size: 24px;
}

.activity-icon .notification-dot {
    position: absolute;
    top: 3px;
    right: 3px;
    width: 10px;
    height: 10px;
    background: #6c757d;
    border-radius: 50%;
    border: 2px solid white;
}

.active-title {
    font-size: 1.1rem;
    font-weight: 700;
    color: #2c3e50;
    margin-bottom: 8px;
    line-height: 1.3;
    text-align: left;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    min-height: 2.4em;
}

.active-course {
    font-size: 0.85rem;
    color: #6c757d;
    font-weight: 500;
    margin-bottom: 10px;
    text-align: left;
    line-height: 1.3;
    display: inline-block;
    background: #f8f9fa;
    padding: 5px 12px;
    border-radius: 10px;
}

.active-summary {
    color: #6c757d;
    font-size: 0.9rem;
    line-height: 1.5;
    margin-bottom: 20px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.active-progress {
    margin-bottom: 20px;
}

.active-stats {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.9rem;
    color: #495057;
    margin-bottom: 25px;
}

.active-stats i {
    color: #28a745;
    font-size: 1rem;
}

/* Responsive adjustments for active activities grid */
@media (max-width: 1200px) {
    .elementary-active-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .elementary-active-card {
        max-width: 100%;
        min-width: 300px;
    }
}

@media (max-width: 992px) {
    .elementary-active-grid {
        grid-template-columns: 1fr;
    }
    
    .elementary-active-card {
        max-width: 100%;
        min-width: 280px;
    }
}

@media (max-width: 768px) {
    .elementary-active-grid {
        grid-template-columns: 1fr;
        gap: 15px;
        padding: 20px;
    }
    
    .elementary-active-card {
        max-width: 100%;
        min-width: unset;
        padding: 20px;
    }
    
    .activity-icon {
        width: 70px;
        height: 70px;
    }
    
    .activity-icon i {
        font-size: 28px;
    }
    
    .active-title {
        font-size: 1.1rem;
    }
}

@media (max-width: 576px) {
    .elementary-active-grid {
        grid-template-columns: 1fr;
        gap: 12px;
        padding: 15px;
    }
    
    .elementary-active-card {
        max-width: 100%;
        min-width: unset;
        padding: 18px;
    }
    
    .activity-icon {
        width: 60px;
        height: 60px;
    }
    
    .activity-icon i {
        font-size: 24px;
    }
    
    .active-title {
        font-size: 1rem;
    }
}

/* No Content Message */
.no-content {
    text-align: center;
    padding: 60px 20px;
    background: white;
    border-radius: 20px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.no-content i {
    font-size: 4rem;
    color: #6c757d;
    margin-bottom: 20px;
    opacity: 0.5;
}

.no-content h3 {
    color: #2c3e50;
    font-size: 1.8rem;
    margin-bottom: 15px;
}

.no-content p {
    color: #6c757d;
    font-size: 1rem;
    margin-bottom: 25px;
}

.back-to-dashboard {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 12px 30px;
    border-radius: 12px;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    font-weight: 700;
    transition: all 0.3s ease;
}

.back-to-dashboard:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    color: white;
    text-decoration: none;
}

/* Animations */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-pulse {
    animation: pulse 1s ease-in-out;
}

@keyframes pulse {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

/* Calendar Widget Styles - Colorful Design - Compact */
.calendar-widget {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%);
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
    margin-bottom: 20px;
    border: 2px solid rgba(102, 126, 234, 0.1);
    position: relative;
    overflow: hidden;
}

.calendar-widget::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
}

.calendar-widget-header {
    margin-bottom: 15px;
}

.calendar-month-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
}

.calendar-nav-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    width: 36px;
    height: 36px;
    border-radius: 12px;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

.calendar-nav-btn:hover {
    background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
}

.calendar-month-title {
    font-size: 1.4rem;
    font-weight: 700;
    color: #2c3e50;
    margin: 0;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.calendar-widget-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 4px;
    margin-bottom: 15px;
}

.calendar-dow {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    font-size: 0.8rem;
    font-weight: 700;
    padding: 8px 4px;
    text-align: center;
    border-radius: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    box-shadow: 0 2px 8px rgba(240, 147, 251, 0.3);
    min-height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.calendar-day {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%);
    border: 2px solid transparent;
    border-radius: 10px;
    padding: 8px 4px;
    min-height: 50px;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    transition: all 0.3s ease;
    cursor: pointer;
    justify-content: flex-start;
}

.calendar-day:hover {
    background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
    border-color: #667eea;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
}

.calendar-day.today {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-color: #667eea;
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    transform: scale(1.05);
}

.calendar-day.today .day-number {
    font-weight: 800;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.calendar-day.other-month {
    color: #cbd5e0;
    background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
    opacity: 0.6;
}

.calendar-day.other-month:hover {
    opacity: 0.8;
    background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e0 100%);
}

.calendar-day.selected {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    border-color: #f093fb;
    box-shadow: 0 6px 20px rgba(240, 147, 251, 0.4);
    transform: scale(1.02);
}

.calendar-day.selected .day-number {
    color: white;
    font-weight: 800;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.day-number {
    font-size: 1.1rem;
    font-weight: 700;
    margin-bottom: 4px;
    color: inherit;
    line-height: 1;
}

.day-events {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 4px;
    width: 100%;
}

.day-event {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    position: relative;
    cursor: pointer;
}

.day-event:hover {
    transform: scale(1.3);
    z-index: 10;
}

.day-event::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 0.75rem;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 1000;
    pointer-events: none;
    margin-bottom: 5px;
}

.day-event::before {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 5px solid transparent;
    border-top-color: rgba(0, 0, 0, 0.9);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    margin-bottom: -5px;
}

.day-event:hover::after,
.day-event:hover::before {
    opacity: 1;
    visibility: visible;
}

.day-event.assignment {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
}

.day-event.quiz {
    background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
}

.day-event.lesson {
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
}

.day-event.event {
    background: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
}

.upcoming-events {
    border-top: 2px solid transparent;
    background: linear-gradient(white, white) padding-box,
                linear-gradient(135deg, #667eea 0%, #764ba2 100%) border-box;
    padding-top: 20px;
    margin-top: 10px;
}

.mySchedule-section .upcoming-events {
    max-height: 240px;
    overflow-y: auto;
    padding-right: 6px;
}

.mySchedule-section .upcoming-events::-webkit-scrollbar {
    width: 6px;
}

.mySchedule-section .upcoming-events::-webkit-scrollbar-track {
    background: rgba(31, 58, 96, 0.05);
    border-radius: 999px;
}

.mySchedule-section .upcoming-events::-webkit-scrollbar-thumb {
    background: rgba(31, 58, 96, 0.25);
    border-radius: 999px;
}

.upcoming-title {
    font-size: 1rem;
    font-weight: 700;
    color: #2c3e50;
    margin: 0 0 15px 0;
    display: flex;
    align-items: center;
    gap: 8px;
}

.upcoming-title::before {
    content: 'ðŸ“…';
    font-size: 1.2rem;
}

.upcoming-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.upcoming-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 15px;
    background: linear-gradient(135deg, #f8f9ff 0%, #e3f2fd 100%);
    border-radius: 12px;
    border-left: 4px solid #667eea;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
}

.upcoming-item:hover {
    transform: translateX(5px);
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);
    background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
}

.event-date {
    font-size: 0.85rem;
    color: #667eea;
    font-weight: 700;
    min-width: 70px;
    background: white;
    padding: 4px 8px;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.event-title {
    font-size: 0.9rem;
    color: #2c3e50;
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: 600;
}
.mySchedule-section {
    background: var(--hs-surface);
    border: 1px solid var(--hs-border);
    border-radius: 24px;
    padding: 24px;
    box-shadow: 0 25px 35px var(--hs-shadow);
}
/* Responsive Design */
@media (max-width: 1024px) {
    .elementary-dashboard {
        margin-left: 0;
        padding: 20px;
    }
    
    .elementary-stats-container {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .elementary-courses-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    }
}

@media (max-width: 768px) {
    .elementary-stats-container {
        grid-template-columns: 1fr;
    }
    
    .elementary-courses-grid {
        grid-template-columns: 1fr;
    }
    
    .welcome-title {
        font-size: 2rem;
    }
    
    .welcome-student-picture {
        width: 60px;
        height: 60px;
        border-width: 3px;
    }
    
    .section-title {
        font-size: 1.5rem;
    }
}

/* ============================================
   Elementary School Calendar Widget - Clean Professional Design
   ============================================ */

.elementary-calendar-widget {
    background: white;
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    border: 1px solid #e5e7eb;
}

.calendar-widget-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 1px solid #e5e7eb;
}

.calendar-header-left {
    display: flex;
    align-items: center;
    gap: 20px;
}

.calendar-title {
    font-size: 1.4rem;
    font-weight: 700;
    color: #6366f1;
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 0;
}

.calendar-title i {
    color: #6366f1;
    font-size: 1.4rem;
}

/* View Toggle Buttons - Clean Segmented Control */
.calendar-view-toggle {
    display: inline-flex;
    background: #f3f4f6;
    border-radius: 8px;
    padding: 4px;
    gap: 2px;
}

.view-toggle-btn {
    background: transparent;
    border: none;
    padding: 8px 20px;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 600;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s ease;
}

.view-toggle-btn.active {
    background: #6366f1;
    color: white;
}

.view-toggle-btn:hover:not(.active) {
    background: #e5e7eb;
    color: #374151;
}

.calendar-nav-controls {
    display: flex;
    align-items: center;
    gap: 10px;
}

.calendar-nav-btn {
    background: white;
    border: 1px solid #d1d5db;
    width: 36px;
    height: 36px;
    border-radius: 6px;
    color: #6b7280;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.calendar-nav-btn:hover {
    background: #f9fafb;
    border-color: #6366f1;
    color: #6366f1;
}

.calendar-period-display {
    background: white;
    border: 1px solid #d1d5db;
    padding: 8px 20px;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 600;
    color: #111827;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 160px;
    text-align: center;
}

.calendar-period-display:hover {
    background: #f9fafb;
    border-color: #6366f1;
}

.calendar-today-btn {
    background: #6366f1;
    border: none;
    padding: 8px 20px;
    border-radius: 6px;
    color: white;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.calendar-today-btn:hover {
    background: #4f46e5;
}

/* ============================================
   Calendar View Container
   ============================================ */

.calendar-view {
    margin-bottom: 20px;
}

/* ============================================
   WEEK VIEW - Clean Vertical Column Design (Matching Second Image)
   ============================================ */

.week-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 12px;
}

.week-day-column {
    background: #fafafa;
    border-radius: 8px;
    overflow: hidden;
    min-height: 300px;
}

.week-day-header {
    background: #6366f1;
    color: white;
    padding: 12px 8px;
    text-align: center;
    font-weight: 700;
}

.week-day-name {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
}

.week-day-date {
    font-size: 1.3rem;
    font-weight: 700;
}

.week-day-header.today {
    background: linear-gradient(135deg, #c4b5fd 0%, #ddd6fe 100%);
    color: #5b21b6;
    border-bottom-color: #7c3aed;
}

.week-event-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
}

.week-event-card.assignment {
    border-left-color: #3b82f6;
}

.week-event-card.quiz {
    border-left-color: #10b981;
}

.week-event-card.lesson {
    border-left-color: #ec4899;
}

.week-event-card.course {
    border-left-color: #f59e0b;
}

.week-event-time {
    font-size: 0.85rem;
    font-weight: 700;
    color: #111827;
    margin-bottom: 6px;
}

.week-event-title {
    font-size: 0.9rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 10px;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.week-event-badge {
    display: inline-block;
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.week-event-badge.assignment {
    background: #dbeafe;
    color: #1e40af;
}

.week-event-badge.quiz {
    background: #d1fae5;
    color: #065f46;
}

.week-event-badge.lesson {
    background: #fce7f3;
    color: #9f1239;
}

.week-event-badge.course {
    background: #fef3c7;
    color: #92400e;
}

/* ============================================
   Calendar View Container
   ============================================ */

.calendar-view {
    margin-bottom: 20px;
}

/* ============================================
   WEEK VIEW - Clean Simple Design (Exact Match to Second Image)
   ============================================ */

.week-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 10px;
}

.week-day-column {
    background: #fafafa;
    border-radius: 6px;
    overflow: hidden;
    min-height: 200px;
}

.week-day-header {
    background: #ede9fe;
    color: #6366f1;
    padding: 14px 8px;
    text-align: center;
    font-weight: 700;
    border-bottom: 3px solid #6366f1;
}

.week-day-name {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
    font-weight: 700;
}

.week-day-date {
    font-size: 1.4rem;
    font-weight: 800;
}

.week-day-header.today {
    background: linear-gradient(135deg, #c4b5fd 0%, #ddd6fe 100%);
    color: #5b21b6;
    border-bottom-color: #7c3aed;
}

.week-day-events {
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-height: 220px;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Custom scrollbar for week day events */
.week-day-events::-webkit-scrollbar {
    width: 5px;
}

.week-day-events::-webkit-scrollbar-track {
    background: #f3f4f6;
    border-radius: 10px;
}

.week-day-events::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 10px;
}

.week-day-events::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
}

.week-event-card {
    background: white;
    border-radius: 6px;
    padding: 12px;
    border-left: 3px solid #3b82f6;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    transition: all 0.2s ease;
    cursor: pointer;
    position: relative;
}

.week-event-card::after {
    content: 'â†’';
    position: absolute;
    right: 8px;
    bottom: 8px;
    font-size: 0.9rem;
    color: #9ca3af;
    opacity: 0;
    transition: all 0.2s ease;
}

.week-event-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transform: translateX(4px);
}

.week-event-card:hover::after {
    opacity: 1;
    right: 12px;
}

.week-event-card.assignment {
    border-left-color: #3b82f6;
}

.week-event-card.quiz {
    border-left-color: #10b981;
}

.week-event-card.lesson {
    border-left-color: #ec4899;
}

.week-event-card.course {
    border-left-color: #f59e0b;
}

.week-event-time {
    font-size: 0.85rem;
    font-weight: 700;
    color: #111827;
    margin-bottom: 6px;
}

.week-event-title {
    font-size: 0.9rem;
    font-weight: 500;
    color: #374151;
    margin-bottom: 10px;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.week-event-badge {
    display: inline-block;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.week-event-badge.assignment {
    background: #dbeafe;
    color: #1e40af;
}

.week-event-badge.quiz {
    background: #d1fae5;
    color: #065f46;
}

.week-event-badge.lesson {
    background: #fce7f3;
    color: #9f1239;
}

.week-event-badge.course {
    background: #fef3c7;
    color: #92400e;
}

/* ============================================
   MONTH VIEW - Simple Calendar Grid
   ============================================ */

.month-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
    background: white;
    padding: 15px;
    border-radius: 8px;
}

.month-day-header {
    background: #ede9fe;
    color: #6366f1;
    font-size: 0.75rem;
    font-weight: 800;
    padding: 10px 6px;
    text-align: center;
    border-radius: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.month-day-cell {
    background: #fafafa;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    padding: 8px 6px;
    min-height: 80px;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    transition: all 0.2s ease;
    cursor: pointer;
}

.month-day-cell:hover {
    background: #ede9fe;
    border-color: #6366f1;
}

.month-day-cell.today {
    background: linear-gradient(135deg, #c4b5fd 0%, #ddd6fe 100%);
    color: #5b21b6;
    border-color: #7c3aed;
    font-weight: 800;
}

.month-day-cell.today .month-day-number {
    color: white;
}

.month-day-cell.other-month {
    opacity: 0.3;
    background: #f9fafb;
}

.month-day-number {
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: 6px;
    color: #111827;
}

.month-day-events {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 4px;
}

.calendar-event-dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
}

.calendar-event-dot.assignment {
    background: #3b82f6;
}

.calendar-event-dot.quiz {
    background: #10b981;
}

.calendar-event-dot.lesson {
    background: #ec4899;
}

.calendar-event-dot.course {
    background: #f59e0b;
}

.calendar-event-dot.meeting {
    background: #3b82f6; /* Blue for meetings */
}

.calendar-event-dot.lecture {
    background: #10b981; /* Green for lectures */
}

.calendar-event-dot.exam {
    background: #ef4444; /* Red for exams */
}

.calendar-event-dot.activity {
    background: #f59e0b; /* Orange for activities */
}

.calendar-event-dot.school-event {
    background: #8b5cf6; /* Purple for general school events */
}

/* ============================================
   LIST VIEW - Simple Timeline
   ============================================ */

.list-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
    max-height: 600px;
    overflow-y: auto;
}

.list-date-group {
    background: #fafafa;
    border-radius: 8px;
    padding: 15px;
}

.list-date-header {
    font-size: 1.1rem;
    font-weight: 700;
    color: #6366f1;
    margin-bottom: 12px;
    padding-bottom: 10px;
    border-bottom: 2px solid #e5e7eb;
}

.list-events {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.list-event-item {
    background: white;
    border-radius: 6px;
    padding: 14px 16px;
    border-left: 4px solid #3b82f6;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s ease;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.list-event-item:hover {
    transform: translateX(6px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

.list-event-item.assignment {
    border-left-color: #3b82f6;
}

.list-event-item.quiz {
    border-left-color: #10b981;
}

.list-event-item.lesson {
    border-left-color: #ec4899;
}

.list-event-item.course {
    border-left-color: #f59e0b;
}

.list-event-info {
    flex: 1;
}

.list-event-title {
    font-size: 1rem;
    font-weight: 600;
    color: #111827;
    margin-bottom: 4px;
}

.list-event-meta {
    display: flex;
    gap: 15px;
    font-size: 0.8rem;
    color: #6b7280;
}

.list-event-meta i {
    margin-right: 4px;
}

.list-event-badge {
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    white-space: nowrap;
}

.list-event-badge.assignment {
    background: #dbeafe;
    color: #1e40af;
}

.list-event-badge.quiz {
    background: #d1fae5;
    color: #065f46;
}

.list-event-badge.lesson {
    background: #fce7f3;
    color: #9f1239;
}

.list-event-badge.course {
    background: #fef3c7;
    color: #92400e;
}

/* ============================================
   LIST VIEW - Simple List
   ============================================ */

.list-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
    max-height: 600px;
    overflow-y: auto;
}

.list-date-group {
    background: #fafafa;
    border-radius: 6px;
    padding: 15px;
}

.list-date-header {
    font-size: 1.05rem;
    font-weight: 700;
    color: #6366f1;
    margin-bottom: 12px;
    padding-bottom: 10px;
    border-bottom: 1px solid #e5e7eb;
}

.list-events {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.list-event-item {
    background: white;
    border-radius: 6px;
    padding: 14px 16px;
    border-left: 3px solid #3b82f6;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s ease;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    position: relative;
}

.list-event-item::after {
    content: 'â†’';
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1.2rem;
    color: #d1d5db;
    opacity: 0;
    transition: all 0.2s ease;
}

.list-event-item:hover {
    transform: translateX(8px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

.list-event-item:hover::after {
    opacity: 1;
    right: 20px;
}

.list-event-item.assignment {
    border-left-color: #3b82f6;
}

.list-event-item.quiz {
    border-left-color: #10b981;
}

.list-event-item.lesson {
    border-left-color: #ec4899;
}

.list-event-item.course {
    border-left-color: #f59e0b;
}

.list-event-info {
    flex: 1;
}

.list-event-title {
    font-size: 1rem;
    font-weight: 600;
    color: #111827;
    margin-bottom: 4px;
}

.list-event-meta {
    display: flex;
    gap: 15px;
    font-size: 0.8rem;
    color: #6b7280;
}

.list-event-meta i {
    margin-right: 4px;
}

.list-event-badge {
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    white-space: nowrap;
}

.list-event-badge.assignment {
    background: #dbeafe;
    color: #1e40af;
}

.list-event-badge.quiz {
    background: #d1fae5;
    color: #065f46;
}

.list-event-badge.lesson {
    background: #fce7f3;
    color: #9f1239;
}

.list-event-badge.course {
    background: #fef3c7;
    color: #92400e;
}

/* ============================================
   Upcoming Events Sidebar - Clean Simple Design
   ============================================ */

.calendar-events-sidebar {
    background: #fafafa;
    border-radius: 8px;
    padding: 20px;
    border: 1px solid #e5e7eb;
    height: fit-content;
}

.calendar-events-sidebar .events-list {
    max-height: 220px;
    min-height: 220px;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Custom scrollbar for calendar upcoming events */
.calendar-events-sidebar .events-list::-webkit-scrollbar {
    width: 5px;
}

.calendar-events-sidebar .events-list::-webkit-scrollbar-track {
    background: #f3f4f6;
    border-radius: 10px;
}

.calendar-events-sidebar .events-list::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 10px;
}

.calendar-events-sidebar .events-list::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
}

.events-sidebar-title {
    font-size: 1.1rem;
    font-weight: 700;
    color: #10b981;
    margin: 0 0 18px 0;
    display: flex;
    align-items: center;
    gap: 8px;
}

.events-sidebar-title i {
    color: #10b981;
    font-size: 1.2rem;
}

.events-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    margin-bottom: 20px;
}

/* Empty state styling */
.no-events,
.no-events-compact {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 60px 20px;
    color: #9ca3af;
    flex: 1;
}

.no-events i,
.no-events-compact i {
    font-size: 2.5rem;
    margin-bottom: 12px;
    color: #d1d5db;
}

.no-events p,
.no-events-compact p {
    margin: 0;
    font-size: 0.9rem;
    font-weight: 500;
    color: #6b7280;
}

/* Custom scrollbar for upcoming events */
.events-list::-webkit-scrollbar {
    width: 5px;
}

.events-list::-webkit-scrollbar-track {
    background: #f3f4f6;
    border-radius: 10px;
}

.events-list::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 10px;
}

.events-list::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
}

.courses-section-wrapper,
.upcoming-events-section-wrapper {
    /* Ensure both sections align at the top */
}

.courses-section-wrapper .sections-section-title,
.upcoming-events-section-wrapper .sections-section-title {
    margin-bottom: 20px;
}

.upcoming-events-section-wrapper .sections-section-title {
    font-size: 1.5rem;
}

.upcoming-events-section-wrapper .sections-section-title i {
    color: #10b981 !important;
    font-size: 1.3rem;
}

.upcoming-events-section-wrapper .sections-section-title span {
    color: #10b981 !important;
}

.upcoming-events-widget {
    background: white;
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
    border: 1px solid rgba(0, 0, 0, 0.05);
    min-height: 550px;
    display: flex;
    flex-direction: column;
    margin-top: 0;
    transition: all 0.3s ease;
}

.upcoming-events-widget:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.18);
}

/* Responsive: Stack on smaller screens */
@media (max-width: 991px) {
    .upcoming-events-section-wrapper {
        margin-top: 20px;
    }
}

/* Remove sticky positioning - keep both sections aligned */
.upcoming-events-section-wrapper .upcoming-events-widget {
    position: relative !important;
}

.event-item {
    background: white;
    border-radius: 6px;
    padding: 10px 12px;
    border-left: 3px solid #3b82f6;
    transition: all 0.2s ease;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    position: relative;
    margin-bottom: 10px;
}

.event-item::after {
    content: 'â†’';
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1rem;
    color: #d1d5db;
    opacity: 0;
    transition: all 0.2s ease;
}

.event-item:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
    transform: translateX(6px);
}

.event-item:hover::after {
    opacity: 1;
    right: 14px;
}

.event-item.assignment {
    border-left-color: #3b82f6;
}

.event-item.quiz {
    border-left-color: #10b981;
}

.event-item.lesson {
    border-left-color: #ec4899;
}

.event-item.course {
    border-left-color: #f59e0b;
}

.event-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 6px;
    gap: 8px;
}

.event-item-title {
    font-size: 0.9rem;
    font-weight: 600;
    color: #111827;
    flex: 1;
    line-height: 1.4;
}

.event-item-date {
    font-size: 0.75rem;
    color: #6366f1;
    font-weight: 600;
    background: #ede9fe;
    padding: 3px 8px;
    border-radius: 4px;
    white-space: nowrap;
}

.event-item-meta {
    display: flex;
    gap: 12px;
    font-size: 0.75rem;
    color: #6b7280;
}

.event-item-meta i {
    margin-right: 4px;
}

.event-legend {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    padding-top: 15px;
    border-top: 1px solid #e5e7eb;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.8rem;
    color: #6b7280;
    font-weight: 500;
}

.legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.legend-dot.assignment {
    background: #3b82f6;
}

.legend-dot.quiz {
    background: #10b981;
}

.legend-dot.lesson {
    background: #ec4899;
}

.legend-dot.course {
    background: #f59e0b;
}

/* Calendar Layout - Simple Two Column */
.elementary-calendar-widget {
    display: flex;
    flex-direction: column;
    gap: 25px;
}

.calendar-widget-header {
    width: 100%;
}

.calendar-body-container {
    display: grid;
    grid-template-columns: 1fr 280px;
    gap: 25px;
}

.calendar-view {
    width: 100%;
}

.calendar-events-sidebar {
    width: 100%;
}

/* Calendar Responsive Design */
@media (max-width: 1200px) {
    .calendar-body-container {
        grid-template-columns: 1fr;
    }
    
    .calendar-events-sidebar {
        max-height: 400px;
    }
    
    .week-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

@media (max-width: 992px) {
    .elementary-calendar-widget {
        padding: 20px;
    }
    
    .calendar-widget-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    
    .calendar-header-left {
        width: 100%;
    }
    
    .calendar-nav-controls {
        width: 100%;
    }
    
    .week-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 768px) {
    .calendar-title {
        font-size: 1.2rem;
    }
    
    .calendar-view-toggle {
        width: 100%;
    }
    
    .view-toggle-btn {
        flex: 1;
    }
    
    .week-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }
    
    .week-day-column {
        min-height: 220px;
    }
    
    .month-grid {
        gap: 6px;
        padding: 10px;
    }
    
    .month-day-cell {
        min-height: 60px;
        padding: 6px 4px;
    }
}

@media (max-width: 576px) {
    .week-grid {
        grid-template-columns: 1fr;
    }
    
    .calendar-nav-controls {
        flex-wrap: wrap;
    }
    
    .calendar-period-display {
        width: 100%;
        order: -1;
    }
}
</style>

{{#custom_dashboard}}

<div class="custom_dashboard{{#dashboard_type}}{{#elementary}} dashboard-type-elementary{{/elementary}}{{#middle}} dashboard-type-middle{{/middle}}{{#highschool}} dashboard-type-highschool{{/highschool}}{{#default}} dashboard-type-default{{/default}}{{/dashboard_type}}">

{{#show_aiassistant}}
    <!-- AI Learning Assistant - Now opens as full page, no modal needed -->
{{/show_aiassistant}}




<!-- Cohort-specific content -->
{{#dashboard_type}}
   

        {{#elementary}}
        <div class="grade-panel grade-panel-elementary" data-grade-panel="elementary">
        <!-- Include Elementary Sidebar -->
        {{> theme_remui_kids/dashboard/elementary_sidebar}}

        <div class="elementary-dashboard">
            {{#is_mycourses_page}}
            <!-- My Courses Page Content -->
            <div class="mycourses-page-content">
                <!-- Page Header -->
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fa fa-book"></i>
                        My Courses
                    </h1>
                    <p class="page-subtitle">Explore and manage your enrolled courses</p>
                </div>

                <!-- Courses Grid -->
                {{#has_student_courses}}
                <div class="courses-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                    {{#student_courses}}
                    <div class="adventure-card-item" data-course-id="{{id}}">
                        <!-- Top Illustration Banner -->
                        <div class="adventure-banner-container">
                            {{#courseimage}}
                                <img src="{{courseimage}}" alt="{{fullname}} banner">
                            {{/courseimage}}
                            {{^courseimage}}
                                <div class="banner-placeholder"></div>
                            {{/courseimage}}
                            
                            <div class="adventure-grade-overlay">
                                <span class="adventure-grade-text">Grade {{grade_level}}</span>
                            </div>
                        </div>

                        <!-- Content Section -->
                        <div class="adventure-content-wrapper">
                            <!-- Titles -->
                            <h3 class="adventure-course-title">{{fullname}}</h3>
                            
                            <!-- Status Badge -->
                            <div class="adventure-status-badge">
                                <i class="fa fa-star"></i>
                                
                            </div>

                            <!-- Journey Progress Meter -->
                            <div class="adventure-journey-meter-card">
                                <div class="journey-meter-info">
                                    <span class="journey-meter-label">Your Journey Meter</span>
                                    <span class="journey-meter-value">{{progress_percentage}}% Complete</span>
                                </div>
                                <div class="journey-progress-track">
                                    <div class="journey-progress-fill" style="width: {{progress_percentage}}%;"></div>
                                </div>
                            </div>

                            <!-- Stats Cards -->
                            <div class="adventure-stats-container">
                                <!-- Quests Card -->
                                <div class="adventure-stat-box">
                                    <div class="stat-icon-circle blue">
                                        <i class="fa fa-briefcase"></i>
                                    </div>
                                    <p class="stat-box-value">{{completed_sections}}/{{total_sections}}</p>
                                    <p class="stat-box-label">Lessons</p>
                                </div>
                                
                                <!-- Challenges Card -->
                                <div class="adventure-stat-box">
                                    <div class="stat-icon-circle green">
                                        <i class="fa fa-rocket"></i>
                                    </div>
                                    <p class="stat-box-value">{{completed_activities}}/{{total_activities}}</p>
                                    <p class="stat-box-label">Activities</p>
                                </div>
                            </div>

                            <!-- Action Button -->
                            <a href="{{courseurl}}" class="adventure-action-button {{#completed}}completed{{/completed}} {{#in_progress}}in-progress{{/in_progress}}">
                                {{#completed}}Review Adventure{{/completed}}
                                {{^completed}}
                                    {{#in_progress}}Continue Journey{{/in_progress}}
                                    {{^in_progress}}Start Adventure{{/in_progress}}
                                {{/completed}}
                            </a>

                        </div>
                    </div>
                    {{/student_courses}}
                </div>
                {{/has_student_courses}}
                
                {{^has_student_courses}}
                <!-- No Courses Message -->
                <div class="no-courses-message">
                    <div class="no-courses-icon">
                        <i class="fa fa-book-open"></i>
                    </div>
                    <h3>No Courses Available</h3>
                    <p>You don't have any enrolled courses yet. Contact your teacher or administrator to get enrolled in courses.</p>
                    <a href="{{{dashboardurl}}}" class="back-to-dashboard">
                        <i class="fa fa-arrow-left"></i>
                        Back to Dashboard
                    </a>
                </div>
                {{/has_student_courses}}
            </div>
            {{/is_mycourses_page}}
            
            {{^is_mycourses_page}}
           
            
            <!-- Grade 1-3 Statistics Cards -->
            {{#elementary_stats}}
            <div class="row mb-4">
                <div class="col-12">
                    <div class="elementary-metrics-grid">
                        <div class="metric-card metric-courses" style="background: linear-gradient(135deg, #fff9e4 0%, #ffd98a 100%) !important; border-color: #ffd98a !important; box-shadow: 0 8px 25px rgba(255, 217, 138, 0.3) !important; color: #0f172a !important;">
                            <!-- Decorative Bubbles -->
                            <div class="card-bubbles">
                                <div class="bubble bubble-1" style="background: rgba(255, 217, 138, 0.3); width: 40px; height: 40px; top: 15%; left: 10%; animation-delay: 0s;"></div>
                                <div class="bubble bubble-2" style="background: rgba(255, 234, 196, 0.4); width: 25px; height: 25px; top: 60%; right: 15%; animation-delay: 1s;"></div>
                                <div class="bubble bubble-3" style="background: rgba(255, 217, 138, 0.2); width: 30px; height: 30px; bottom: 20%; left: 20%; animation-delay: 2s;"></div>
                            </div>
                            <div class="metric-card-inner">
                                <div class="metric-info">
                                    <p class="metric-kicker">
                                        <i class="fa fa-graduation-cap"></i>
                                        {{#str}}courses, theme_remui_kids{{/str}}
                                    </p>
                                    <p class="metric-title">{{total_courses}}</p>
                                </div>
                                <div class="metric-illustration">
                                    <img src="{{config.wwwroot}}/theme/remui_kids/garde-1img/Gemini_Generated_Image_4dfnbh4dfnbh4dfn-removebg-preview.png" alt="Courses hero">
                                </div>
                            </div>
                        </div>

                        <div class="metric-card metric-lessons" style="background: linear-gradient(135deg, #ffeef4 0%, #ffc4c6 100%) !important; border-color: #ffc4c6 !important; box-shadow: 0 8px 25px rgba(255, 196, 198, 0.3) !important; color: #0f172a !important;">
                            <!-- Decorative Bubbles -->
                            <div class="card-bubbles">
                                <div class="bubble bubble-1" style="background: rgba(255, 196, 198, 0.3); width: 35px; height: 35px; top: 10%; right: 12%; animation-delay: 0.5s;"></div>
                                <div class="bubble bubble-2" style="background: rgba(255, 238, 244, 0.4); width: 28px; height: 28px; bottom: 25%; left: 15%; animation-delay: 1.5s;"></div>
                                <div class="bubble bubble-3" style="background: rgba(255, 196, 198, 0.25); width: 22px; height: 22px; top: 50%; right: 20%; animation-delay: 2.5s;"></div>
                            </div>
                            <div class="metric-card-inner">
                                <div class="metric-info">
                                    <p class="metric-kicker">
                                        <i class="fa fa-lightbulb"></i>
                                        {{#str}}nav_lessons, theme_remui_kids{{/str}}
                                    </p>
                                    <p class="metric-title">{{lessons_completed}}</p>
                                </div>
                                <div class="metric-illustration">
                                    <img src="{{config.wwwroot}}/theme/remui_kids/garde-1img/Gemini_Generated_Image_ef6kveef6kveef6k-removebg-preview.png" alt="Lessons hero">
                                </div>
                            </div>
                        </div>

                        <div class="metric-card metric-activities" style="background: linear-gradient(135deg, #ecffe4 0%, #c7f0a3 100%) !important; border-color: #c7f0a3 !important; box-shadow: 0 8px 25px rgba(199, 240, 163, 0.3) !important; color: #0f172a !important;">
                            <!-- Decorative Bubbles -->
                            <div class="card-bubbles">
                                <div class="bubble bubble-1" style="background: rgba(199, 240, 163, 0.3); width: 38px; height: 38px; bottom: 15%; right: 10%; animation-delay: 0.8s;"></div>
                                <div class="bubble bubble-2" style="background: rgba(236, 255, 228, 0.4); width: 26px; height: 26px; top: 20%; left: 18%; animation-delay: 1.8s;"></div>
                                <div class="bubble bubble-3" style="background: rgba(199, 240, 163, 0.25); width: 32px; height: 32px; top: 55%; right: 25%; animation-delay: 2.8s;"></div>
                            </div>
                            <div class="metric-card-inner">
                                <div class="metric-info">
                                    <p class="metric-kicker">
                                        <i class="fa fa-trophy"></i>
                                        {{#str}}activities_done, theme_remui_kids{{/str}}
                                    </p>
                                    <p class="metric-title">{{activities_completed}}</p>
                                </div>
                                <div class="metric-illustration">
                                    <img src="{{config.wwwroot}}/theme/remui_kids/garde-1img/Gemini_Generated_Image_izrpacizrpacizrp-removebg-preview.png" alt="Activities hero">
                                </div>
                            </div>
                        </div>

                        <div class="metric-card metric-progress" style="background: linear-gradient(135deg, #f3e6ff 0%, #d1bbff 100%) !important; border-color: #d1bbff !important; box-shadow: 0 8px 25px rgba(209, 187, 255, 0.3) !important; color: #0f172a !important;">
                            <!-- Decorative Bubbles -->
                            <div class="card-bubbles">
                                <div class="bubble bubble-1" style="background: rgba(209, 187, 255, 0.3); width: 36px; height: 36px; top: 12%; left: 12%; animation-delay: 0.3s;"></div>
                                <div class="bubble bubble-2" style="background: rgba(243, 230, 255, 0.4); width: 24px; height: 24px; bottom: 18%; right: 18%; animation-delay: 1.3s;"></div>
                                <div class="bubble bubble-3" style="background: rgba(209, 187, 255, 0.2); width: 29px; height: 29px; top: 45%; left: 25%; animation-delay: 2.3s;"></div>
                            </div>
                            <div class="metric-card-inner">
                                <div class="metric-info">
                                    <p class="metric-kicker">
                                        <i class="fa fa-chart-line"></i>
                                        {{#str}}progress, theme_remui_kids{{/str}}
                                    </p>
                                    <p class="metric-title">{{overall_progress}}%</p>
                                </div>
                                <div class="metric-illustration">
                                    <img src="{{config.wwwroot}}/theme/remui_kids/garde-1img/Gemini_Generated_Image_sct4zusct4zusct4-removebg-preview.png" alt="Progress hero">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{/elementary_stats}}

            <!-- AI Learning Assistant CTA Card -->
            {{#show_aiassistant}}
            <div class="ai-assistant-promo-card">
                <div class="ai-assistant-promo-content">
                    <div class="ai-assistant-promo-badge">
                        <span class="ai-badge">AI</span>
                    </div>
                    <div class="ai-assistant-promo-text">
                        <h2 class="ai-assistant-promo-title">
                            <i class="fa fa-robot"></i> AI Learning Assistant
                        </h2>
                        <p class="ai-assistant-promo-description">
                            Get instant help with your lessons, assignments, and questions. Ask anything and learn faster with AI-powered assistance.
                        </p>
                    </div>
                    <div class="ai-assistant-promo-actions">
                        <a href="{{{aiassistanturl}}}" class="ai-assistant-cta-button">
                            <span>Open AI Assistant</span>
                            <i class="fa fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
                <div class="ai-assistant-promo-decoration">
                    <div class="ai-promo-circle ai-promo-circle-1"></div>
                    <div class="ai-promo-circle ai-promo-circle-2"></div>
                    <div class="ai-promo-circle ai-promo-circle-3"></div>
                </div>
            </div>
            {{/show_aiassistant}}


            <!-- My Courses Section (Combined with MAP Test Card) with Upcoming Events Sidebar -->
            {{#show_maptest_card}}
            {{#has_elementary_courses}}
            <div class="row mb-4">
                <!-- Left Column: My Courses -->
                <div class="col-lg-9">
                    <div class="courses-section-wrapper">
                        <!-- Styled My Courses Header - Kid Friendly with Light Radial Colors -->
                        <div class="styled-section-header my-courses-header" style="background: radial-gradient(circle at top left, #e0e7ff 0%, #ddd6fe 30%, #c7d2fe 60%, #a5b4fc 100%); border: 2px solid #c7d2fe; box-shadow: 0 8px 24px rgba(139, 92, 246, 0.15);">
                            <div class="header-icon" style="background: rgba(255, 255, 255, 0.8); border: 2px solid #c7d2fe; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.2);">
                                <i class="fa fa-book" style="color: #6366f1;"></i>
                            </div>
                            <div class="header-content">
                                <h3 class="header-title" style="color: #4c1d95; font-size: 2rem; text-shadow: 0 1px 2px rgba(255,255,255,0.5);">ðŸ“š My Courses</h3>
                                <p class="header-subtitle" style="color: #6366f1; font-size: 1.1rem; font-weight: 600;">Explore your courses and see your amazing progress! ðŸŽ‰</p>
                            </div>
                            {{#mycoursesurl}}
                            <a href="{{{mycoursesurl}}}" class="view-all-link" style="background: rgba(255, 255, 255, 0.9); border: 2px solid #c7d2fe; color: #6366f1; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.1);">View All ></a>
                            {{/mycoursesurl}}
                            {{^mycoursesurl}}
                            <a href="{{config.wwwroot}}/theme/remui_kids/my_courses.php" class="view-all-link" style="background: rgba(255, 255, 255, 0.9); border: 2px solid #c7d2fe; color: #6366f1; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.1);">View All ></a>
                            {{/mycoursesurl}}
                        </div>
                        <div class="elementary-courses-container">
                        <!-- MAP Test Card -->
                        {{#maptest_card}}
                        <div class="elementary-course-card enhanced maptest-course-card" data-maptest-card="true" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
                            <div class="course-image-container maptest-course-image">
                                <div class="maptest-course-chip">MAP Practice</div>
                                <div class="maptest-course-hero-text">
                                    <h4 class="maptest-course-title">{{title}}</h4>
                                    <p class="maptest-course-subtitle">Boost confidence before assignments</p>
                                </div>
                            </div>
                            <div class="course-content maptest-course-content">
                                <div class="maptest-description-block">
                                    <p class="course-summary">{{{description}}}</p>
                                </div>
                                <div class="maptest-feature-grid">
                                    <div class="maptest-feature">
                                        <div class="maptest-feature-icon">
                                            <i class="fa fa-compass"></i>
                                        </div>
                                        <div class="maptest-feature-text">
                                            <span class="feature-title">Adaptive</span>
                                            <span class="feature-subtitle">Skill focus</span>
                                        </div>
                                    </div>
                                    <div class="maptest-feature">
                                        <div class="maptest-feature-icon">
                                            <i class="fa fa-bolt"></i>
                                        </div>
                                        <div class="maptest-feature-text">
                                            <span class="feature-title">Quick</span>
                                            <span class="feature-subtitle">Readiness</span>
                                        </div>
                                    </div>
                                    <div class="maptest-feature">
                                        <div class="maptest-feature-icon">
                                            <i class="fa fa-tasks"></i>
                                        </div>
                                        <div class="maptest-feature-text">
                                            <span class="feature-title">Reports</span>
                                            <span class="feature-subtitle">Instant view</span>
                                        </div>
                                    </div>
                                    <div class="maptest-feature">
                                        <div class="maptest-feature-icon">
                                            <i class="fa fa-user-check"></i>
                                        </div>
                                        <div class="maptest-feature-text">
                                            <span class="feature-title">Teachers</span>
                                            <span class="feature-subtitle">Get alerts</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="course-actions">
                                    <a href="#" class="course-button primary maptest-start-btn" data-maptest-url="{{url}}" data-maptest-username="{{username}}" data-maptest-sso="{{#enablesso}}true{{/enablesso}}{{^enablesso}}false{{/enablesso}}" data-maptest-ssourl="{{ssourl}}" data-maptest-baseurl="{{maptesturl}}">
                                        <i class="fa fa-rocket"></i>
                                        {{button}}
                                    </a>
                                </div>
                            </div>
                        </div>
                        {{/maptest_card}}
                        
                        <!-- Regular Courses -->

                        {{#elementary_courses}}
                        <div class="adventure-card-item" data-course-id="{{id}}">
                            <!-- Top Illustration Banner -->
                            <div class="adventure-banner-container">
                                {{#courseimage}}
                                    <img src="{{courseimage}}" alt="{{fullname}} banner">
                                {{/courseimage}}
                                {{^courseimage}}
                                    <div class="banner-placeholder"></div>
                                {{/courseimage}}
                                
                                <div class="adventure-grade-overlay">
                                    <span class="adventure-grade-text">Grade {{grade_level}}</span>
                                </div>
                            </div>

                            <!-- Content Section -->
                            <div class="adventure-content-wrapper">
                                <!-- Titles -->
                                <h3 class="adventure-course-title">{{fullname}}</h3>
                                
                                <!-- Status Badge -->
                                <div class="adventure-status-badge">
                                    <i class="fa fa-star"></i>
                                    <span>
                                        {{#completed}}Journey Complete!{{/completed}}
                                        {{^completed}}
                                            {{#in_progress}}Almost There!{{/in_progress}}
                                            {{^in_progress}}Ready to Explore!{{/in_progress}}
                                        {{/completed}}
                                    </span>
                                </div>

                                <!-- Journey Progress Meter -->
                                <div class="adventure-journey-meter-card">
                                    <div class="journey-meter-info">
                                        <span class="journey-meter-label">Your Journey Meter</span>
                                        <span class="journey-meter-value">{{progress_percentage}}% Complete</span>
                                    </div>
                                    <div class="journey-progress-track">
                                        <div class="journey-progress-fill" style="width: {{progress_percentage}}%;"></div>
                                    </div>
                                </div>

                                <!-- Stats Cards (real lessons & activities) -->
                                <div class="adventure-stats-container">
                                    <div class="adventure-stat-box">
                                        <div class="stat-icon-circle blue">
                                            <i class="fa fa-book"></i>
                                        </div>
                                        <p class="stat-box-value">{{completed_sections}} / {{total_sections}}</p>
                                        <p class="stat-box-label">Lessons Done</p>
                                    </div>
                                    <div class="adventure-stat-box">
                                        <div class="stat-icon-circle green">
                                            <i class="fa fa-puzzle-piece"></i>
                                        </div>
                                        <p class="stat-box-value">{{completed_activities}} / {{total_activities}}</p>
                                        <p class="stat-box-label">Activities Done</p>
                                    </div>
                                    <div class="adventure-stat-box">
                                        <div class="stat-icon-circle">
                                            <i class="fa fa-flag-checkered"></i>
                                        </div>
                                        {{#completed}}<p class="stat-box-value">Completed</p>{{/completed}}
                                        {{#in_progress}}<p class="stat-box-value">In Progress</p>{{/in_progress}}
                                        {{#not_started}}<p class="stat-box-value">Not Started</p>{{/not_started}}
                                        <p class="stat-box-label">Status</p>
                                    </div>
                                </div>

                                <!-- Action Button -->
                                <a href="{{courseurl}}" class="adventure-action-button {{#completed}}completed{{/completed}} {{#in_progress}}in-progress{{/in_progress}}">
                                    {{#completed}}Review Adventure{{/completed}}
                                    {{^completed}}
                                        {{#in_progress}}Continue Journey{{/in_progress}}
                                        {{^in_progress}}Start Adventure{{/in_progress}}
                                    {{/completed}}
                                </a>

                            </div>
                        </div>
                        {{/elementary_courses}}
                        </div>
                    </div>
                </div>

                <!-- Right Column: Leaderboard -->
                <div class="col-lg-3">
                    <div class="leaderboard-sidebar">
                        <h3 class="leaderboard-section-title">
                            <span><i class="fa fa-trophy"></i> Leaderboard</span>
                        </h3>
                        <div class="leaderboard-container">
                            {{#leaderboard_users}}
                            <div class="leaderboard-item {{#is_current_user}}current-user{{/is_current_user}} {{#rank_1}}top-rank{{/rank_1}} {{#rank_2}}second-rank{{/rank_2}} {{#rank_3}}third-rank{{/rank_3}}">
                                <div class="leaderboard-rank">
                                    {{#rank_1}}<i class="fa fa-crown"></i>{{/rank_1}}
                                    {{#rank_2}}<i class="fa fa-medal"></i>{{/rank_2}}
                                    {{#rank_3}}<i class="fa fa-award"></i>{{/rank_3}}
                                    {{^rank_1}}{{^rank_2}}{{^rank_3}}{{rank}}{{/rank_3}}{{/rank_2}}{{/rank_1}}
                                </div>
                                <div class="leaderboard-user">
                                    <div class="leaderboard-avatar">
                                        {{#userpicture}}<img src="{{userpicture}}" alt="{{fullname}}" />{{/userpicture}}
                                        {{^userpicture}}<div class="avatar-placeholder">{{initials}}</div>{{/userpicture}}
                                    </div>
                                    <div class="leaderboard-info">
                                        <div class="leaderboard-name">{{fullname}}</div>
                                        <div class="leaderboard-stats">
                                            <span class="leaderboard-score">{{score}} pts</span>
                                            <span class="leaderboard-progress">{{progress_percentage}}% complete</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="leaderboard-badge">
                                    {{#has_badge}}<i class="fa fa-star"></i>{{/has_badge}}
                                </div>
                            </div>
                            {{/leaderboard_users}}

                            {{^leaderboard_users}}
                            <div class="leaderboard-empty">
                                <i class="fa fa-chart-line"></i>
                                <p>Leaderboard data loading...</p>
                            </div>
                            {{/leaderboard_users}}
                        </div>
                    </div>
                </div>

            </div>
            {{/has_elementary_courses}}
            {{/show_maptest_card}}
            
            <!-- MAP Test Card Only (when no courses) with Upcoming Events -->
            {{#show_maptest_card}}
            {{^has_elementary_courses}}
            <div class="row mb-4">
                <!-- Left Column: MAP Test -->
                <div class="col-lg-9">
                    <div class="courses-section-wrapper">
                        <h3 class="sections-section-title">
                            <span><i class="fa fa-book"></i> My Courses</span>
                            {{#mycoursesurl}}
                            <a href="{{{mycoursesurl}}}" class="view-all-link">View All ></a>
                            {{/mycoursesurl}}
                            {{^mycoursesurl}}
                            <a href="{{config.wwwroot}}/theme/remui_kids/my_courses.php" class="view-all-link">View All ></a>
                            {{/mycoursesurl}}
                        </h3>
                        <div class="elementary-courses-container">
                        {{#maptest_card}}
                        <div class="elementary-course-card enhanced maptest-course-card" data-maptest-card="true" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
                            <div class="course-image-container maptest-course-image">
                                <div class="maptest-course-chip">MAP Practice</div>
                                <div class="maptest-course-hero-text">
                                    <h4 class="maptest-course-title">{{title}}</h4>
                                    <p class="maptest-course-subtitle">Boost confidence before assignments</p>
                                </div>
                            </div>
                            <div class="course-content maptest-course-content">
                                <p class="course-summary">{{{description}}}</p>
                                <div class="course-stats-grid maptest-course-stats-grid">
                                    <div class="stat-box">
                                        <i class="fa fa-compass stat-icon"></i>
                                        <div class="stat-content">
                                            <div class="stat-number">Adaptive</div>
                                            <div class="stat-label">Skill focus</div>
                                        </div>
                                    </div>
                                    <div class="stat-box">
                                        <i class="fa fa-bolt stat-icon"></i>
                                        <div class="stat-content">
                                            <div class="stat-number">Quick</div>
                                            <div class="stat-label">Readiness</div>
                                        </div>
                                    </div>
                                    <div class="stat-box">
                                        <i class="fa fa-tasks stat-icon"></i>
                                        <div class="stat-content">
                                            <div class="stat-number">Reports</div>
                                            <div class="stat-label">Instant view</div>
                                        </div>
                                    </div>
                                    <div class="stat-box">
                                        <i class="fa fa-user-check stat-icon"></i>
                                        <div class="stat-content">
                                            <div class="stat-number">Teachers</div>
                                            <div class="stat-label">Get alerts</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="course-actions">
                                    <a href="#" class="course-button primary maptest-start-btn" data-maptest-url="{{url}}" data-maptest-username="{{username}}" data-maptest-sso="{{#enablesso}}true{{/enablesso}}{{^enablesso}}false{{/enablesso}}" data-maptest-ssourl="{{ssourl}}" data-maptest-baseurl="{{maptesturl}}">
                                        <i class="fa fa-rocket"></i>
                                        {{button}}
                                    </a>
                                </div>
                            </div>
                        </div>
                        {{/maptest_card}}
                        </div>
                    </div>
                </div>

                <!-- Right Column: Leaderboard -->
                <div class="col-lg-3">
                    <div class="leaderboard-sidebar">
                        <h3 class="leaderboard-section-title">
                            <span><i class="fa fa-trophy"></i> Leaderboard</span>
                        </h3>
                        <div class="leaderboard-container">
                            {{#leaderboard_users}}
                            <div class="leaderboard-item {{#is_current_user}}current-user{{/is_current_user}} {{#rank_1}}top-rank{{/rank_1}} {{#rank_2}}second-rank{{/rank_2}} {{#rank_3}}third-rank{{/rank_3}}">
                                <div class="leaderboard-rank">
                                    {{#rank_1}}<i class="fa fa-crown"></i>{{/rank_1}}
                                    {{#rank_2}}<i class="fa fa-medal"></i>{{/rank_2}}
                                    {{#rank_3}}<i class="fa fa-award"></i>{{/rank_3}}
                                    {{^rank_1}}{{^rank_2}}{{^rank_3}}{{rank}}{{/rank_3}}{{/rank_2}}{{/rank_1}}
                                </div>
                                <div class="leaderboard-user">
                                    <div class="leaderboard-avatar">
                                        {{#userpicture}}<img src="{{userpicture}}" alt="{{fullname}}" />{{/userpicture}}
                                        {{^userpicture}}<div class="avatar-placeholder">{{initials}}</div>{{/userpicture}}
                                    </div>
                                    <div class="leaderboard-info">
                                        <div class="leaderboard-name">{{fullname}}</div>
                                        <div class="leaderboard-stats">
                                            <span class="leaderboard-score">{{score}} pts</span>
                                            <span class="leaderboard-progress">{{progress_percentage}}% complete</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="leaderboard-badge">
                                    {{#has_badge}}<i class="fa fa-star"></i>{{/has_badge}}
                                </div>
                            </div>
                            {{/leaderboard_users}}

                            {{^leaderboard_users}}
                            <div class="leaderboard-empty">
                                <i class="fa fa-chart-line"></i>
                                <p>Leaderboard data loading...</p>
                            </div>
                            {{/leaderboard_users}}
                        </div>
                    </div>
                </div>

            </div>
            {{/has_elementary_courses}}
            {{/show_maptest_card}}
            
            <!-- Courses Only (when MAP Test card is not shown) -->
            {{^show_maptest_card}}
            {{#has_elementary_courses}}
            <div class="row mb-4">
                <!-- Left Column: My Courses (75%) -->
                <div class="col-lg-9">
                    
                    <div class="simple-section-header">
                        <h3><i class="fa fa-book"></i> My Courses</h3>
                        {{#mycoursesurl}}
                        <a href="{{{mycoursesurl}}}" class="view-all-link">View All</a>
                        {{/mycoursesurl}}
                        {{^mycoursesurl}}
                        <a href="{{config.wwwroot}}/theme/remui_kids/my_courses.php" class="view-all-link">View All</a>
                        {{/mycoursesurl}}
                    </div>
                    <div class="elementary-courses-container">
                        {{#elementary_courses}}
                        <div class="adventure-card-item" data-course-id="{{id}}">
                            <!-- Top Illustration Banner -->
                            <div class="adventure-banner-container">
                                {{#courseimage}}
                                    <img src="{{courseimage}}" alt="{{fullname}} banner">
                                {{/courseimage}}
                                {{^courseimage}}
                                    <div class="banner-placeholder"></div>
                                {{/courseimage}}
                                
                                <div class="adventure-grade-overlay">
                                    
                                </div>
                            </div>

                            <!-- Content Section -->
                            <div class="adventure-content-wrapper">
                                <!-- Titles -->
                                <h3 class="adventure-course-title">{{fullname}}</h3>
                                
                                

                                <!-- Journey Progress Meter -->
                                <div class="adventure-journey-meter-card">
                                    <div class="journey-meter-info">
                                        <span class="journey-meter-label">Your Journey Meter</span>
                                        <span class="journey-meter-value">{{progress_percentage}}% Complete</span>
                                    </div>
                                    <div class="journey-progress-track">
                                        <div class="journey-progress-fill" style="width: {{progress_percentage}}%;"></div>
                                    </div>
                                </div>

                                <!-- Stats Cards -->
                                <div class="adventure-stats-container">
                                    <!-- Quests Card -->
                                    <div class="adventure-stat-box">
                                        <div class="stat-icon-circle blue">
                                            <i class="fa fa-briefcase"></i>
                                        </div>
                                        <p class="stat-box-value">{{completed_sections}}/{{total_sections}}</p>
                                        <p class="stat-box-label">Lessons</p>
                                    </div>
                                    
                                    <!-- Challenges Card -->
                                    <div class="adventure-stat-box">
                                        <div class="stat-icon-circle green">
                                            <i class="fa fa-rocket"></i>
                                        </div>
                                        <p class="stat-box-value">{{completed_activities}}/{{total_activities}}</p>
                                        <p class="stat-box-label">Activities</p>
                                    </div>
                                </div>

                                <!-- Action Button -->
                                <a href="{{courseurl}}" class="adventure-action-button {{#completed}}completed{{/completed}} {{#in_progress}}in-progress{{/in_progress}}">
                                    {{#completed}}Review Adventure{{/completed}}
                                    {{^completed}}
                                        {{#in_progress}}Continue Journey{{/in_progress}}
                                        {{^in_progress}}Start Adventure{{/in_progress}}
                                    {{/completed}}
                                </a>

                            </div>
                        </div>
                        {{/elementary_courses}}
                    </div>

                    <!-- View All Courses Button -->

                </div>

                <!-- Right Column: Leaderboard -->
                <div class="col-lg-3">
                    <div class="leaderboard-sidebar">
                        <h3 class="leaderboard-section-title">
                            <span><i class="fa fa-trophy"></i> Leaderboard</span>
                        </h3>
                        <div class="leaderboard-container">
                            {{#leaderboard_users}}
                            <div class="leaderboard-item {{#is_current_user}}current-user{{/is_current_user}} {{#rank_1}}top-rank{{/rank_1}} {{#rank_2}}second-rank{{/rank_2}} {{#rank_3}}third-rank{{/rank_3}}">
                                <div class="leaderboard-rank">
                                    {{#rank_1}}<i class="fa fa-crown"></i>{{/rank_1}}
                                    {{#rank_2}}<i class="fa fa-medal"></i>{{/rank_2}}
                                    {{#rank_3}}<i class="fa fa-award"></i>{{/rank_3}}
                                    {{^rank_1}}{{^rank_2}}{{^rank_3}}{{rank}}{{/rank_3}}{{/rank_2}}{{/rank_1}}
                                </div>
                                <div class="leaderboard-user">
                                    <div class="leaderboard-avatar">
                                        {{#userpicture}}<img src="{{userpicture}}" alt="{{fullname}}" />{{/userpicture}}
                                        {{^userpicture}}<div class="avatar-placeholder">{{initials}}</div>{{/userpicture}}
                                    </div>
                                    <div class="leaderboard-info">
                                        <div class="leaderboard-name">{{fullname}}</div>
                                        <div class="leaderboard-stats">
                                            <span class="leaderboard-score">{{score}} pts</span>
                                            <span class="leaderboard-progress">{{progress_percentage}}% complete</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="leaderboard-badge">
                                    {{#has_badge}}<i class="fa fa-star"></i>{{/has_badge}}
                                </div>
                            </div>
                            {{/leaderboard_users}}

                            {{^leaderboard_users}}
                            <div class="leaderboard-empty">
                                <i class="fa fa-chart-line"></i>
                                <p>Leaderboard data loading...</p>
                            </div>
                            {{/leaderboard_users}}
                        </div>
                    </div>
                </div>

            {{/has_elementary_courses}}
            {{/show_maptest_card}}

            <!-- Active Lessons Section -->
            {{#has_elementary_active_sections}}
            <div class="row mb-4">
                <div class="col-12">
                    <div>
                        <h3 class="sections-section-title">
                            <span><i class="fa fa-list-alt"></i> Active Lessons</span>
                             <a href="{{{lessonsurl}}}" class="view-all-link">View All &gt;</a>
                        </h3>
                       
                    </div>
                    <div class="elementary-sections-container">
                        {{#elementary_active_sections}}
                        <div class="elementary-section-card lesson-card-v2">
                            <div class="lesson-card-hero" {{#sectionimage}}style="background-image: url('{{sectionimage}}');"{{/sectionimage}}>
                                <div class="lesson-hero-overlay"></div>
                                <div class="lesson-hero-top">
                                    <span class="lesson-chip" title="{{coursename}}">{{coursename}}</span>
                                    <span class="lesson-progress-pill">
                                        <i class="fa fa-star"></i>
                                        {{progress_percentage}}% complete
                                    </span>
                                </div>
                                <div class="lesson-hero-title">
                                    
                                    <h4 class="section-title">{{name}}</h4>
                                </div>
                            </div>
                            <div class="lesson-card-body">
                                {{#summary}}
                                <p class="section-summary">{{{summary}}}</p>
                                {{/summary}}

                                <div class="lesson-progress">
                                    <div class="lesson-progress-track">
                                        <div class="lesson-progress-fill" style="width: {{progress_percentage}}%;"></div>
                                    </div>
                                    <div class="lesson-progress-meta">
                                        <span class="progress-activities">
                                            <i class="fa fa-check-circle"></i>
                                            {{completed_activities}}/{{total_activities}} activities
                                        </span>
                                    </div>
                                </div>

                                <a href="{{{courseurl}}}" class="section-button">
                                    <i class="fa fa-play"></i> Continue Section
                                </a>
                            </div>
                        </div>
                        {{/elementary_active_sections}}
                    </div>
                </div>
            </div>
            {{/has_elementary_active_sections}}
            
            <!-- Active Activities Section -->
            {{#has_elementary_active_lessons}}
            <div class="row mb-4">
                <div class="col-12">
                    <div>
                        <h3 class="lessons-section-title">
                            <span><i class="fa fa-gamepad"></i> Active Activities</span>
                            <a href="{{{activitiesurl}}}" class="view-all-link">View All &gt;</a>
                        </h3>
                      
                    
                       
                    </div>
                    <div class="elementary-lessons-container">
                        {{#elementary_active_lessons}}
                        <a href="{{{url}}}" class="elementary-lesson-card activity-card-v2" data-status="{{status}}">
                            <div class="activity-hero">
                                <div class="activity-hero-top">
                                    <span class="activity-chip">{{coursename}}</span>
                                    <span class="activity-status-pill">
                                        <i class="fa {{icon}}"></i>
                                        <span class="status-text">{{status}}</span>
                                    </span>
                                </div>
                                <div class="activity-hero-title">
                                    <p class="lesson-subtitle">LESSON</p>
                                    <h4 class="activity-title">{{name}}</h4>
                                </div>
                            </div>
                            <div class="activity-card-body">
                                {{#description}}
                                <p class="activity-description">{{{description}}}</p>
                                {{/description}}
                                {{^description}}
                                <p class="activity-description activity-description--empty">Explore the next fun challenge.</p>
                                {{/description}}

                                <div class="activity-progress">
                                    <div class="activity-progress-track">
                                        <span class="activity-progress-fill" data-status="{{status}}"></span>
                                    </div>
                                    <div class="activity-progress-meta">
                                        <span class="activity-progress-label">{{sectionname}}</span>
                                        <span class="activity-progress-status">{{status}}</span>
                                    </div>
                                </div>

                                <span class="activity-cta">
                                    Continue Activity
                                    <i class="fa fa-arrow-right"></i>
                                </span>
                            </div>
                        </a>
                        {{/elementary_active_lessons}}
                    </div>
                </div>
            </div>
            {{/has_elementary_active_lessons}}
            
            
            {{/is_mycourses_page}}
            
        </div>
        </div>
    {{/elementary}}
    
    <!-- Elementary Dashboard JavaScript (from elementary_dashboard.mustache) -->
    <script>
    // Truncate descriptions to 10 words for Grade 1 students
    function truncateToWords(element, maxWords) {
        if (!element || !element.textContent) return;
        
        // Skip if already truncated (has data attribute)
        if (element.dataset.truncated === 'true') return;
        
        // Get text content directly (strips HTML automatically)
        let text = element.textContent || element.innerText || '';
        text = text.trim();
        
        if (!text || text.length === 0) return;
        
        // Split into words and filter out empty strings
        const words = text.split(/\s+/).filter(word => word.length > 0);
        
        if (words.length > maxWords) {
            // Truncate to maxWords
            const truncatedText = words.slice(0, maxWords).join(' ');
            
            // Replace content with truncated text and ellipsis
            // Use textContent to ensure HTML is removed
            element.textContent = truncatedText + '...';
            element.dataset.truncated = 'true';
        } else {
            // Mark as processed even if no truncation needed
            element.dataset.truncated = 'true';
        }
    }
    
    // Apply truncation function
    function applyTruncation() {
        // Find all description elements within elementary dashboard context
        const allElements = document.querySelectorAll('.course-summary, .section-summary, .lesson-description');
        
        allElements.forEach(element => {
            // Check if element is within elementary dashboard context
            const isElementary = element.closest('.elementary-dashboard') || 
                                element.closest('.elementary-course-card') ||
                                element.closest('.elementary-section-card') ||
                                element.closest('.elementary-lesson-card') ||
                                element.closest('.elementary-dashboard');
            
            if (isElementary) {
                truncateToWords(element, 10);
            }
        });
        
        // Also try direct selectors for better coverage
        const directSelectors = [
            '.elementary-dashboard .course-summary',
            '.elementary-course-card .course-summary',
            '.elementary-dashboard .section-summary',
            '.elementary-section-card .section-summary',
            '.elementary-dashboard .lesson-description',
            '.elementary-lesson-card .lesson-description'
        ];
        
        directSelectors.forEach(selector => {
            try {
                const elements = document.querySelectorAll(selector);
                elements.forEach(element => {
                    truncateToWords(element, 10);
                });
            } catch (e) {
                // Ignore selector errors
            }
        });
    }
    
    // Run immediately if possible, then on DOM ready
    if (document.readyState === 'loading') {
        // Run immediately anyway (might catch some elements)
        applyTruncation();
        
        document.addEventListener('DOMContentLoaded', function() {
            applyTruncation();
            // Run again after delays to catch dynamically loaded content
            setTimeout(applyTruncation, 300);
            setTimeout(applyTruncation, 800);
            setTimeout(applyTruncation, 1500);
            setTimeout(applyTruncation, 2500);
        });
    } else {
        // DOM already loaded
        applyTruncation();
        setTimeout(applyTruncation, 300);
        setTimeout(applyTruncation, 800);
        setTimeout(applyTruncation, 1500);
        setTimeout(applyTruncation, 2500);
    }
    
    // Also run on window load as a final fallback
    window.addEventListener('load', function() {
        setTimeout(applyTruncation, 500);
    });
    
    // Watch for dynamically added content
    const observer = new MutationObserver(function(mutations) {
        let shouldTruncate = false;
        mutations.forEach(function(mutation) {
            if (mutation.addedNodes.length > 0) {
                Array.from(mutation.addedNodes).forEach(function(node) {
                    if (node.nodeType === 1) {
                        // Check if added node or its children contain description elements
                        if (node.classList && (
                            node.classList.contains('course-summary') ||
                            node.classList.contains('section-summary') ||
                            node.classList.contains('lesson-description') ||
                            node.querySelector('.course-summary') ||
                            node.querySelector('.section-summary') ||
                            node.querySelector('.lesson-description')
                        )) {
                            shouldTruncate = true;
                        }
                    }
                });
            }
        });
        
        if (shouldTruncate) {
            setTimeout(applyTruncation, 100);
        }
    });
    
    // Start observing
    if (document.body) {
        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
    } else {
        document.addEventListener('DOMContentLoaded', function() {
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        });
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        
        // Add entrance animations to cards
        const cards = document.querySelectorAll('.elementary-course-card, .elementary-active-card, .elementary-stat-card');
        cards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            
            setTimeout(() => {
                card.style.transition = 'all 0.6s ease';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 100);
        });
        
        // Add special animation for activity cards
        const activityCards = document.querySelectorAll('.elementary-active-card');
        activityCards.forEach((card, index) => {
            const icon = card.querySelector('.activity-icon');
            if (icon) {
                icon.style.transform = 'scale(0)';
                setTimeout(() => {
                    icon.style.transition = 'transform 0.5s ease';
                    icon.style.transform = 'scale(1)';
                }, index * 150 + 500);
            }
        });
        
        // Animate progress bars
        const progressBars = document.querySelectorAll('.progress-fill');
        progressBars.forEach(bar => {
            const width = bar.style.width;
            bar.style.width = '0%';
            setTimeout(() => {
                bar.style.width = width;
            }, 500);
        });
        
        // Add click animations to buttons
        const buttons = document.querySelectorAll('.btn-primary, .btn-secondary, .btn-continue');
        buttons.forEach(button => {
            button.addEventListener('click', function(e) {
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 150);
            });
        });
        
        // Add hover effects to stat cards
        const statCards = document.querySelectorAll('.elementary-stat-card');
        statCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.classList.add('animate-pulse');
            });
            
            card.addEventListener('mouseleave', function() {
                this.classList.remove('animate-pulse');
            });
        });
        
        // Calendar Widget Month Navigation
        window.changeMonth = function(direction) {
            // For now, just show an alert - in a real implementation, 
            // this would make an AJAX call to fetch the new month's data
            const currentMonth = document.querySelector('.calendar-month-title');
            if (currentMonth) {
                alert('Month navigation: ' + (direction > 0 ? 'Next' : 'Previous') + ' month from ' + currentMonth.textContent);
            }
        };
        
        // Enhanced Calendar Event Handling
        document.addEventListener('click', function(e) {
            // Handle event dot clicks
            if (e.target.closest('.day-event')) {
                const eventElement = e.target.closest('.day-event');
                const eventUrl = eventElement.getAttribute('data-event-url');
                const eventTitle = eventElement.getAttribute('data-tooltip');
                
                if (eventUrl && eventUrl !== '#') {
                    // Navigate to the event URL
                    window.location.href = eventUrl;
                } else {
                    // Show event details in a modal or alert
                    alert('Event: ' + eventTitle);
                }
            }
            
            // Handle day clicks for days with events
            if (e.target.closest('.calendar-day')) {
                const dayElement = e.target.closest('.calendar-day');
                const events = dayElement.querySelectorAll('.day-event');
                
                if (events.length > 0) {
                    // Add visual feedback for day selection
                    document.querySelectorAll('.calendar-day').forEach(day => {
                        day.classList.remove('selected');
                    });
                    dayElement.classList.add('selected');
                    
                    // Show events for this day in upcoming events section
                    showDayEvents(dayElement, events);
                }
            }
        });
        
        // Function to show events for a selected day
        function showDayEvents(dayElement, events) {
            const upcomingEventsContainer = document.querySelector('.upcoming-events');
            if (!upcomingEventsContainer) return;
            
            const dayNumber = dayElement.querySelector('.day-number');
            if (!dayNumber) return;
            
            const dayDate = dayElement.getAttribute('data-date');
            
            let eventsHtml = `
                <h5 class="upcoming-title">Events for Day ${dayNumber.textContent}</h5>
                <div class="upcoming-list">
            `;
            
            events.forEach(event => {
                const eventTitle = event.getAttribute('data-tooltip');
                const eventUrl = event.getAttribute('data-event-url');
                const eventType = event.classList.contains('assignment') ? 'Assignment' : 
                                event.classList.contains('quiz') ? 'Quiz' :
                                event.classList.contains('lesson') ? 'Lesson' : 'Event';
                
                eventsHtml += `
                    <div class="upcoming-item" onclick="window.location.href='${eventUrl}'">
                        <div class="event-date">${eventType}</div>
                        <div class="event-title">${eventTitle}</div>
                    </div>
                `;
            });
            
            eventsHtml += '</div>';
            upcomingEventsContainer.innerHTML = eventsHtml;
        }
        
        // Course Details Toggle Function
        window.toggleCourseDetails = function(courseId) {
            const detailsPanel = document.getElementById('details-' + courseId);
            const toggleButton = document.querySelector(`[onclick*="toggleCourseDetails(${courseId})"]`);
            
            if (!detailsPanel) {
                console.log('Course details panel not found for ID:', courseId);
                return;
            }
            
            const isVisible = detailsPanel.style.display !== 'none';
            
            if (isVisible) {
                // Hide the panel
                detailsPanel.style.display = 'none';
                if (toggleButton) {
                    toggleButton.innerHTML = '<i class="fa fa-info-circle"></i>';
                    toggleButton.title = 'View Course Details';
                }
                console.log('Course details hidden for course:', courseId);
            } else {
                // Show the panel
                detailsPanel.style.display = 'block';
                if (toggleButton) {
                    toggleButton.innerHTML = '<i class="fa fa-times"></i>';
                    toggleButton.title = 'Hide Course Details';
                }
                console.log('Course details shown for course:', courseId);
            }
        };
        
        // ============================================
        // School Calendar Functionality
        // ============================================
        
        let currentCalendarDate = new Date();
        let currentCalendarView = 'week'; // week, month, list
        let calendarEvents = []; // Will be populated from backend
        
        // Helper function to get date string in YYYY-MM-DD format (LOCAL TIME, not UTC)
        function getLocalDateString(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // Fetch calendar events from backend
        function fetchCalendarEvents() {
            {{#elementary_calendar_events}}
            try {
                const rawEvents = {{{elementary_calendar_events}}};
                calendarEvents = Array.isArray(rawEvents) ? rawEvents : [];
                console.log('ðŸ“… Calendar events loaded:', calendarEvents.length, 'events');
                if (calendarEvents.length > 0) {
                    console.log('ðŸ“… First event:', calendarEvents[0]);
                    console.log('ðŸ“… Event dates:', calendarEvents.map(e => `${e.title}: ${e.date} (type: ${e.type})`));
                    
                    // Log admin events specifically
                    const adminEvents = calendarEvents.filter(e => e.admin_event);
                    console.log('ðŸ« Admin events:', adminEvents.length, adminEvents);
                } else {
                    console.warn('âš ï¸ No calendar events in array');
                }
            } catch (e) {
                console.error('âŒ Error parsing calendar events:', e);
                console.error('âŒ Raw data:', {{{elementary_calendar_events}}});
                calendarEvents = [];
            }
            {{/elementary_calendar_events}}
            {{^elementary_calendar_events}}
            calendarEvents = [];
            console.warn('âš ï¸ No calendar events found in template context');
            {{/elementary_calendar_events}}
            
            renderCalendar();
            renderUpcomingEvents();
        }
        
        // Switch between Week, Month, and List views
        window.switchCalendarView = function(view) {
            currentCalendarView = view;
            
            // Update toggle buttons
            document.querySelectorAll('.view-toggle-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.view === view);
            });
            
            // Show/hide appropriate view
            document.getElementById('calendarWeekView').style.display = view === 'week' ? 'block' : 'none';
            document.getElementById('calendarMonthView').style.display = view === 'month' ? 'block' : 'none';
            document.getElementById('calendarListView').style.display = view === 'list' ? 'block' : 'none';
            
            renderCalendar();
        };
        
        // Navigate calendar period (week or month)
        window.changeCalendarPeriod = function(direction) {
            if (currentCalendarView === 'week') {
                currentCalendarDate.setDate(currentCalendarDate.getDate() + (direction * 7));
            } else {
                currentCalendarDate.setMonth(currentCalendarDate.getMonth() + direction);
            }
            renderCalendar();
        };
        
        // Go to today
        window.goToToday = function() {
            currentCalendarDate = new Date();
            renderCalendar();
        };
        
        // Main render function - delegates to specific view renderers
        function renderCalendar() {
            updatePeriodDisplay();
            
            if (currentCalendarView === 'week') {
                renderWeekView();
            } else if (currentCalendarView === 'month') {
                renderMonthView();
            } else {
                renderListView();
            }
        }
        
        // Update period display based on current view
        function updatePeriodDisplay() {
            const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                              'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const displayEl = document.getElementById('calendarPeriodDisplay');
            
            if (currentCalendarView === 'week') {
                // Calculate week start (Monday) and end (Sunday)
                const curr = new Date(currentCalendarDate);
                const firstDay = curr.getDate() - curr.getDay() + 1; // Monday
                const weekStart = new Date(curr.setDate(firstDay));
                const weekEnd = new Date(weekStart);
                weekEnd.setDate(weekStart.getDate() + 6);
                
                const startStr = monthNames[weekStart.getMonth()] + ' ' + weekStart.getDate();
                const endStr = monthNames[weekEnd.getMonth()] + ' ' + weekEnd.getDate() + ', ' + weekEnd.getFullYear();
                displayEl.textContent = startStr + ' - ' + endStr;
            } else {
                const fullMonthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                                      'July', 'August', 'September', 'October', 'November', 'December'];
                displayEl.textContent = fullMonthNames[currentCalendarDate.getMonth()] + ' ' + currentCalendarDate.getFullYear();
            }
        }
        
        // Render Week View
        function renderWeekView() {
            const weekGrid = document.getElementById('weekGrid');
            weekGrid.innerHTML = '';
            
            // Calculate week start (Monday) and end (Sunday)
            const curr = new Date(currentCalendarDate);
            const firstDay = curr.getDate() - curr.getDay() + 1; // Monday
            const weekStart = new Date(curr.setDate(firstDay));
            
            const dayNames = ['MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN'];
            const today = new Date();
            
            for (let i = 0; i < 7; i++) {
                const dayDate = new Date(weekStart);
                dayDate.setDate(weekStart.getDate() + i);
                
                const dayColumn = document.createElement('div');
                dayColumn.className = 'week-day-column';
                
                // Day header
                const isToday = dayDate.toDateString() === today.toDateString();
                const header = document.createElement('div');
                header.className = 'week-day-header' + (isToday ? ' today' : '');
                header.innerHTML = `
                    <div class="week-day-name">${dayNames[i]}</div>
                    <div class="week-day-date">${dayDate.getDate()}</div>
                `;
                dayColumn.appendChild(header);
                
                // Events container
                const eventsContainer = document.createElement('div');
                eventsContainer.className = 'week-day-events';
                
                // Find events for this day - USE LOCAL DATE STRING
                const dayDateStr = getLocalDateString(dayDate);
                console.log(`Week View - Day ${dayNames[i]}: ${dayDateStr}`);
                const dayEvents = calendarEvents.filter(event => {
                    console.log(`  Checking event: ${event.title} (${event.date}) === ${dayDateStr}? ${event.date === dayDateStr}`);
                    return event.date === dayDateStr;
                });
                console.log(`  Found ${dayEvents.length} events for ${dayDateStr}`);
                
                dayEvents.forEach(event => {
                    const eventCard = document.createElement('div');
                    eventCard.className = `week-event-card ${event.type}`;
                    
                    // Determine badge text based on event type
                    let badgeText = 'COURSE EVENT';
                    if (event.type === 'assignment') {
                        badgeText = 'ASSIGNMENT DUE';
                    } else if (event.type === 'quiz') {
                        badgeText = 'QUIZ DUE';
                    } else if (event.type === 'lesson') {
                        badgeText = 'LESSON RELEASE';
                    } else if (event.type === 'meeting') {
                        badgeText = 'MEETING';
                    } else if (event.type === 'lecture') {
                        badgeText = 'LECTURE';
                    } else if (event.type === 'exam') {
                        badgeText = 'EXAM';
                    } else if (event.type === 'activity') {
                        badgeText = 'ACTIVITY';
                    } else if (event.type === 'school event') {
                        badgeText = 'SCHOOL EVENT';
                    }
                    
                    eventCard.innerHTML = `
                        <div class="week-event-time">${event.time || ''}</div>
                        <div class="week-event-title">${event.title || 'Untitled Event'}</div>
                        <div class="week-event-badge ${event.type}">
                            ${badgeText}
                        </div>
                    `;
                    
                    // Check if it's an admin event (school event)
                    const isAdminEvent = event.admin_event || event.type === 'school event' || (event.title && event.title.includes('ðŸ«'));
                    
                    if (isAdminEvent) {
                        // For admin events, show modal instead of navigating
                        eventCard.style.cursor = 'pointer';
                        eventCard.onclick = (e) => {
                            e.preventDefault();
                            e.stopPropagation();
                            showSchoolEventModal(event);
                        };
                        eventCard.title = 'Click to view event details';
                    } else if (event.url) {
                        console.log(`ðŸ”— Event "${event.title}" is clickable â†’ ${event.url}`);
                        eventCard.onclick = () => {
                            console.log(`âœ… Navigating to: ${event.url}`);
                            window.location.href = event.url;
                        };
                        eventCard.title = 'Click to open ' + event.title;
                    } else {
                        console.warn(`âš ï¸ Event "${event.title}" has no URL`);
                    }
                    
                    eventsContainer.appendChild(eventCard);
                });
                
                dayColumn.appendChild(eventsContainer);
                weekGrid.appendChild(dayColumn);
            }
        }
        
        // Render Month View
        function renderMonthView() {
            const year = currentCalendarDate.getFullYear();
            const month = currentCalendarDate.getMonth();
            
            const monthGrid = document.getElementById('monthGrid');
            monthGrid.innerHTML = '';
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startDayOfWeek = firstDay.getDay(); // 0 = Sunday
            
            // Add day headers
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayNames.forEach(day => {
                const header = document.createElement('div');
                header.className = 'month-day-header';
                header.textContent = day;
                monthGrid.appendChild(header);
            });
            
            // Add empty cells for days before month starts
            for (let i = 0; i < startDayOfWeek; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.className = 'month-day-cell other-month';
                monthGrid.appendChild(emptyCell);
            }
            
            // Add days of the month
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const cell = document.createElement('div');
                cell.className = 'month-day-cell';
                
                // Check if this is today
                if (year === today.getFullYear() && 
                    month === today.getMonth() && 
                    day === today.getDate()) {
                    cell.classList.add('today');
                }
                
                // Add day number
                const dayNumber = document.createElement('div');
                dayNumber.className = 'month-day-number';
                dayNumber.textContent = day;
                cell.appendChild(dayNumber);
                
                // Check for events on this day - USE LOCAL DATE STRING
                const dayDate = new Date(year, month, day);
                const dayDateStr = getLocalDateString(dayDate);
                
                console.log(`Month View - Day ${day}: ${dayDateStr}`);
                const dayEvents = calendarEvents.filter(event => {
                    console.log(`  Event: ${event.title} (${event.date}) === ${dayDateStr}? ${event.date === dayDateStr}`);
                    return event.date === dayDateStr;
                });
                console.log(`  Found ${dayEvents.length} events`);
                
                if (dayEvents.length > 0) {
                    const eventsContainer = document.createElement('div');
                    eventsContainer.className = 'month-day-events';
                    
                    // Show up to 4 event dots
                    dayEvents.slice(0, 4).forEach(event => {
                        const dot = document.createElement('span');
                        dot.className = `calendar-event-dot ${event.type}`;
                        dot.title = event.title;
                        
                        // Use event color if available (for admin events with custom colors)
                        if (event.color) {
                            const colorMap = {
                                'red': '#ef4444',
                                'green': '#10b981',
                                'blue': '#3b82f6',
                                'yellow': '#fbbf24',
                                'orange': '#f59e0b',
                                'purple': '#8b5cf6'
                            };
                            const colorValue = colorMap[event.color.toLowerCase()] || event.color;
                            dot.style.background = colorValue;
                        }
                        
                        eventsContainer.appendChild(dot);
                    });
                    
                    cell.appendChild(eventsContainer);
                    
                    // Add click handler to show events
                    cell.onclick = () => showDayEvents(dayDate, dayEvents);
                }
                
                monthGrid.appendChild(cell);
            }
        }
        
        // Render List View
        function renderListView() {
            const listContainer = document.getElementById('listContainer');
            listContainer.innerHTML = '';
            
            // Group events by date
            const eventsByDate = {};
            calendarEvents.forEach(event => {
                if (!eventsByDate[event.date]) {
                    eventsByDate[event.date] = [];
                }
                eventsByDate[event.date].push(event);
            });
            
            // Sort dates
            const sortedDates = Object.keys(eventsByDate).sort();
            
            if (sortedDates.length === 0) {
                listContainer.innerHTML = '<div style="text-align: center; padding: 40px; color: #6c757d;"><i class="fa fa-calendar-o" style="font-size: 3rem; margin-bottom: 15px; display: block;"></i><h4>No events scheduled</h4></div>';
                return;
            }
            
            sortedDates.forEach(dateStr => {
                const date = new Date(dateStr);
                const dateGroup = document.createElement('div');
                dateGroup.className = 'list-date-group';
                
                // Date header
                const dateHeader = document.createElement('div');
                dateHeader.className = 'list-date-header';
                dateHeader.textContent = date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                dateGroup.appendChild(dateHeader);
                
                // Events list
                const eventsList = document.createElement('div');
                eventsList.className = 'list-events';
                
                eventsByDate[dateStr].forEach(event => {
                    const eventItem = document.createElement('div');
                    eventItem.className = `list-event-item ${event.type}`;
                    
                    // Determine badge text based on event type
                    let badgeText = 'COURSE';
                    if (event.type === 'assignment') {
                        badgeText = 'ASSIGNMENT';
                    } else if (event.type === 'quiz') {
                        badgeText = 'QUIZ';
                    } else if (event.type === 'lesson') {
                        badgeText = 'LESSON';
                    } else if (event.type === 'meeting') {
                        badgeText = 'MEETING';
                    } else if (event.type === 'lecture') {
                        badgeText = 'LECTURE';
                    } else if (event.type === 'exam') {
                        badgeText = 'EXAM';
                    } else if (event.type === 'activity') {
                        badgeText = 'ACTIVITY';
                    } else if (event.type === 'school event') {
                        badgeText = 'SCHOOL EVENT';
                    }
                    
                    eventItem.innerHTML = `
                        <div class="list-event-info">
                            <div class="list-event-title">${event.title || 'Untitled Event'}</div>
                            <div class="list-event-meta">
                                <span><i class="fa fa-book"></i>${event.course || 'General'}</span>
                                <span><i class="fa fa-clock-o"></i>${event.time || ''}</span>
                            </div>
                        </div>
                        <div class="list-event-badge ${event.type}">
                            ${badgeText}
                        </div>
                    `;
                    
                    // Check if it's an admin event (school event)
                    const isAdminEvent = event.admin_event || event.type === 'school event' || (event.title && event.title.includes('ðŸ«'));
                    
                    if (isAdminEvent) {
                        // For admin events, show modal instead of navigating
                        eventItem.style.cursor = 'pointer';
                        eventItem.onclick = (e) => {
                            e.preventDefault();
                            e.stopPropagation();
                            showSchoolEventModal(event);
                        };
                        eventItem.title = 'Click to view event details';
                    } else if (event.url) {
                        console.log(`ðŸ”— List Event "${event.title}" â†’ ${event.url}`);
                        eventItem.onclick = () => {
                            console.log(`âœ… Navigating to: ${event.url}`);
                            window.location.href = event.url;
                        };
                        eventItem.title = 'Click to open ' + event.title;
                    } else {
                        console.warn(`âš ï¸ List Event "${event.title}" has no URL`);
                    }
                    
                    eventsList.appendChild(eventItem);
                });
                
                dateGroup.appendChild(eventsList);
                listContainer.appendChild(dateGroup);
            });
        }
        
        // Render upcoming events list
        function renderUpcomingEvents() {
            // Get all upcoming event list containers
            const upcomingLists = [
                document.getElementById('upcomingEventsList'),           // Courses sidebar (elementary with courses)
                document.getElementById('upcomingEventsList2'),          // MAP only sidebar
                document.getElementById('upcomingEventsList3'),          // High school sidebar
                document.getElementById('upcomingEventsCalendarList')   // Calendar widget sidebar
            ];
            
            // Filter events that are upcoming (from today onwards)
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const upcomingEvents = calendarEvents
                .filter(event => new Date(event.date) >= today)
                .sort((a, b) => new Date(a.date) - new Date(b.date))
                .slice(0, 10); // Show next 10 events
            
            // Populate all lists
            upcomingLists.forEach((upcomingList, index) => {
                if (!upcomingList) {
                    console.warn(`âš ï¸ Upcoming events list #${index} not found in DOM`);
                    return;
                }
                
                console.log(`âœ… Populating upcoming events list #${index} (ID: ${upcomingList.id}) with ${upcomingEvents.length} events`);
                upcomingList.innerHTML = '';
                
                if (upcomingEvents.length === 0) {
                    upcomingList.innerHTML = '<div class="no-events-compact"><i class="fa fa-calendar-o"></i><p>No upcoming events</p></div>';
                    return;
                }
                
                upcomingEvents.forEach(event => {
                    const eventEl = document.createElement('div');
                    eventEl.className = `event-item ${event.type}`;
                    eventEl.style.position = 'relative'; // For color indicator positioning
                    
                    const eventDate = new Date(event.date);
                    const dateStr = eventDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                    
                    // Add color indicator if available (for admin events)
                    let colorIndicator = '';
                    let colorValue = '';
                    if (event.color) {
                        const colorMap = {
                            'red': '#ef4444',
                            'green': '#10b981',
                            'blue': '#3b82f6',
                            'yellow': '#fbbf24',
                            'orange': '#f59e0b',
                            'purple': '#8b5cf6'
                        };
                        colorValue = colorMap[event.color.toLowerCase()] || event.color;
                        colorIndicator = `<span class="event-color-indicator" style="background: ${colorValue}; width: 4px; height: 100%; position: absolute; left: 0; top: 0; border-radius: 4px 0 0 4px;"></span>`;
                    }
                    
                    eventEl.innerHTML = `
                        ${colorIndicator}
                        <div class="event-item-header">
                            <div class="event-item-title">${event.title}</div>
                            <div class="event-item-date">${dateStr}</div>
                        </div>
                        <div class="event-item-meta">
                            <span><i class="fa fa-book"></i>${event.course}</span>
                            ${event.time ? `<span><i class="fa fa-clock-o"></i>${event.time}</span>` : ''}
                            ${event.color && colorValue ? `<span class="event-color-badge" style="background: ${colorValue}; color: white; padding: 2px 6px; border-radius: 3px; font-size: 0.7rem; text-transform: capitalize; margin-left: 8px;">${event.color}</span>` : ''}
                        </div>
                    `;
                    
                    // Check if it's an admin event (school event)
                    const isAdminEvent = event.admin_event || event.type === 'school event' || (event.title && event.title.includes('ðŸ«'));
                    
                    if (isAdminEvent) {
                        // For admin events, show modal instead of navigating
                        eventEl.style.cursor = 'pointer';
                        eventEl.onclick = (e) => {
                            e.preventDefault();
                            e.stopPropagation();
                            showSchoolEventModal(event);
                        };
                        eventEl.title = 'Click to view event details';
                    } else if (event.url) {
                        eventEl.style.cursor = 'pointer';
                        console.log(`ðŸ”— Upcoming Event "${event.title}" â†’ ${event.url}`);
                        eventEl.onclick = () => {
                            console.log(`âœ… Navigating to: ${event.url}`);
                            window.location.href = event.url;
                        };
                        eventEl.title = 'Click to open ' + event.title;
                    } else {
                        console.warn(`âš ï¸ Upcoming Event "${event.title}" has no URL`);
                    }
                    
                    upcomingList.appendChild(eventEl);
                });
            });
        }
        
        // Show events for a specific day (used in month view)
        function showDayEvents(date, events) {
            if (events.length === 1) {
                // If only one event, navigate directly to it
                if (events[0].url) {
                    window.location.href = events[0].url;
                }
                return;
            }
            
            // If multiple events, show a modal or list
            const dateStr = date.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            let eventsHtml = `<div style="padding: 20px; background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); max-width: 500px; margin: 20px auto;">`;
            eventsHtml += `<h3 style="color: #6366f1; margin-bottom: 15px;">${dateStr}</h3>`;
            eventsHtml += `<div style="display: flex; flex-direction: column; gap: 10px;">`;
            
            events.forEach(event => {
                const borderColor = event.type === 'assignment' ? '#3b82f6' : 
                                   event.type === 'quiz' ? '#10b981' : 
                                   event.type === 'lesson' ? '#ec4899' : '#f59e0b';
                                   
                eventsHtml += `<div onclick="window.location.href='${event.url}'" style="padding: 12px; border-left: 4px solid ${borderColor}; background: #fafafa; border-radius: 6px; cursor: pointer; transition: all 0.2s;">`;
                eventsHtml += `<strong>${event.title}</strong><br>`;
                eventsHtml += `<small style="color: #6b7280;">${event.course} â€¢ ${event.time}</small>`;
                eventsHtml += `</div>`;
            });
            
            eventsHtml += `</div></div>`;
            
            // Create and show modal
            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center; cursor: pointer;';
            modal.innerHTML = eventsHtml;
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            document.body.appendChild(modal);
        }
        
        // Initialize calendar
        fetchCalendarEvents();
    });
    </script>
    
    
    {{#middle}}
        
        <div class="middle-dashboard" style="margin-left: 280px">

            <!-- Top Statistics Bar -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="middle-stats-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <!-- Active Courses Card with Progress - Light Radial Colors -->
                        <div class="middle-stat-card" id="middle-courses-card" style="background: radial-gradient(circle at top right, #e0e7ff 0%, #c7d2fe 50%, #a5b4fc 100%); color: #4c1d95; border-radius: 20px; padding: 28px; position: relative; overflow: hidden; box-shadow: 0 8px 24px rgba(139, 92, 246, 0.15); border: 2px solid #c7d2fe;">
                            <div class="stat-content" style="position: relative; z-index: 2;">
                                <div class="stat-title" style="font-size: 15px; font-weight: 700; color: #6366f1; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">ðŸ“š Active Courses</div>
                                <div class="stat-number" id="middle-total-courses-count" style="font-size: 2.5rem; font-weight: 800; margin-bottom: 6px; color: #4c1d95;">{{middle_stats.total_courses}}</div>
                                <div class="stat-subtext" style="font-size: 14px; color: #6366f1; margin-bottom: 16px; font-weight: 600;">2 in progress âœ¨</div>
                                <!-- Circular Progress Bar -->
                                <div style="width: 70px; height: 70px; position: relative; margin-top: 8px;">
                                    <svg width="70" height="70" style="transform: rotate(-90deg);">
                                        <circle cx="35" cy="35" r="28" stroke="#c7d2fe" stroke-width="5" fill="none"></circle>
                                        <circle cx="35" cy="35" r="28" stroke="#6366f1" stroke-width="5" fill="none" stroke-dasharray="175" stroke-dashoffset="122" style="transition: stroke-dashoffset 0.5s;"></circle>
                                    </svg>
                                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 16px; font-weight: 800; color: #6366f1;">30%</div>
                                </div>
                            </div>
                            <div class="stat-icon-container" style="position: absolute; top: 24px; right: 24px; width: 60px; height: 60px; background: rgba(255,255,255,0.8); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 28px; color: #6366f1; border: 2px solid #c7d2fe; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.15);">
                                <i class="fa fa-book"></i>
                            </div>
                        </div>
                        
                        <!-- Lessons Completed Card -->
                        <div class="middle-stat-card" style="background: #f3f4f6; border-radius: 12px; padding: 25px; position: relative;">
                            <div class="stat-content">
                                <div class="stat-title" style="font-size: 14px; font-weight: 500; color: #6b7280; margin-bottom: 8px;">Lessons Completed</div>
                                <div class="stat-number" style="font-size: 2rem; font-weight: 700; color: #111827; margin-bottom: 4px;">{{middle_stats.lessons_completed}}</div>
                                <div class="stat-subtext" style="font-size: 13px; color: #6b7280; margin-bottom: 12px;">This month</div>
                                <div style="font-size: 12px; color: #9ca3af; margin-top: 8px;">Start your first lesson to build momentum.</div>
                            </div>
                            <div class="stat-icon-container" style="position: absolute; top: 20px; right: 20px; width: 50px; height: 50px; background: #e5e7eb; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; color: #6b7280;">
                                <i class="fa fa-check-circle"></i>
                            </div>
                        </div>
                        
                        <!-- Study Time Card with Progress Bar -->
                        <div class="middle-stat-card" style="background: #d1fae5; border-radius: 12px; padding: 25px; position: relative;">
                            <div class="stat-content">
                                <div class="stat-title" style="font-size: 14px; font-weight: 500; color: #065f46; margin-bottom: 8px;">Study Time</div>
                                <div class="stat-number" style="font-size: 2rem; font-weight: 700; color: #065f46; margin-bottom: 4px;">24h</div>
                                <div class="stat-subtext" style="font-size: 13px; color: #047857; margin-bottom: 12px;">This week</div>
                                <!-- Horizontal Progress Bar -->
                                <div style="width: 100%; height: 8px; background: rgba(16, 185, 129, 0.2); border-radius: 4px; margin-top: 8px; overflow: hidden;">
                                    <div style="width: 65%; height: 100%; background: #10b981; border-radius: 4px; transition: width 0.5s;"></div>
                                </div>
                                <div style="font-size: 12px; color: #047857; margin-top: 8px; font-weight: 500;">+4h vs last week <span style="color: #10b981;">â†‘</span></div>
                            </div>
                            <div class="stat-icon-container" style="position: absolute; top: 20px; right: 20px; width: 50px; height: 50px; background: rgba(16, 185, 129, 0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; color: #10b981;">
                                <i class="fa fa-clock-o"></i>
                            </div>
                        </div>
                        
                        <!-- Achievements Card -->
                        <div class="middle-stat-card" style="background: #fef3c7; border-radius: 12px; padding: 25px; position: relative;">
                            <div class="stat-content">
                                <div class="stat-title" style="font-size: 14px; font-weight: 500; color: #92400e; margin-bottom: 8px;">Achievements</div>
                                <div class="stat-number" style="font-size: 2rem; font-weight: 700; color: #92400e; margin-bottom: 4px;">12</div>
                                <div class="stat-subtext" style="font-size: 13px; color: #a16207; margin-bottom: 12px;">Total earned</div>
                                <!-- Achievement Icons -->
                                <div style="display: flex; gap: 8px; margin-top: 8px;">
                                    <i class="fa fa-star" style="color: #f59e0b; font-size: 18px;"></i>
                                    <i class="fa fa-trophy" style="color: #f59e0b; font-size: 18px;"></i>
                                    <i class="fa fa-certificate" style="color: #ef4444; font-size: 18px;"></i>
                                </div>
                                <div style="margin-top: 12px;">
                                    <a href="{{{achievementsurl}}}" style="font-size: 12px; color: #a16207; text-decoration: none; font-weight: 500;">View all <i class="fa fa-chevron-right" style="font-size: 10px;"></i></a>
                                </div>
                            </div>
                            <div class="stat-icon-container" style="position: absolute; top: 20px; right: 20px; width: 50px; height: 50px; background: rgba(245, 158, 11, 0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; color: #f59e0b;">
                                <i class="fa fa-trophy"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- AI Learning Assistant CTA Card -->
            {{#show_aiassistant}}
            <div class="row mb-4">
                <div class="col-12">
                    <div class="ai-assistant-promo-card">
                        <div class="ai-assistant-promo-content">
                            <div class="ai-assistant-promo-badge">
                                <span class="ai-badge">AI</span>
                            </div>
                            <div class="ai-assistant-promo-text">
                                <h2 class="ai-assistant-promo-title">
                                    <i class="fa fa-robot"></i> AI Learning Assistant
                                </h2>
                                <p class="ai-assistant-promo-description">
                                    Get instant help with your lessons, assignments, and questions. Ask anything and learn faster with AI-powered assistance.
                                </p>
                            </div>
                            <div class="ai-assistant-promo-actions">
                                <button type="button" class="ai-assistant-cta-button" id="ai-assistant-open-dashboard">
                                    <span>Open AI Assistant</span>
                                    <i class="fa fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        <div class="ai-assistant-promo-decoration">
                            <div class="ai-promo-circle ai-promo-circle-1"></div>
                            <div class="ai-promo-circle ai-promo-circle-2"></div>
                            <div class="ai-promo-circle ai-promo-circle-3"></div>
                        </div>
                    </div>
                </div>
            </div>
            {{/show_aiassistant}}
            
    <!-- Main Content Area -->
            <div class="row">
                <!-- Left Content Area -->
                <div class="col-lg-9">
                    <!-- Current Courses Section -->
                    {{#has_middle_courses}}
                    <div class="middle-courses-section">
                        <!-- Styled My Courses Header - Kid Friendly with Light Radial Colors -->
                        <div class="styled-section-header my-courses-header" style="background: radial-gradient(circle at top left, #e0e7ff 0%, #ddd6fe 30%, #c7d2fe 60%, #a5b4fc 100%); border: 2px solid #c7d2fe; box-shadow: 0 8px 24px rgba(139, 92, 246, 0.15);">
                            <div class="header-icon" style="background: rgba(255, 255, 255, 0.8); border: 2px solid #c7d2fe; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.2);">
                                <i class="fa fa-book" style="color: #6366f1;"></i>
                            </div>
                            <div class="header-content">
                                <h3 class="header-title" style="color: #4c1d95; font-size: 2rem; text-shadow: 0 1px 2px rgba(255,255,255,0.5);">ðŸ“š My Courses</h3>
                                <p class="header-subtitle" style="color: #6366f1; font-size: 1.1rem; font-weight: 600;">Explore your courses and see your amazing progress! ðŸŽ‰</p>
                            </div>
                        </div>
                        <div class="courses-static-grid">
                            {{#middle_courses}}
                            <div class="enhanced-course-card" data-course-id="{{id}}">
                                <!-- Course Header with Image -->
                                <div class="course-image-container">
                                    {{#courseimage}}
                                    <img src="{{courseimage}}" alt="{{fullname}}" class="course-image">
                                    {{/courseimage}}
                                    {{^courseimage}}
                                    <div class="course-image-placeholder">
                                        <i class="fa fa-book"></i>
                                    </div>
                                    {{/courseimage}}
                                    
                                    <!-- Category Badge (Top Left) -->
                                    <div class="course-category-badge">{{categoryname}}</div>
                                    
                                    <!-- Options Icon (Top Right) -->
                                    <div class="course-options-icon">
                                        <i class="fa fa-ellipsis-v"></i>
                                    </div>
                                </div>
                                
                                <!-- Course Content -->
                                <div class="course-content">
                                    <!-- Course Title - Bigger and Colorful -->
                                    <h4 class="course-title" style="font-size: 1.5rem; color: #1e1b4b; margin-bottom: 12px; font-weight: 800; line-height: 1.3;">{{fullname}}</h4>
                                    
                                    <!-- Course Summary -->
                                    <p class="course-summary" style="color: #64748b; font-size: 0.95rem; line-height: 1.6; margin-bottom: 16px; min-height: 40px;">{{#summary}}{{summary}}{{/summary}}{{^summary}}Ready to learn something amazing!{{/summary}}</p>
                                    
                                    <!-- Progress Section - Light Radial Colors -->
                                    <div class="course-progress-section" style="background: radial-gradient(circle at top left, #f8fafc 0%, #f1f5f9 100%); padding: 16px; border-radius: 12px; margin-bottom: 16px; border: 2px solid #e0e7ff;">
                                        <div class="progress-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                            <span class="progress-label" style="font-weight: 700; color: #6366f1; font-size: 14px;">ðŸŽ¯ Your Progress</span>
                                            <span class="progress-percentage" style="font-weight: 800; color: #6366f1; font-size: 18px;">{{progress_percentage}}%</span>
                                        </div>
                                        <div class="progress-bar-container" style="background: #e0e7ff; height: 16px; border-radius: 20px; overflow: hidden; position: relative;">
                                            <div class="progress-fill" style="width: {{progress_percentage}}%; height: 100%; background: radial-gradient(circle at left, #c7d2fe 0%, #a5b4fc 50%, #818cf8 100%); border-radius: 20px; box-shadow: 0 2px 8px rgba(139, 92, 246, 0.25); transition: width 0.6s ease;"></div>
                                        </div>
                                    </div>
                                    
                                    <!-- Course Statistics Grid - Light Radial Colors -->
                                    <div class="course-stats-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 16px;">
                                        <div class="stat-box" style="background: radial-gradient(circle at center, #ede9fe 0%, #ddd6fe 50%, #c7d2fe 100%); padding: 12px; border-radius: 12px; border: 2px solid #c7d2fe; display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 40px; height: 40px; background: radial-gradient(circle at center, #c7d2fe 0%, #a5b4fc 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #6366f1; font-size: 18px; flex-shrink: 0; border: 2px solid #a5b4fc;">
                                                <i class="fa fa-book"></i>
                                            </div>
                                            <div class="stat-content">
                                                <div class="stat-number" style="font-size: 18px; font-weight: 800; color: #6366f1; line-height: 1.2;">{{completed_sections}}/{{total_sections}}</div>
                                                <div class="stat-label" style="font-size: 11px; color: #6366f1; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">ðŸ“– Lessons</div>
                                            </div>
                                        </div>
                                        
                                        <div class="stat-box" style="background: radial-gradient(circle at center, #fef3c7 0%, #fde68a 50%, #fcd34d 100%); padding: 12px; border-radius: 12px; border: 2px solid #fcd34d; display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 40px; height: 40px; background: radial-gradient(circle at center, #fde68a 0%, #fcd34d 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #d97706; font-size: 18px; flex-shrink: 0; border: 2px solid #fbbf24;">
                                                <i class="fa fa-tasks"></i>
                                            </div>
                                            <div class="stat-content">
                                                <div class="stat-number" style="font-size: 18px; font-weight: 800; color: #d97706; line-height: 1.2;">{{completed_activities}}/{{total_activities}}</div>
                                                <div class="stat-label" style="font-size: 11px; color: #d97706; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">âœ… Activities</div>
                                            </div>
                                        </div>
                                        
                                        <div class="stat-box" style="background: radial-gradient(circle at center, #dbeafe 0%, #bfdbfe 50%, #93c5fd 100%); padding: 12px; border-radius: 12px; border: 2px solid #93c5fd; display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 40px; height: 40px; background: radial-gradient(circle at center, #bfdbfe 0%, #93c5fd 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #2563eb; font-size: 18px; flex-shrink: 0; border: 2px solid #60a5fa;">
                                                <i class="fa fa-clock-o"></i>
                                            </div>
                                            <div class="stat-content">
                                                <div class="stat-number" style="font-size: 18px; font-weight: 800; color: #2563eb; line-height: 1.2;">{{estimated_time}}</div>
                                                <div class="stat-label" style="font-size: 11px; color: #2563eb; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">â±ï¸ Minutes</div>
                                            </div>
                                        </div>
                                        
                                        <div class="stat-box" style="background: radial-gradient(circle at center, #fce7f3 0%, #fbcfe8 50%, #f9a8d4 100%); padding: 12px; border-radius: 12px; border: 2px solid #f9a8d4; display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 40px; height: 40px; background: radial-gradient(circle at center, #fbcfe8 0%, #f9a8d4 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #db2777; font-size: 18px; flex-shrink: 0; border: 2px solid #f472b6;">
                                                <i class="fa fa-star"></i>
                                            </div>
                                            <div class="stat-content">
                                                <div class="stat-number" style="font-size: 18px; font-weight: 800; color: #db2777; line-height: 1.2;">{{points_earned}}</div>
                                                <div class="stat-label" style="font-size: 11px; color: #db2777; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">â­ Points</div>
                                            </div>
                                        </div>
                                    </div>
                                                                            
                                    <!-- Course Actions - Light Radial Color Buttons -->
                                    <div class="course-actions" style="margin-top: 16px;">
                                        {{#completed}}
                                        <a href="{{courseurl}}" class="course-button primary" style="background: radial-gradient(circle at center, #e0e7ff 0%, #c7d2fe 50%, #a5b4fc 100%); color: #4c1d95; padding: 16px 24px; font-size: 16px; font-weight: 700; border-radius: 12px; text-decoration: none; display: inline-flex; align-items: center; gap: 10px; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.2); transition: all 0.3s; width: 100%; justify-content: center; border: 2px solid #c7d2fe;">
                                            <i class="fa fa-redo" style="font-size: 18px; color: #6366f1;"></i> <span>ðŸ”„ Review Course</span>
                                        </a>
                                        {{/completed}}
                                        {{^completed}}
                                        {{#in_progress}}
                                        <a href="{{courseurl}}" class="course-button primary" style="background: radial-gradient(circle at center, #d1fae5 0%, #a7f3d0 50%, #6ee7b7 100%); color: #065f46; padding: 16px 24px; font-size: 16px; font-weight: 700; border-radius: 12px; text-decoration: none; display: inline-flex; align-items: center; gap: 10px; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.2); transition: all 0.3s; width: 100%; justify-content: center; border: 2px solid #a7f3d0;">
                                            <i class="fa fa-play-circle" style="font-size: 20px; color: #059669;"></i> <span>â–¶ï¸ Continue Learning</span>
                                        </a>
                                        {{/in_progress}}
                                        {{^in_progress}}
                                        <a href="{{courseurl}}" class="course-button primary" style="background: radial-gradient(circle at center, #dbeafe 0%, #bfdbfe 50%, #93c5fd 100%); color: #1e40af; padding: 16px 24px; font-size: 16px; font-weight: 700; border-radius: 12px; text-decoration: none; display: inline-flex; align-items: center; gap: 10px; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.2); transition: all 0.3s; width: 100%; justify-content: center; border: 2px solid #bfdbfe;">
                                            <i class="fa fa-rocket" style="font-size: 20px; color: #2563eb;"></i> <span>ðŸš€ Start Course</span>
                                        </a>
                                        {{/in_progress}}
                                        {{/completed}}
                                    </div>
                                    
                                    <!-- Course Details Panel (Hidden by default) -->
                                    <div class="course-details-panel" id="details-{{id}}" style="display: none;">
                                        <div class="details-content">
                                            <h6>Course Details</h6>
                                            <div class="detail-item">
                                                <strong>Start Date:</strong> {{start_date}}
                                            </div>
                                            <div class="detail-item">
                                                <strong>Last Accessed:</strong> {{last_accessed}}
                                            </div>
                                            <div class="detail-item">
                                                <strong>Subject:</strong> {{subject}}
                                            </div>
                                            <div class="detail-item">
                                                <strong>Course Code:</strong> {{shortname}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {{/middle_courses}}
                            
                            {{#show_maptest_card}}
                            {{#maptest_card}}
                            <div class="enhanced-course-card maptest-course-card" data-maptest-card="true">
                                <div class="course-image-container maptest-course-image">
                                    <div class="maptest-course-chip">MAP Practice</div>
                                    <div class="maptest-course-hero-text">
                                        <h4 class="maptest-course-title">{{title}}</h4>
                                        <p class="maptest-course-subtitle">Boost confidence before assignments</p>
                                    </div>
                                </div>
                                <div class="course-content maptest-course-content">
                                    <p class="course-summary">{{{description}}}</p>
                                    <div class="course-stats-grid maptest-course-stats-grid">
                                        <div class="stat-box">
                                            <i class="fa fa-compass stat-icon"></i>
                                            <div class="stat-content">
                                                <div class="stat-number">Adaptive</div>
                                                <div class="stat-label">Skill focus</div>
                                            </div>
                                        </div>
                                        <div class="stat-box">
                                            <i class="fa fa-bolt stat-icon"></i>
                                            <div class="stat-content">
                                                <div class="stat-number">Quick</div>
                                                <div class="stat-label">Readiness</div>
                                            </div>
                                        </div>
                                        <div class="stat-box">
                                            <i class="fa fa-tasks stat-icon"></i>
                                            <div class="stat-content">
                                                <div class="stat-number">Reports</div>
                                                <div class="stat-label">Instant view</div>
                                            </div>
                                        </div>
                                        <div class="stat-box">
                                            <i class="fa fa-user-check stat-icon"></i>
                                            <div class="stat-content">
                                                <div class="stat-number">Teachers</div>
                                                <div class="stat-label">Get alerts</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="course-actions">
                                        <a href="#" class="course-button primary maptest-start-btn" data-maptest-url="{{url}}" data-maptest-username="{{username}}" data-maptest-sso="{{#enablesso}}true{{/enablesso}}{{^enablesso}}false{{/enablesso}}" data-maptest-ssourl="{{ssourl}}" data-maptest-baseurl="{{maptesturl}}">
                                            <i class="fa fa-rocket"></i> {{button}}
                                        </a>
                                    </div>
                                </div>
                            </div>
                            {{/maptest_card}}
                            {{/show_maptest_card}}
                        </div>
                        
                        <!-- My Courses Button -->
                        <div class="my-courses-button-container">
                            
                        </div>
                    </div>
                    {{/has_middle_courses}}

                    <!-- Right Sidebar: Nani Cards -->
                    <div class="col-lg-3">
                        <div class="nani-cards-sidebar">
                            <h3 class="nani-section-title">
                                <span><i class="fa fa-star"></i> Nani</span>
                            </h3>
                            <div class="nani-cards-container">
                                <!-- Nani Card 1 -->
                                <div class="nani-card">
                                    <div class="nani-card-header">
                                        <div class="nani-icon">
                                            <i class="fa fa-lightbulb-o"></i>
                                        </div>
                                        <h4 class="nani-card-title">Quick Tips</h4>
                                    </div>
                                    <div class="nani-card-content">
                                        <p>Get helpful study tips and learning strategies!</p>
                                    </div>
                                </div>

                                <!-- Nani Card 2 -->
                                <div class="nani-card">
                                    <div class="nani-card-header">
                                        <div class="nani-icon">
                                            <i class="fa fa-trophy"></i>
                                        </div>
                                        <h4 class="nani-card-title">Achievements</h4>
                                    </div>
                                    <div class="nani-card-content">
                                        <p>Track your progress and celebrate milestones!</p>
                                    </div>
                                </div>

                                <!-- Nani Card 3 -->
                                <div class="nani-card">
                                    <div class="nani-card-header">
                                        <div class="nani-icon">
                                            <i class="fa fa-users"></i>
                                        </div>
                                        <h4 class="nani-card-title">Study Groups</h4>
                                    </div>
                                    <div class="nani-card-content">
                                        <p>Connect with classmates for group study sessions!</p>
                                    </div>
                                </div>

                                <!-- Nani Card 4 -->
                                <div class="nani-card">
                                    <div class="nani-card-header">
                                        <div class="nani-icon">
                                            <i class="fa fa-calendar"></i>
                                        </div>
                                        <h4 class="nani-card-title">Schedule</h4>
                                    </div>
                                    <div class="nani-card-content">
                                        <p>Plan your study time and manage assignments!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Current Lessons Section (Active Sections) -->
                    {{#has_middle_active_sections}}
                    <div class="current-lessons-section">
                        <!-- Professional Current Lessons Header - Light Radial Colors -->
                        <div class="professional-section-header" style="background: radial-gradient(circle at top left, #f5f3ff 0%, #ede9fe 50%, #ddd6fe 100%); padding: 24px; border-radius: 20px; margin-bottom: 24px; border: 2px solid #c7d2fe; box-shadow: 0 8px 20px rgba(139, 92, 246, 0.12);">
                            <div class="header-left" style="display: flex; align-items: center; gap: 16px;">
                                <div class="header-icon-wrapper" style="width: 60px; height: 60px; background: radial-gradient(circle at center, #c7d2fe 0%, #a5b4fc 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.2); border: 2px solid #a5b4fc;">
                                    <i class="fa fa-play-circle" style="color: #6366f1; font-size: 28px;"></i>
                                </div>
                                <div class="header-text">
                                    <h3 class="header-title" style="font-size: 1.8rem; font-weight: 800; color: #4c1d95; margin: 0 0 6px 0;">ðŸŽ¬ Current Lessons</h3>
                                    <p class="header-subtitle" style="font-size: 1rem; color: #6366f1; margin: 0; font-weight: 600;">Keep learning and having fun! ðŸŽ‰</p>
                                </div>
                            </div>
                            <div class="header-right" style="background: radial-gradient(circle at center, #c7d2fe 0%, #a5b4fc 100%); color: #4c1d95; padding: 12px 20px; border-radius: 12px; font-weight: 700; font-size: 16px; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.2); border: 2px solid #a5b4fc;">
                                <span class="lessons-count">{{middle_active_sections_count}} Active âœ¨</span>
                            </div>
                        </div>
                        
                        <div class="middle-lessons-grid">
                            {{#middle_active_sections}}
                            <div class="middle-lesson-card" style="background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 8px 24px rgba(139, 92, 246, 0.12); border: 2px solid #e0e7ff; transition: all 0.3s; position: relative;">
                                <div class="lesson-card-header" style="background: radial-gradient(circle at top left, #ede9fe 0%, #ddd6fe 50%, #c7d2fe 100%); padding: 16px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #c7d2fe;">
                                    <div class="lesson-subject-badge" style="background: radial-gradient(circle at center, #c7d2fe 0%, #a5b4fc 100%); color: #4c1d95; padding: 8px 16px; border-radius: 20px; font-weight: 700; font-size: 13px; display: inline-flex; align-items: center; gap: 8px; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.2); border: 2px solid #a5b4fc;">
                                        <i class="fa fa-book"></i>
                                        <span>{{coursename}}</span>
                                    </div>
                                    <div class="lesson-status-badge active" style="background: radial-gradient(circle at center, #a7f3d0 0%, #6ee7b7 100%); color: #065f46; padding: 8px 16px; border-radius: 20px; font-weight: 700; font-size: 12px; display: inline-flex; align-items: center; gap: 6px; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2); border: 2px solid #6ee7b7;">
                                        <i class="fa fa-circle" style="font-size: 8px;"></i> In Progress
                                    </div>
                                </div>
                                
                                <div class="lesson-card-body" style="padding: 24px;">
                                    <h4 class="lesson-title" style="font-size: 1.4rem; font-weight: 800; color: #1e1b4b; margin: 0 0 12px 0; line-height: 1.3;">{{name}}</h4>
                                    {{#summary}}
                                    <p class="lesson-description" style="color: #64748b; font-size: 0.95rem; line-height: 1.6; margin-bottom: 20px; min-height: 40px;">{{{summary}}}</p>
                                    {{/summary}}
                                    
                                    <div class="lesson-progress-wrapper" style="background: radial-gradient(circle at top left, #f8fafc 0%, #f1f5f9 100%); padding: 16px; border-radius: 12px; margin-bottom: 20px; border: 2px solid #e0e7ff;">
                                        <div class="progress-info" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                            <span class="progress-label" style="font-weight: 700; color: #6366f1; font-size: 14px;">ðŸŽ¯ Progress</span>
                                            <span class="progress-value" style="font-weight: 800; color: #6366f1; font-size: 20px;">{{progress_percentage}}%</span>
                                        </div>
                                        <div class="modern-progress-bar" style="background: #e0e7ff; height: 18px; border-radius: 20px; overflow: hidden; position: relative; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);">
                                            <div class="modern-progress-fill" style="width: {{progress_percentage}}%; height: 100%; background: radial-gradient(circle at left, #c7d2fe 0%, #a5b4fc 50%, #818cf8 100%); border-radius: 20px; box-shadow: 0 2px 8px rgba(139, 92, 246, 0.25); transition: width 0.6s ease;"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="lesson-meta" style="display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 20px;">
                                        <div class="meta-item" style="background: radial-gradient(circle at center, #fef3c7 0%, #fde68a 50%, #fcd34d 100%); padding: 10px 14px; border-radius: 10px; display: inline-flex; align-items: center; gap: 8px; border: 2px solid #fcd34d;">
                                            <i class="fa fa-tasks" style="color: #d97706; font-size: 16px;"></i>
                                            <span style="font-weight: 700; color: #92400e; font-size: 13px;">{{completed_activities}}/{{total_activities}} Activities</span>
                                        </div>
                                        <div class="meta-item" style="background: radial-gradient(circle at center, #dbeafe 0%, #bfdbfe 50%, #93c5fd 100%); padding: 10px 14px; border-radius: 10px; display: inline-flex; align-items: center; gap: 8px; border: 2px solid #93c5fd;">
                                            <i class="fa fa-clock" style="color: #2563eb; font-size: 16px;"></i>
                                            <span style="font-weight: 700; color: #1e40af; font-size: 13px;">{{estimated_time}} mins â±ï¸</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="lesson-card-footer" style="padding: 0 24px 24px 24px;">
                                    <a href="{{courseurl}}" class="continue-lesson-btn" style="background: radial-gradient(circle at center, #c7d2fe 0%, #a5b4fc 50%, #818cf8 100%); color: #4c1d95; padding: 18px 28px; font-size: 16px; font-weight: 700; border-radius: 14px; text-decoration: none; display: inline-flex; align-items: center; gap: 12px; width: 100%; justify-content: center; box-shadow: 0 6px 20px rgba(139, 92, 246, 0.25); transition: all 0.3s; border: 2px solid #a5b4fc;">
                                        <span>ðŸš€ Continue Learning</span>
                                        <i class="fa fa-arrow-right" style="font-size: 18px;"></i>
                                    </a>
                                </div>
                            </div>
                            {{/middle_active_sections}}
                        </div>
                    </div>
                    {{/has_middle_active_sections}}
                    
                    <!-- My Achievements Section - Light Radial Colors -->
                    <div class="achievements-section" style="margin-top: 32px;">
                        <div class="achievements-header" style="background: radial-gradient(circle at top left, #fef3c7 0%, #fde68a 50%, #fcd34d 100%); padding: 24px; border-radius: 20px; margin-bottom: 24px; border: 2px solid #fcd34d; box-shadow: 0 8px 20px rgba(245, 158, 11, 0.12); display: flex; justify-content: space-between; align-items: center;">
                            <div class="header-content">
                                <h3 class="achievements-title" style="font-size: 1.8rem; font-weight: 800; color: #92400e; margin: 0 0 6px 0; display: flex; align-items: center; gap: 12px;">
                                    <span style="font-size: 32px;">ðŸ†</span> <span>My Achievements</span>
                                </h3>
                                <p class="achievements-subtitle" style="font-size: 1rem; color: #d97706; margin: 0; font-weight: 600;">See all your amazing accomplishments! ðŸŒŸ</p>
                            </div>
                            <a href="{{{achievementsurl}}}" class="view-all-achievements" style="background: radial-gradient(circle at center, #fde68a 0%, #fcd34d 100%); color: #92400e; padding: 12px 20px; border-radius: 12px; text-decoration: none; font-weight: 700; font-size: 14px; display: inline-flex; align-items: center; gap: 8px; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2); transition: all 0.3s; border: 2px solid #fbbf24;">
                                <span>View All</span>
                                <i class="fa fa-arrow-right"></i>
                            </a>
                        </div>
                        
                        <div class="achievements-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                            <div class="achievement-card earned" style="background: white; border-radius: 20px; padding: 24px; box-shadow: 0 8px 24px rgba(139, 92, 246, 0.12); border: 3px solid #a7f3d0; position: relative; overflow: hidden; transition: all 0.3s;">
                                <div class="achievement-icon" style="width: 70px; height: 70px; background: radial-gradient(circle at center, #a7f3d0 0%, #6ee7b7 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2); border: 2px solid #6ee7b7;">
                                    <i class="fa fa-book" style="color: #059669; font-size: 32px;"></i>
                                </div>
                                <div class="achievement-content">
                                    <h4 class="achievement-title" style="font-size: 1.3rem; font-weight: 800; color: #1e1b4b; margin: 0 0 8px 0;">ðŸ“š Course Explorer</h4>
                                    <p class="achievement-description" style="font-size: 1rem; color: #64748b; margin: 0; font-weight: 500;">Enrolled in 3 courses</p>
                                </div>
                                <div class="achievement-status" style="position: absolute; top: 20px; right: 20px; width: 36px; height: 36px; background: radial-gradient(circle at center, #a7f3d0 0%, #6ee7b7 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2); border: 2px solid #6ee7b7;">
                                    <i class="fa fa-check-circle" style="color: #059669; font-size: 20px;"></i>
                                </div>
                            </div>
                            
                            <div class="achievement-card earned" style="background: white; border-radius: 20px; padding: 24px; box-shadow: 0 8px 24px rgba(139, 92, 246, 0.12); border: 3px solid #a7f3d0; position: relative; overflow: hidden; transition: all 0.3s;">
                                <div class="achievement-icon" style="width: 70px; height: 70px; background: radial-gradient(circle at center, #fde68a 0%, #fcd34d 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2); border: 2px solid #fbbf24;">
                                    <i class="fa fa-tasks" style="color: #d97706; font-size: 32px;"></i>
                                </div>
                                <div class="achievement-content">
                                    <h4 class="achievement-title" style="font-size: 1.3rem; font-weight: 800; color: #1e1b4b; margin: 0 0 8px 0;">âœ… Activity Master</h4>
                                    <p class="achievement-description" style="font-size: 1rem; color: #64748b; margin: 0; font-weight: 500;">Completed 12 activities</p>
                                </div>
                                <div class="achievement-status" style="position: absolute; top: 20px; right: 20px; width: 36px; height: 36px; background: radial-gradient(circle at center, #a7f3d0 0%, #6ee7b7 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2); border: 2px solid #6ee7b7;">
                                    <i class="fa fa-check-circle" style="color: #059669; font-size: 20px;"></i>
                                </div>
                            </div>
                            
                            <div class="achievement-card earned" style="background: white; border-radius: 20px; padding: 24px; box-shadow: 0 8px 24px rgba(139, 92, 246, 0.12); border: 3px solid #a7f3d0; position: relative; overflow: hidden; transition: all 0.3s;">
                                <div class="achievement-icon" style="width: 70px; height: 70px; background: radial-gradient(circle at center, #bfdbfe 0%, #93c5fd 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2); border: 2px solid #60a5fa;">
                                    <i class="fa fa-calendar-check-o" style="color: #2563eb; font-size: 32px;"></i>
                                </div>
                                <div class="achievement-content">
                                    <h4 class="achievement-title" style="font-size: 1.3rem; font-weight: 800; color: #1e1b4b; margin: 0 0 8px 0;">ðŸ“ Assignment Hero</h4>
                                    <p class="achievement-description" style="font-size: 1rem; color: #64748b; margin: 0; font-weight: 500;">Submitted 5 assignments</p>
                                </div>
                                <div class="achievement-status" style="position: absolute; top: 20px; right: 20px; width: 36px; height: 36px; background: radial-gradient(circle at center, #a7f3d0 0%, #6ee7b7 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2); border: 2px solid #6ee7b7;">
                                    <i class="fa fa-check-circle" style="color: #059669; font-size: 20px;"></i>
                                </div>
                            </div>
                            
                            <div class="achievement-card locked" style="background: radial-gradient(circle at center, #f3f4f6 0%, #e5e7eb 100%); border-radius: 20px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); border: 3px solid #d1d5db; position: relative; overflow: hidden; opacity: 0.7;">
                                <div class="achievement-icon" style="width: 70px; height: 70px; background: radial-gradient(circle at center, #d1d5db 0%, #9ca3af 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; border: 2px solid #9ca3af;">
                                    <i class="fa fa-graduation-cap" style="color: #6b7280; font-size: 32px;"></i>
                                </div>
                                <div class="achievement-content">
                                    <h4 class="achievement-title" style="font-size: 1.3rem; font-weight: 800; color: #6b7280; margin: 0 0 8px 0;">ðŸŽ“ Course Graduate</h4>
                                    <p class="achievement-description" style="font-size: 1rem; color: #9ca3af; margin: 0; font-weight: 500;">Complete 1 full course</p>
                                </div>
                                <div class="achievement-status" style="position: absolute; top: 20px; right: 20px; width: 36px; height: 36px; background: radial-gradient(circle at center, #d1d5db 0%, #9ca3af 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid #9ca3af;">
                                    <i class="fa fa-lock" style="color: #6b7280; font-size: 16px;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Right Sidebar -->
                <div class="col-lg-3">
                    <div class="middle-sidebar">

                        <!-- My Schedule -->
                        <div class="sidebar-section schedule-section">
                            <h4 class="sidebar-title">
                                <i class="fa fa-calendar"></i> My Schedule
                                <a href="{{config.wwwroot}}/theme/remui_kids/schedule.php" class="view-full-link">View Schedule ></a>
                            </h4>
                            <p class="schedule-subtitle">Next 7 Days</p>
                            <div class="calendar-week">
                                {{#calendar_week}}
                                <div class="calendar-day {{#has_events}}has-events{{/has_events}}" data-date="{{date}}">
                                    <div class="day-name">{{day_name}}</div>
                                    <div class="day-number">{{day_number}}</div>
                                    {{#has_events}}
                                    <div class="event-indicator">
                                        <div class="event-dot"></div>
                                    </div>
                                    {{/has_events}}
                                </div>
                                {{/calendar_week}}
                            </div>
                            
                            <!-- Upcoming Events List -->
                            <div class="upcoming-events">
                                {{#upcoming_events}}
                                <a href="{{event_url}}" class="event-item" target="_blank">
                                    <div class="event-date">
                                        <span class="event-day">{{event_day}}</span>
                                        <span class="event-month">{{event_month}}</span>
                                    </div>
                                    <div class="event-details">
                                        <div class="event-title">{{event_title}}</div>
                                        <div class="event-time">{{event_time}}</div>
                                        <div class="event-course">{{course_name}}</div>
                                    </div>
                                    <div class="event-type {{event_type}}">
                                        <i class="fa {{event_icon}}"></i>
                                    </div>
                                </a>
                                {{/upcoming_events}}
                                {{^upcoming_events}}
                                <div class="no-events">
                                    <i class="fa fa-calendar-o"></i>
                                    <p>No upcoming events in the next 7 days</p>
                                </div>
                                {{/upcoming_events}}
                            </div>
                        </div>
                        
                        <!-- Leaderboard Section -->
                        <div class="sidebar-section" style="background: white; border-radius: 16px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 2px solid #f3f4f6;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fa fa-trophy" style="color: #f59e0b; font-size: 20px;"></i>
                                    <h4 class="sidebar-title" style="margin: 0; font-size: 18px; font-weight: 700; color: #111827;">Leaderboard</h4>
                                </div>
                                <a href="#" style="font-size: 12px; color: #6b7280; text-decoration: none; font-weight: 500;">See all <i class="fa fa-chevron-right" style="font-size: 10px;"></i></a>
                            </div>
                            <p style="font-size: 13px; color: #6b7280; margin: 0 0 16px 0;">Weekly Points</p>
                            
                            <!-- Tabs -->
                            <div style="display: flex; gap: 8px; margin-bottom: 20px; border-bottom: 1px solid #e5e7eb;">
                                <button class="leaderboard-tab active" data-tab="class" style="flex: 1; padding: 8px 12px; border: none; background: transparent; color: #3b82f6; font-weight: 600; font-size: 13px; cursor: pointer; border-bottom: 2px solid #3b82f6; margin-bottom: -1px;">Class</button>
                                <button class="leaderboard-tab" data-tab="grade" style="flex: 1; padding: 8px 12px; border: none; background: transparent; color: #6b7280; font-weight: 500; font-size: 13px; cursor: pointer;">Grade</button>
                                <button class="leaderboard-tab" data-tab="school" style="flex: 1; padding: 8px 12px; border: none; background: transparent; color: #6b7280; font-weight: 500; font-size: 13px; cursor: pointer;">School</button>
                            </div>
                            
                            <!-- Leaderboard List -->
                            <div class="leaderboard-list">
                                {{#leaderboard_students}}
                                <div class="leaderboard-item" style="display: flex; align-items: center; gap: 12px; padding: 12px 0; border-bottom: 1px solid #f3f4f6;">
                                    <!-- Avatar -->
                                    <div style="width: 40px; height: 40px; border-radius: 50%; overflow: hidden; flex-shrink: 0; border: 2px solid #e5e7eb;">
                                        {{#profile_picture_url}}
                                        <img src="{{profile_picture_url}}" alt="{{name}}" style="width: 100%; height: 100%; object-fit: cover;">
                                        {{/profile_picture_url}}
                                        {{^profile_picture_url}}
                                        <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">
                                            {{name_initial}}
                                        </div>
                                        {{/profile_picture_url}}
                                    </div>
                                    
                                    <!-- Name and Points -->
                                    <div style="flex: 1; min-width: 0;">
                                        <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 2px;">
                                            <span style="font-size: 14px; font-weight: 600; color: #111827;">{{name}}</span>
                                            {{#is_current_user}}
                                            <i class="fa fa-star" style="color: #f59e0b; font-size: 12px;"></i>
                                            {{/is_current_user}}
                                        </div>
                                        <div style="font-size: 12px; color: #6b7280;">{{points}} points</div>
                                    </div>
                                    
                                    <!-- Score -->
                                    <div style="text-align: right; flex-shrink: 0;">
                                        <div style="font-size: 14px; font-weight: 700; color: #111827;">{{score}}</div>
                                    </div>
                                </div>
                                {{/leaderboard_students}}
                                {{^leaderboard_students}}
                                <!-- Default Leaderboard Items -->
                                <div class="leaderboard-item" style="display: flex; align-items: center; gap: 12px; padding: 12px 0; border-bottom: 1px solid #f3f4f6;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; overflow: hidden; flex-shrink: 0; border: 2px solid #e5e7eb; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">J</div>
                                    <div style="flex: 1; min-width: 0;">
                                        <div style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 2px;">John</div>
                                        <div style="font-size: 12px; color: #6b7280;">1,250 points</div>
                                    </div>
                                    <div style="text-align: right; flex-shrink: 0;">
                                        <div style="font-size: 14px; font-weight: 700; color: #111827;">1,250</div>
                                    </div>
                                </div>
                                <div class="leaderboard-item" style="display: flex; align-items: center; gap: 12px; padding: 12px 0; border-bottom: 1px solid #f3f4f6;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; overflow: hidden; flex-shrink: 0; border: 2px solid #e5e7eb; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">A</div>
                                    <div style="flex: 1; min-width: 0;">
                                        <div style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 2px;">Aisha</div>
                                        <div style="font-size: 12px; color: #6b7280;">1,160 points</div>
                                    </div>
                                    <div style="text-align: right; flex-shrink: 0;">
                                        <div style="font-size: 14px; font-weight: 700; color: #111827;">1,180</div>
                                    </div>
                                </div>
                                <div class="leaderboard-item" style="display: flex; align-items: center; gap: 12px; padding: 12px 0; border-bottom: 1px solid #f3f4f6; background: #eff6ff;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; overflow: hidden; flex-shrink: 0; border: 2px solid #e5e7eb; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">Y</div>
                                    <div style="flex: 1; min-width: 0;">
                                        <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 2px;">
                                            <span style="font-size: 14px; font-weight: 600; color: #111827;">You</span>
                                            <i class="fa fa-star" style="color: #f59e0b; font-size: 12px;"></i>
                                        </div>
                                        <div style="font-size: 12px; color: #6b7280;">1,120 points</div>
                                    </div>
                                    <div style="text-align: right; flex-shrink: 0;">
                                        <div style="font-size: 14px; font-weight: 700; color: #111827;">1,120</div>
                                    </div>
                                </div>
                                <div class="leaderboard-item" style="display: flex; align-items: center; gap: 12px; padding: 12px 0; border-bottom: 1px solid #f3f4f6;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; overflow: hidden; flex-shrink: 0; border: 2px solid #e5e7eb; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">L</div>
                                    <div style="flex: 1; min-width: 0;">
                                        <div style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 2px;">Leon</div>
                                        <div style="font-size: 12px; color: #6b7280;">1,050 points</div>
                                    </div>
                                    <div style="text-align: right; flex-shrink: 0;">
                                        <div style="font-size: 14px; font-weight: 700; color: #111827;">1,050</div>
                                    </div>
                                </div>
                                <div class="leaderboard-item" style="display: flex; align-items: center; gap: 12px; padding: 12px 0;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; overflow: hidden; flex-shrink: 0; border: 2px solid #e5e7eb; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">E</div>
                                    <div style="flex: 1; min-width: 0;">
                                        <div style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 2px;">Emma</div>
                                        <div style="font-size: 12px; color: #6b7280;">980 points</div>
                                    </div>
                                    <div style="text-align: right; flex-shrink: 0;">
                                        <div style="font-size: 14px; font-weight: 700; color: #111827;">980</div>
                                    </div>
                                </div>
                                {{/leaderboard_students}}
                            </div>
                            
                            <div style="margin-top: 16px; text-align: center;">
                                <a href="#" style="font-size: 12px; color: #6b7280; text-decoration: none; font-weight: 500;">See all <i class="fa fa-chevron-right" style="font-size: 10px;"></i></a>
                            </div>
                        </div>
                        
                        <!-- Learning Progress -->
                        <div class="sidebar-section">
                            <h4 class="sidebar-title">Learning Progress</h4>
                            <div class="quick-stats-list">
                                <div class="quick-stat-item">
                                    <div class="stat-icon">
                                        <i class="fa fa-book"></i>
                                    </div>
                                    <div class="stat-details">
                                        <span class="stat-label">Active Courses</span>
                                        <span class="stat-value">3</span>
                                    </div>
                                </div>
                                <div class="quick-stat-item">
                                    <div class="stat-icon">
                                        <i class="fa fa-tasks"></i>
                                    </div>
                                    <div class="stat-details">
                                        <span class="stat-label">Completed Activities</span>
                                        <span class="stat-value">12</span>
                                    </div>
                                </div>
                                <div class="quick-stat-item">
                                    <div class="stat-icon">
                                        <i class="fa fa-calendar-check-o"></i>
                                    </div>
                                    <div class="stat-details">
                                        <span class="stat-label">Assignments Due</span>
                                        <span class="stat-value">2</span>
                                    </div>
                                </div>
                                <div class="quick-stat-item">
                                    <div class="stat-icon">
                                        <i class="fa fa-percent"></i>
                                    </div>
                                    <div class="stat-details">
                                        <span class="stat-label">Overall Progress</span>
                                        <span class="stat-value">68%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Achievements -->
                        <div class="sidebar-section" style="background: white; border-radius: 16px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);">
                            <h4 class="sidebar-title" style="font-size: 18px; font-weight: 700; color: #111827; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid #f3f4f6;">Achievements</h4>
                            <div class="achievements-content" style="display: flex; flex-direction: column; gap: 16px;">
                                <div class="achievement-summary-item" style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 40px; height: 40px; background: #eff6ff; border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fa fa-book" style="color: #3b82f6; font-size: 18px;"></i>
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="font-size: 20px; font-weight: 700; color: #111827;">2</div>
                                        <div style="font-size: 13px; color: #6b7280;">Courses</div>
                                    </div>
                                </div>
                                <div class="achievement-summary-item" style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 40px; height: 40px; background: #f0fdf4; border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fa fa-check-circle" style="color: #10b981; font-size: 18px;"></i>
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="font-size: 20px; font-weight: 700; color: #111827;">12</div>
                                        <div style="font-size: 13px; color: #6b7280;">Activities</div>
                                    </div>
                                </div>
                                <div class="achievement-summary-item" style="display: flex; align-items: center; gap: 12px;">
                                    <div style="width: 40px; height: 40px; background: #fef2f2; border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fa fa-file-text-o" style="color: #ef4444; font-size: 18px;"></i>
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="font-size: 20px; font-weight: 700; color: #111827;">5</div>
                                        <div style="font-size: 13px; color: #6b7280;">Assignments</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
            
            <!-- Course Preview Modal -->
            
            <!-- Leaderboard Tab Functionality -->
            <script>
            document.addEventListener('DOMContentLoaded', function() {
                const leaderboardTabs = document.querySelectorAll('.leaderboard-tab');
                
                leaderboardTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        // Remove active class from all tabs
                        leaderboardTabs.forEach(t => {
                            t.classList.remove('active');
                            t.style.color = '#6b7280';
                            t.style.fontWeight = '500';
                            t.style.borderBottom = 'none';
                        });
                        
                        // Add active class to clicked tab
                        this.classList.add('active');
                        this.style.color = '#3b82f6';
                        this.style.fontWeight = '600';
                        this.style.borderBottom = '2px solid #3b82f6';
                        
                        // Get the tab type
                        const tabType = this.getAttribute('data-tab');
                        
                        // Here you can add logic to filter/update leaderboard based on tab type
                        // For now, we'll just update the visual state
                        console.log('Switched to', tabType, 'leaderboard');
                    });
                });
            });
            </script>
        {{/middle}}
    
    {{#middle}}
        <!-- Include G4G7 Sidebar for Grade 4-7 Students -->
        {{> theme_remui_kids/g4g7_sidebar}}
        
        <!-- Main content area with sidebar offset -->
            <div class="g4g7-content-container" style="max-width: 1200px; margin: 0 auto;">          
            <!-- Mobile responsive styles -->
            <style>
            @media (max-width: 768px) {
                .g4g7-main-content {
                    margin-left: 0 !important;
                    margin-top: 80px !important;
                    padding: 20px 15px !important;
                }
                
                .middle-dashboard {
                    padding: 0 !important;
                }
                
                .g4g7-sidebar-toggle {
                    display: block !important;
                    top: 100px !important;
                }
                
                .g4g7-sidebar {
                    top: 80px !important;
                    height: calc(100vh - 80px) !important;
                }
            }
            </style>
    <style>
        /* Middle School My Courses styling */
        .my-courses-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.25rem 1.5rem;
            border-radius: 18px;
            background: linear-gradient(120deg, #eef2ff 0%, #e0e7ff 100%);
            border: 1px solid #c7d2fe;
            box-shadow: 0 15px 30px rgba(79, 70, 229, 0.08);
        }
        
        .my-courses-header .header-icon {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            background: linear-gradient(135deg, #4f46e5, #3b82f6);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 12px 24px rgba(63, 81, 181, 0.25);
        }
        
        .my-courses-header .header-content {
            display: flex;
            flex-direction: column;
        }
        
        .my-courses-header .header-title {
            margin: 0;
            font-size: 1.8rem;
            color: white;
            font-weight: 800;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .my-courses-header .header-subtitle {
            margin: 0.5rem 0 0;
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.05rem;
            font-weight: 500;
        }
        
        /* Middle School Course Cards - Kid Friendly Design */
        .middle-dashboard .enhanced-course-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.15);
            transition: all 0.3s ease;
            position: relative;
            margin-bottom: 2rem;
            border: 2px solid #e0e7ff;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .middle-dashboard .enhanced-course-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 32px rgba(139, 92, 246, 0.25);
            border-color: #8b5cf6;
        }
        
        /* Course Button Hover Effects - Kid Friendly */
        .middle-dashboard .course-button.primary:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.5) !important;
        }
        
        /* Achievement Card Hover */
        .middle-dashboard .achievement-card:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 12px 32px rgba(139, 92, 246, 0.2) !important;
        }
        
        /* Lesson Card Hover */
        .middle-dashboard .middle-lesson-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 32px rgba(139, 92, 246, 0.25) !important;
            border-color: #8b5cf6 !important;
        }
        
        /* Button Hover Effects for Kids */
        .middle-dashboard .course-button.primary,
        .middle-dashboard .continue-lesson-btn {
            transition: all 0.3s ease !important;
        }
        
        .middle-dashboard .course-button.primary:hover,
        .middle-dashboard .continue-lesson-btn:hover {
            transform: translateY(-3px) scale(1.03) !important;
            filter: brightness(1.1);
        }
        
        /* Make stat cards more interactive */
        .middle-dashboard .middle-stat-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .middle-dashboard .middle-stat-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 32px rgba(139, 92, 246, 0.25) !important;
        }
        
        /* Kid-friendly spacing for courses grid */
        .middle-dashboard .courses-static-grid {
            gap: 24px !important;
        }
        
        /* Larger touch targets for mobile */
        @media (max-width: 768px) {
            .middle-dashboard .course-button.primary,
            .middle-dashboard .continue-lesson-btn {
                padding: 20px 24px !important;
                font-size: 18px !important;
                min-height: 60px !important;
            }
            
            .middle-dashboard .enhanced-course-card {
                margin-bottom: 1.5rem;
            }
        }
        
        .middle-dashboard .course-image-container {
            position: relative;
            height: 180px;
            overflow: hidden;
            background: radial-gradient(circle at center, #e0e7ff 0%, #c7d2fe 30%, #a5b4fc 60%, #818cf8 100%);
            border-radius: 20px 20px 0 0;
        }
        
        .middle-dashboard .course-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            transition: transform 0.4s ease;
            border-radius: 20px 20px 0 0;
        }
        
        .middle-dashboard .enhanced-course-card:hover .course-image {
            transform: scale(1.08);
        }
        
        /* Fallback for missing images in middle school - Light Radial */
        .middle-dashboard .course-image-placeholder {
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #e0e7ff 0%, #c7d2fe 30%, #a5b4fc 60%, #818cf8 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6366f1;
            font-size: 4rem;
            position: relative;
        }
        
        .middle-dashboard .course-image-placeholder::before {
            content: 'ðŸ“š';
            font-size: 5rem;
            opacity: 0.8;
        }
        
        /* Course Category Badge (Top Left) - Bigger and Kid Friendly */
        .middle-dashboard .course-category-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: rgba(255, 255, 255, 0.98);
            color: #6366f1;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            border: 2px solid rgba(139, 92, 246, 0.4);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.25);
            backdrop-filter: blur(10px);
        }
        
        /* Course Options Icon (Top Right) */
        .middle-dashboard .course-options-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.25);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #fff;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .middle-dashboard .course-options-icon:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* Course Content Styling - More Spacing for Kids */
        .middle-dashboard .course-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }
        
        /* Course Title */
        .middle-dashboard .course-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e1b4b;
            margin: 0 0 10px 0;
            line-height: 1.3;
            letter-spacing: 0.3px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            max-height: 3rem;
            -webkit-text-fill-color: #1e1b4b;
        }
        
        /* Grade Badge - Hidden */
        .middle-dashboard .course-grade-badge {
            display: none;
        }
        
        /* Course Summary */
        .middle-dashboard .course-summary {
            color: #475569;
            font-size: 0.9rem;
            margin: 0 0 10px 0;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            max-height: 2.1rem;
        }
        
        /* Progress Section */
        .middle-dashboard .course-progress-section {
            margin-bottom: 10px;
        }
        
        .middle-dashboard .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .middle-dashboard .progress-label {
            font-size: 0.85rem;
            color: #475569;
            font-weight: 600;
        }
        
        .middle-dashboard .progress-percentage {
            font-size: 0.9rem;
            color: #4338ca;
            font-weight: 600;
        }
        
        .middle-dashboard .progress-bar-container {
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .middle-dashboard .progress-bar {
            height: 100%;
            background: #e9ecef;
            border-radius: 3px;
        }
        
        .middle-dashboard .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #c084fc, #6366f1);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        /* Course Statistics Grid */
        .middle-dashboard .course-stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .middle-dashboard .stat-box {
            background: #f5f7ff;
            border: 1px solid #dfe4ff;
            border-radius: 10px;
            padding: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .middle-dashboard .stat-icon {
            color: #4338ca;
            font-size: 1rem;
            width: 22px;
            text-align: center;
        }
        
        .middle-dashboard .stat-content {
            flex: 1;
        }
        
        .middle-dashboard .stat-number {
            font-size: 0.95rem;
            font-weight: 600;
            color: #0f172a;
            line-height: 1.1;
        }
        
        .middle-dashboard .stat-label {
            font-size: 0.65rem;
            color: #6366f1;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.6px;
            line-height: 1;
            margin-top: 2px;
        }
        
        /* Course Actions */
        .middle-dashboard .course-actions {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: auto;
            padding-top: 4px;
        }
        
        .middle-dashboard .course-button {
            flex: 1;
            background: linear-gradient(135deg, #4f46e5, #3b82f6);
            color: white;
            border: none;
            padding: 9px 12px;
            border-radius: 10px;
            font-size: 0.85rem;
            font-weight: 600;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.25);
        }
        
        .middle-dashboard .course-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(63, 81, 181, 0.25);
            color: white;
            text-decoration: none;
        }
        
        .middle-dashboard .course-button.primary {
            background: linear-gradient(135deg, #4f46e5, #3b82f6);
        }
        
        /* Professional Middle School Lesson Cards */
        .professional-section-header {
            background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
            border-radius: 12px;
            padding: 1.25rem 1.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        }
        
        .professional-section-header .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .professional-section-header .header-icon-wrapper {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.3rem;
        }
        
        .professional-section-header .header-text h3 {
            margin: 0;
            color: #7c2d12;
            font-size: 1.25rem;
            font-weight: 700;
        }
        
        .professional-section-header .header-subtitle {
            margin: 0.25rem 0 0 0;
            color: #92400e;
            font-size: 0.8rem;
        }
        
        .professional-section-header .lessons-count {
            background: white;
            padding: 0.5rem 1rem;
            border-radius: 10px;
            color: #d97706;
            font-weight: 600;
            font-size: 0.8rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .middle-lessons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .middle-lesson-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .middle-lesson-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .lesson-card-header {
            padding: 0.85rem 1rem;
            background: linear-gradient(135deg, #fff7ed, #ffedd5);
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .lesson-subject-badge {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.4rem 0.8rem;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: white;
            border-radius: 16px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .lesson-status-badge {
            padding: 0.4rem 0.8rem;
            border-radius: 16px;
            font-size: 0.7rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }
        
        .lesson-status-badge.active {
            background: #dcfce7;
            color: #15803d;
        }
        
        .lesson-status-badge.active i {
            color: #15803d;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .lesson-card-body {
            padding: 1rem;
            flex: 1;
        }
        
        .lesson-title {
            font-size: 1.05rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }
        
        .lesson-description {
            color: #475569;
            font-size: 0.8rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }
        
        .lesson-progress-wrapper {
            background: #f8fafc;
            border-radius: 10px;
            padding: 0.75rem;
            margin-bottom: 1rem;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .progress-label {
            font-size: 0.75rem;
            color: #64748b;
            font-weight: 600;
        }
        
        .progress-value {
            font-size: 0.95rem;
            color: #d97706;
            font-weight: 700;
        }
        
        .modern-progress-bar {
            width: 100%;
            height: 6px;
            background: #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .modern-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            border-radius: 8px;
            transition: width 0.3s ease;
        }
        
        .lesson-meta {
            display: flex;
            gap: 1rem;
            margin-top: 0.75rem;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            color: #64748b;
            font-size: 0.75rem;
        }
        
        .meta-item i {
            color: #d97706;
            font-size: 0.85rem;
        }
        
        .lesson-card-footer {
            padding: 0.75rem 1rem;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
        }
        
        .continue-lesson-btn {
            width: 100%;
            padding: 0.7rem 1rem;
            background: linear-gradient(135deg, #FFA500, #FF7A00);
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .continue-lesson-btn:hover {
            background: linear-gradient(135deg, #FF7A00, #CC5C00);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(217, 119, 6, 0.4);
            color: white;
            text-decoration: none;
        }
        
        .continue-lesson-btn i {
            transition: transform 0.3s ease;
        }
        
        .continue-lesson-btn:hover i {
            transform: translateX(5px);
        }
        
        /* My Courses Page Styles */
        .mycourses-page-content {
            margin-left: 20px;
            padding: 30px;
            min-height: 100vh;
            background: #f8f9fa;
        }
        
        .page-header {
            margin-bottom: 30px;
            text-align: center;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .page-title i {
            color: #667eea;
        }
        
        .page-subtitle {
            font-size: 1.1rem;
            color: #6c757d;
            margin: 0;
        }
        
        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .course-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .course-image-container {
            position: relative;
            height: 200px;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .course-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .course-card:hover .course-image {
            transform: scale(1.05);
        }
        
        .course-image-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }
        
        .course-category-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255, 255, 255, 0.9);
            color: #2c3e50;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .course-progress-overlay {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .progress-circle {
            text-align: center;
        }
        
        .progress-percentage {
            font-size: 0.8rem;
            font-weight: 700;
            color: #2c3e50;
        }
        
        .course-content {
            padding: 20px;
        }
        
        .course-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
            line-height: 1.3;
        }
        
        .course-summary {
            color: #6c757d;
            font-size: 0.95rem;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .course-progress-section {
            margin-bottom: 15px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .progress-label {
            font-size: 0.9rem;
            color: #495057;
            font-weight: 500;
        }
        
        .progress-bar-container {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: #e9ecef;
            border-radius: 4px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .course-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 10px 0;
            border-top: 1px solid #e9ecef;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: #6c757d;
        }
        
        .stat-item i {
            color: #667eea;
        }
        
        .course-actions {
            text-align: center;
        }
        
        .course-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .course-button:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            color: white;
            text-decoration: none;
        }
        
        .course-button.primary {
            background: #667eea;
        }
        
        .no-courses-message {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .no-courses-icon {
            font-size: 4rem;
            color: #6c757d;
            margin-bottom: 20px;
        }
        
        .no-courses-message h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .no-courses-message p {
            color: #6c757d;
            margin-bottom: 25px;
        }
        
        .back-to-dashboard {
            background: #667eea;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .back-to-dashboard:hover {
            background: #5a6fd8;
            color: white;
            text-decoration: none;
        }
    </style>
    
    <script>
    let currentCourseIndex = 0;
    const courses = document.querySelectorAll('.middle-course-card');
    const indicators = document.querySelectorAll('.indicator');
    
    function showCourse(index) {
        // Hide all courses
        courses.forEach(course => {
            course.style.display = 'none';
        });
        
        // Show current course
        if (courses[index]) {
            courses[index].style.display = 'block';
        }
        
        // Update indicators
        indicators.forEach((indicator, i) => {
            indicator.classList.toggle('active', i === index);
        });
        
        // Navigation buttons are always enabled for circular navigation
        const prevBtn = document.querySelector('.prev-btn');
        const nextBtn = document.querySelector('.next-btn');
        
        if (prevBtn) prevBtn.style.opacity = '1';
        if (nextBtn) nextBtn.style.opacity = '1';
    }
    
    function changeCourse(direction) {
        if (courses.length === 0) return;
        
        if (direction === 1) {
            // Move to next course (circular)
            currentCourseIndex = (currentCourseIndex + 1) % courses.length;
        } else {
            // Move to previous course (circular)
            currentCourseIndex = (currentCourseIndex - 1 + courses.length) % courses.length;
        }
        
        showCourse(currentCourseIndex);
    }
    
    function goToCourse(index) {
        if (index >= 0 && index < courses.length) {
            currentCourseIndex = index;
            showCourse(currentCourseIndex);
        }
    }
    
    // Initialize carousel
    document.addEventListener('DOMContentLoaded', function() {
        if (courses.length > 0) {
            showCourse(0);
        }
    });
    
    
    function loadCourseSections(courseId, container) {
        // Create a simple AJAX request to load sections
        // For now, we'll simulate the data structure
        const sections = [
            { id: 1, name: 'Introduction to Digital Learning', description: 'Welcome to the course and overview of digital tools', activities: 3 },
            { id: 2, name: 'Basic Computer Skills', description: 'Learning fundamental computer operations', activities: 5 },
            { id: 3, name: 'Digital Safety and Security', description: 'Understanding online safety and privacy', activities: 4 },
            { id: 4, name: 'Creative Digital Projects', description: 'Hands-on projects using digital tools', activities: 6 },
            { id: 5, name: 'Assessment and Review', description: 'Final assessment and course review', activities: 2 }
        ];
        
        // Clear loading state
        container.innerHTML = '';
        
        // Add sections to the modal
        sections.forEach(section => {
            const sectionElement = document.createElement('div');
            sectionElement.className = 'section-item';
            sectionElement.innerHTML = `
                <div class="section-header">
                    <h4 class="section-name">${section.name}</h4>
                    <span class="section-activities">${section.activities} activities</span>
                </div>
                <p class="section-description">${section.description}</p>
            `;
            container.appendChild(sectionElement);
        });
    }
    

    // Real-time course count update functions
    function refreshCourseCount() {
        console.log('refreshCourseCount called'); // Debug log
        const refreshIcon = document.getElementById('courses-refresh-icon');
        const coursesCount = document.getElementById('total-courses-count');
        const coursesUpdated = document.getElementById('courses-updated');

        if (!refreshIcon || !coursesCount || !coursesUpdated) {
            console.error('Required elements not found:', {refreshIcon, coursesCount, coursesUpdated});
            return;
        }

        // Show loading state
        refreshIcon.classList.add('fa-spin');
        console.log('Fetching data from: {{config.wwwroot}}/theme/remui_kids/tests/test_ajax.php'); // Debug log

        // Fetch real-time data
        fetch('{{config.wwwroot}}/theme/remui_kids/tests/test_ajax.php')
            .then(response => {
                if (!response.ok) {
                    throw new Error('HTTP ' + response.status);
                }
                return response.text(); // Get as text first
            })
            .then(text => {
                try {
                    const data = JSON.parse(text);
                    if (data.status === 'success') {
                        // Update the count with animation
                        animateCountUpdate(coursesCount, data.total_courses);
                        coursesUpdated.textContent = 'Last updated: ' + data.timestamp;

                        // Show success feedback
                        showUpdateFeedback('courses-card', 'success');
                    } else {
                        console.error('API Error:', data);
                        showUpdateFeedback('courses-card', 'error');
                    }
                } catch (parseError) {
                    console.error('JSON Parse Error:', parseError);
                    console.error('Response text:', text);
                    showUpdateFeedback('courses-card', 'error');
                }
            })
            .catch(error => {
                console.error('Fetch Error:', error);
                showUpdateFeedback('courses-card', 'error');
            })
            .finally(() => {
                // Remove loading state
                refreshIcon.classList.remove('fa-spin');
            });
    }

    function animateCountUpdate(element, newValue) {
        const currentValue = parseInt(element.textContent) || 0;
        const increment = newValue > currentValue ? 1 : -1;
        const duration = 1000; // 1 second
        const steps = Math.abs(newValue - currentValue);
        const stepDuration = duration / steps;

        let currentStep = 0;
        const timer = setInterval(() => {
            currentStep++;
            const newDisplayValue = currentValue + (increment * currentStep);
            element.textContent = newDisplayValue;

            if (currentStep >= steps) {
                clearInterval(timer);
                element.textContent = newValue;
            }
        }, stepDuration);
    }

    function showUpdateFeedback(cardId, type) {
        const card = document.getElementById(cardId);
        const feedback = document.createElement('div');
        feedback.className = `update-feedback ${type}`;
        feedback.textContent = type === 'success' ? 'âœ“ Updated' : 'âœ— Error';
        feedback.style.cssText = `
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: ${type === 'success' ? '#4CAF50' : '#f44336'};
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        `;

        card.style.position = 'relative';
        card.appendChild(feedback);

        // Fade in
        setTimeout(() => feedback.style.opacity = '1', 10);

        // Fade out and remove
        setTimeout(() => {
            feedback.style.opacity = '0';
            setTimeout(() => card.removeChild(feedback), 300);
        }, 2000);
    }

    // Auto-refresh course count every 30 seconds
    setInterval(refreshCourseCount, 30000);

    // Middle school course count refresh function
    function refreshMiddleCourseCount() {
        console.log('refreshMiddleCourseCount called'); // Debug log
        const refreshIcon = document.getElementById('middle-courses-refresh-icon');
        const coursesCount = document.getElementById('middle-total-courses-count');
        const coursesUpdated = document.getElementById('middle-courses-updated');

        if (!refreshIcon || !coursesCount || !coursesUpdated) {
            console.error('Required elements not found:', {refreshIcon, coursesCount, coursesUpdated});
            return;
        }

        // Show loading state
        refreshIcon.classList.add('fa-spin');
        console.log('Fetching data from: {{config.wwwroot}}/theme/remui_kids/tests/test_ajax.php'); // Debug log

        // Fetch real-time data
        fetch('{{config.wwwroot}}/theme/remui_kids/tests/test_ajax.php')
            .then(response => {
                if (!response.ok) {
                    throw new Error('HTTP ' + response.status);
                }
                return response.text(); // Get as text first
            })
            .then(text => {
                try {
                    const data = JSON.parse(text);
                    if (data.status === 'success') {
                        // Update the count with animation
                        animateCountUpdate(coursesCount, data.total_courses);
                        coursesUpdated.textContent = 'Last updated: ' + data.timestamp;

                        // Show success feedback
                        showUpdateFeedback('middle-courses-card', 'success');
                    } else {
                        console.error('API Error:', data);
                        showUpdateFeedback('middle-courses-card', 'error');
                    }
                } catch (parseError) {
                    console.error('JSON Parse Error:', parseError);
                    console.error('Response text:', text);
                    showUpdateFeedback('middle-courses-card', 'error');
                }
            })
            .catch(error => {
                console.error('Fetch Error:', error);
                showUpdateFeedback('middle-courses-card', 'error');
            })
            .finally(() => {
                // Remove loading state
                refreshIcon.classList.remove('fa-spin');
            });
    }

    // Auto-refresh middle school course count every 30 seconds
    setInterval(refreshMiddleCourseCount, 30000);

    // Debug function to test AJAX endpoint
    function testAjaxEndpoint() {
        console.log('Testing AJAX endpoint...');
        fetch('{{config.wwwroot}}/theme/remui_kids/tests/test_ajax.php')
            .then(response => {
                console.log('Response status:', response.status);
                return response.text();
            })
            .then(text => {
                console.log('Raw response:', text);
                try {
                    const data = JSON.parse(text);
                    console.log('Parsed data:', data);
                    alert('AJAX Test Result: ' + JSON.stringify(data, null, 2));
                } catch (e) {
                    console.error('JSON parse error:', e);
                    alert('JSON Parse Error: ' + e.message + '\nRaw response: ' + text);
                }
            })
            .catch(error => {
                console.error('Fetch error:', error);
                alert('Fetch Error: ' + error.message);
            });
    }

    </script>
            </div> <!-- Close g4g7-content-container -->
    {{/middle}}

    
    {{#highschool}}
    <style>
        /* Enhanced High School Course Cards */
        .enhanced-course-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
            margin-bottom: 1.5rem;
            border: 1px solid #e9ecef;
        }
        .enhanced-course-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .course-image-container {
            position: relative;
            height: 180px;
            overflow: hidden;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border-radius: 12px 12px 0 0;
        }
        
        .course-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            transition: transform 0.3s ease;
            border-radius: 12px 12px 0 0;
        }
        
        .enhanced-course-card:hover .course-image {
            transform: scale(1.05);
        }
        
        /* Fallback for missing images */
        .course-image-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }
        .footer-copyright-wrapper ,.footer-mainsection-wrapper{
            display: none !important;
        }
        .course-level-badge,
        .elementary-course-card.enhanced .course-image-container .course-level-badge,
        .enhanced-course-card .course-image-container .course-level-badge,
        .course-image-container .course-level-badge {
            position: absolute !important;
            top: 1rem !important;
            left: 1rem !important;
            background: rgba(255, 255, 255, 0.9) !important;
            color: #4CAF50 !important;
            padding: 0.6rem 1.2rem !important;
            border-radius: 20px !important;
            font-size: 0.8rem !important;
            font-weight: 600 !important;
            backdrop-filter: blur(10px) !important;
            min-width: 80px !important;
            width: auto !important;
            max-width: 120px !important;
            white-space: nowrap !important;
            overflow: hidden !important;
            text-overflow: ellipsis !important;
            display: inline-block !important;
        }
        
        .course-status-indicator {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .course-status-indicator.completed {
            background: #10b981;
        }
        
        .course-status-indicator.in-progress {
            background: #f59e0b;
        }
        
        
        .course-content {
            padding: 1rem;
        }
        
        .course-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }
        
        .course-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #1a202c;
            margin: 0;
            flex: 1;
        }
        
        .course-grade {
            background: #FF6B35;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 1rem;
        }
        
        .course-summary {
            color: #718096;
            font-size: 0.85rem;
            line-height: 1.4;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .course-progress-section {
            margin-bottom: 1rem;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .progress-label {
            font-size: 0.85rem;
            color: #4a5568;
            font-weight: 600;
        }
        
        .progress-percentage {
            font-size: 0.85rem;
            color: #10b981;
            font-weight: 700;
        }
        
        .progress-bar-container {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-bar {
            width: 100%;
            height: 100%;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
            transition: width 0.3s ease;
        }
        
        .course-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        /* Compact Course Cards */
        .small-course-card {
            background: #ffffff;
            border-radius: 22px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(15, 23, 42, 0.08);
            display: flex;
            flex-direction: column;
            min-height: 100%;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .small-course-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 30px 60px rgba(15, 23, 42, 0.15);
        }

        .small-card-image {
            position: relative;
            height: 160px;
            background: linear-gradient(135deg, #93c5fd, #bfdbfe);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .small-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .small-card-chip {
            position: absolute;
            top: 16px;
            left: 16px;
            background: #1d4ed8;
            color: #fff;
            font-size: 0.72rem;
            font-weight: 700;
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .small-card-menu {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.85);
            color: #1f2937;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 6px 12px rgba(15, 23, 42, 0.15);
        }

        .small-card-body {
            padding: 1.25rem 1.5rem 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            flex: 1;
        }

        .small-card-category {
            font-size: 0.78rem;
            font-weight: 700;
            color: #60a5fa;
            margin: 0;
            text-transform: uppercase;
        }

        .small-card-title {
            font-size: 1.15rem;
            font-weight: 700;
            color: #111827;
            margin: 0;
            line-height: 1.3;
        }

        .small-card-progress {
            display: flex;
            flex-direction: column;
            gap: 0.45rem;
        }

        .small-card-progress-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            font-weight: 600;
            color: #6b7280;
        }

        .small-card-progress-value {
            color: #10b981;
        }

        .small-progress {
            width: 100%;
            height: 6px;
            background: #e5e7eb;
            border-radius: 999px;
            overflow: hidden;
        }

        .small-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #34d399, #3b82f6);
        }

        .small-card-stat-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.75rem;
        }

        .small-stat-card {
            background: #f9fafb;
            border-radius: 14px;
            padding: 0.65rem 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0.15rem;
        }

        .small-stat-label {
            font-size: 0.72rem;
            font-weight: 600;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .small-stat-value {
            font-size: 1rem;
            font-weight: 700;
            color: #111827;
        }

        .small-card-footer {
            margin-top: auto;
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }

        .small-card-last-accessed {
            font-size: 0.78rem;
            color: #94a3b8;
            font-weight: 600;
        }

        .small-card-cta {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            color: #fff;
            border-radius: 12px;
            padding: 0.65rem 1rem;
            font-weight: 700;
            text-decoration: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .small-card-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(37, 99, 235, 0.3);
        }

        .small-course-slider {
            position: relative;
            margin-top: 1.25rem;
        }

        .small-course-slider.slider-disabled [data-slider-nav] {
            display: none;
        }

        .slider-viewport {
            overflow: hidden;
        }

        .slider-track {
            display: flex;
            gap: 1.25rem;
            scroll-behavior: smooth;
        }

        .slider-item {
            flex: 0 0 calc((100% - 2.5rem) / 3);
        }

        .slider-item:last-child {
            margin-right: 0;
        }

        .slider-viewport::-webkit-scrollbar {
            display: none;
        }

        .slider-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: rgba(15, 23, 42, 0.85);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(15, 23, 42, 0.25);
            transition: opacity 0.2s ease;
            z-index: 2;
        }

        .slider-nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .slider-nav-btn[data-slider-prev] {
            left: -20px;
        }

        .slider-nav-btn[data-slider-next] {
            right: -20px;
        }

        @media (max-width: 1400px) {
            .slider-item {
                flex: 0 0 calc((100% - 1.25rem) / 2);
            }
        }

        @media (max-width: 992px) {
            .slider-item {
                flex: 0 0 calc((100% - 1.25rem) / 2);
            }
            .slider-nav-btn[data-slider-prev] {
                left: -10px;
            }
            .slider-nav-btn[data-slider-next] {
                right: -10px;
            }
        }

        @media (max-width: 640px) {
            .slider-item {
                flex: 0 0 100%;
            }
            .slider-nav-btn {
                display: none;
            }
        }
        
        /* Highschool Dashboard - Make MAP test card match small-course-card style */
        .highschool-dashboard .small-course-card.maptest-course-card,
        .highschool-dashboard .enhanced-course-card.maptest-course-card {
            background: #ffffff;
            border-radius: 22px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(15, 23, 42, 0.08);
            display: flex;
            flex-direction: column;
            min-height: 100%;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            margin-bottom: 0;
        }
        
        .highschool-dashboard .small-course-card.maptest-course-card:hover,
        .highschool-dashboard .enhanced-course-card.maptest-course-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 30px 60px rgba(15, 23, 42, 0.15);
        }
        
        .highschool-dashboard .small-course-card.maptest-course-card .small-card-image {
            position: relative;
            height: 160px;
            background: linear-gradient(135deg, #93c5fd, #bfdbfe);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }
        
        .highschool-dashboard .small-course-card.maptest-course-card .small-card-chip {
            position: absolute;
            top: 16px;
            left: 16px;
            background: #1d4ed8;
            color: #fff;
            font-size: 0.72rem;
            font-weight: 700;
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            z-index: 2;
        }
        
        .highschool-dashboard .small-course-card.maptest-course-card .small-card-body {
            padding: 1.25rem 1.5rem 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            flex: 1;
            background: #ffffff;
        }
        
        .highschool-dashboard .small-course-card.maptest-course-card .small-card-footer {
            margin-top: auto;
            padding-top: 0;
            border-top: none;
        }
        
        .highschool-dashboard .small-course-card.maptest-course-card .small-card-cta {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            color: #fff;
            border-radius: 12px;
            padding: 0.65rem 1rem;
            font-weight: 700;
            text-decoration: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            width: 100%;
            border: none;
            box-shadow: none;
        }
        
        .highschool-dashboard .small-course-card.maptest-course-card .small-card-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(37, 99, 235, 0.3);
            color: #fff;
        }
        
        .highschool-dashboard .maptest-course-image {
            position: relative;
            height: 160px;
            background: linear-gradient(135deg, #93c5fd, #bfdbfe);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }
        
        .highschool-dashboard .maptest-course-chip {
            position: absolute;
            top: 16px;
            left: 16px;
            background: #1d4ed8;
            color: #fff;
            font-size: 0.72rem;
            font-weight: 700;
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            z-index: 2;
        }
        
        .highschool-dashboard .maptest-course-image .maptest-course-hero-text {
            position: absolute;
            bottom: 16px;
            left: 16px;
            right: 16px;
            text-align: left;
            z-index: 2;
        }
        
        .highschool-dashboard .maptest-course-title {
            font-size: 1.15rem;
            font-weight: 700;
            color: #111827;
            margin: 0 0 4px 0;
            line-height: 1.3;
        }
        
        .highschool-dashboard .maptest-course-subtitle {
            font-size: 0.85rem;
            color: #6b7280;
            margin: 0;
            font-weight: 500;
        }
        
        .highschool-dashboard .maptest-course-content {
            padding: 1.25rem 1.5rem 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            flex: 1;
            background: #ffffff;
        }
        
        .highschool-dashboard .maptest-course-content .course-summary {
            font-size: 0.875rem;
            color: #6b7280;
            margin: 0;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .highschool-dashboard .maptest-course-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.75rem;
        }
        
        .highschool-dashboard .maptest-course-stats-grid .stat-box {
            background: #f9fafb;
            border-radius: 14px;
            padding: 0.65rem 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        /* Ensure MAP test card stat boxes match small-stat-card style */
        .highschool-dashboard .small-course-card.maptest-course-card .small-card-stat-grid .stat-box {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.65rem 0.75rem;
        }
        
        .highschool-dashboard .small-course-card.maptest-course-card .small-card-stat-grid .stat-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.15rem;
        }
        
        .highschool-dashboard .small-course-card.maptest-course-card .small-card-stat-grid .stat-number {
            font-size: 1rem;
            font-weight: 700;
            color: #111827;
        }
        
        .highschool-dashboard .small-course-card.maptest-course-card .small-card-stat-grid .stat-label {
            font-size: 0.72rem;
            font-weight: 600;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .highschool-dashboard .maptest-course-stats-grid .stat-box .stat-icon {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            flex-shrink: 0;
        }
        
        .highschool-dashboard .maptest-course-stats-grid .stat-box:nth-child(1) .stat-icon {
            background: #667eea;
        }
        
        .highschool-dashboard .maptest-course-stats-grid .stat-box:nth-child(2) .stat-icon {
            background: #f59e0b;
        }
        
        .highschool-dashboard .maptest-course-stats-grid .stat-box:nth-child(3) .stat-icon {
            background: #10b981;
        }
        
        .highschool-dashboard .maptest-course-stats-grid .stat-box:nth-child(4) .stat-icon {
            background: #ef4444;
        }
        
        .highschool-dashboard .maptest-course-stats-grid .stat-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.15rem;
        }
        
        .highschool-dashboard .maptest-course-stats-grid .stat-number {
            font-size: 0.9rem;
            font-weight: 700;
            color: #1a202c;
            line-height: 1;
        }
        
        .highschool-dashboard .maptest-course-stats-grid .stat-label {
            font-size: 0.72rem;
            font-weight: 600;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .highschool-dashboard .maptest-course-content .course-actions {
            margin-top: auto;
            padding-top: 0;
            border-top: none;
        }
        
        .highschool-dashboard .maptest-start-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            color: #fff;
            border-radius: 12px;
            padding: 0.65rem 1rem;
            font-weight: 700;
            text-decoration: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            width: 100%;
            border: none;
            box-shadow: none;
        }
        
        .highschool-dashboard .maptest-start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(37, 99, 235, 0.3);
            color: #fff;
        }
        
        .stat-item .stat-icon {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
        }
        
        .stat-item:nth-child(1) .stat-icon { background: #667eea; }
        .stat-item:nth-child(2) .stat-icon { background: #f59e0b; }
        .stat-item:nth-child(3) .stat-icon { background: #10b981; }
        .stat-item:nth-child(4) .stat-icon { background: #ef4444; }
        
        .stat-info {
            flex: 1;
        }
        
        .stat-number {
            font-size: 0.9rem;
            font-weight: 700;
            color: #1a202c;
            line-height: 1;
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: #718096;
            margin-top: 0.2rem;
            font-weight: 600;
        }
        
        .course-actions {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }
        
        .course-button {
            flex: 1;
            padding: 0.6rem 0.8rem;
            border-radius: 6px;
            font-weight: 600;
            text-decoration: none;
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            font-size: 0.9rem;
        }
        
        .course-button.completed {
            background: #10b981;
            color: white;
        }
        
        .course-button.in-progress {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            color: white;
        }
        
        .course-button.not-started {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            color: white;
        }
        
        .course-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .course-details-btn {
            width: 36px;
            height: 36px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            background: white;
            color: #718096;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }
        
        .course-details-btn:hover {
            background: #f8fafc;
            border-color: #cbd5e0;
            color: #4a5568;
        }
        
        .course-details-panel {
            border-top: 1px solid #e2e8f0;
            padding: 0.75rem 1rem;
            background: #f8fafc;
        }
        
        .details-content h6 {
            color: #1a202c;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.4rem;
            font-size: 0.85rem;
        }
        .mySchedule{
            display:flex;
            justify-content: space-between;
        }
        .detail-item strong {
            color: #4a5568;
        }
        
        /* Course Grid Layout */
        .courses-static-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 1.25rem;
            padding: 0;
            margin: 0;
            align-items: stretch;
            justify-content: center;
        }
        
        @media (max-width: 1199px) {
            .courses-static-grid {
                grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            }
        }
        
        @media (max-width: 767px) {
            .courses-static-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }
        
        @media (max-width: 768px) {
            .courses-static-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .course-stats-grid {
                grid-template-columns: 1fr;
            }
            
            .course-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .course-grade {
                margin-left: 0;
                margin-top: 0.5rem;
            }
        }
        
        /* Schedule card height alignment */
        .middle-sidebar .schedule-section {
            min-height: 430px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        
        .schedule-section .calendar-week {
            margin-bottom: 1.25rem;
        }
        
        .schedule-section .upcoming-events {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .schedule-section .no-events {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 240px;
        }
        
        /* Badges Showcase Styles */
        .badges-showcase {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 10px 0;
        }
        
        .badge-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .badge-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .badge-item.achieved {
            background: linear-gradient(135deg, #fff9e6 0%, #fff5d6 100%);
            border: 1px solid #ffd700;
        }
        
        .badge-item.locked {
            background: #f1f3f5;
            border: 1px solid #dee2e6;
            opacity: 0.7;
        }
        
        .badge-icon-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            flex-shrink: 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }
        
        .badge-icon-circle.gold {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
            color: #fff;
            animation: goldShine 3s ease-in-out infinite;
        }
        
        .badge-icon-circle.grey {
            background: linear-gradient(135deg, #9e9e9e 0%, #bdbdbd 100%);
            color: #fff;
        }
        
        @keyframes goldShine {
            0%, 100% {
                box-shadow: 0 4px 10px rgba(255, 215, 0, 0.4);
            }
            50% {
                box-shadow: 0 4px 20px rgba(255, 215, 0, 0.8);
            }
        }
        
        .badge-details {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 3px;
        }
        
        .badge-name {
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .badge-status {
            font-size: 11px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge-status.earned {
            color: #d4af37;
        }
        
        .badge-status.pending {
            color: #6c757d;
        }
        
        /* Enhanced Active Sections and Learning Progress Styles */
        .enhanced-sections-row {
            margin-top: 30px;
            display: flex !important;
            flex-wrap: nowrap !important;
        }
        
        .enhanced-sections-row .col-lg-9,
        .enhanced-sections-row .col-lg-3 {
            display: flex !important;
            flex-direction: column !important;
            padding-left: 15px !important;
            padding-right: 15px !important;
        }
        
        .enhanced-sections-row .col-lg-9 {
            padding-right: 10px !important;
        }
        
        .enhanced-sections-row .col-lg-3 {
            padding-left: 10px !important;
        }
        
        /* Enhanced Active Sections - 80% */
        .enhanced-active-sections {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e9ecef;
            flex: 1;
        }
        
        .enhanced-section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f8f9fa;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .header-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }
        
        .header-content .section-title {
            font-size: 24px;
            font-weight: 700;
            color: #2c3e50;
            margin: 0 0 5px 0;
        }
        
        .header-content .section-subtitle {
            font-size: 14px;
            color: #6c757d;
            margin: 0;
        }
        
        .header-right .sections-count {
            background: #e3f2fd;
            color: #1976d2;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* List View Styles for Active Sections */
        .enhanced-sections-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .section-list-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .section-list-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }
        
        .section-list-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #4ECDC4 0%, #96CEB4 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .section-list-content {
            flex: 1;
            min-width: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .calendar-week{
            display: flex;
            justify-content: space-around;
        }
        .section-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .section-list-content .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin: 0;
            line-height: 1.3;
        }
        
        .section-status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .section-status-badge.completed {
            background: #d4edda;
            color: #28a745;
        }
        
        .section-status-badge.in-progress {
            background: #fff3cd;
            color: #ffc107;
        }
        
        .course-name {
            font-size: 13px;
            color: #6c757d;
            margin: 0 0 12px 0;
        }
        
        .section-progress-section {
            margin-bottom: 12px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }
        
        .progress-label {
            font-size: 11px;
            color: #6c757d;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .progress-percentage {
            font-size: 13px;
            color: #28a745;
            font-weight: 600;
        }
        
        .progress-bar-container {
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: #e9ecef;
            border-radius: 3px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ECDC4 0%, #96CEB4 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .section-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 0;
        }
        
        .section-stats .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 11px;
            color: #6c757d;
        }
        
        .section-stats .stat-item i {
            color: #667eea;
        }
        
        .section-list-actions {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-shrink: 0;
        }
        
        .continue-btn {
            flex: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            color: white;
            text-decoration: none;
        }
        
        .details-btn {
            width: 40px;
            height: 40px;
            border: 1px solid #e9ecef;
            background: white;
            border-radius: 8px;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .details-btn:hover {
            background: #f8f9fa;
            border-color: #667eea;
            color: #667eea;
        }
        
        .no-sections-placeholder {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            background: #f8f9fa;
            border-radius: 16px;
            border: 2px dashed #dee2e6;
        }
        
        .placeholder-icon {
            font-size: 48px;
            color: #6c757d;
            margin-bottom: 20px;
        }
        
        .no-sections-placeholder h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .no-sections-placeholder p {
            color: #6c757d;
            margin-bottom: 25px;
        }
        
        .start-learning-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .start-learning-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            color: white;
            text-decoration: none;
        }
        
        /* Learning Progress Sidebar - 20% */
        .learning-progress-sidebar {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e9ecef;
            height: auto;
            flex: 1;
        }
        
        .progress-header .progress-title {
            font-size: 20px;
            font-weight: 700;
            color: #2c3e50;
            margin: 0 0 20px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-header .progress-title i {
            color: #667eea;
        }
        
        .progress-stats {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .progress-stat-card {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .progress-stat-card:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .progress-stat-card .stat-icon {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }
        
        .progress-stat-card:nth-child(1) .stat-icon {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .progress-stat-card:nth-child(2) .stat-icon {
            background: linear-gradient(135deg, #4ECDC4 0%, #96CEB4 100%);
        }
        
        .progress-stat-card:nth-child(3) .stat-icon {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        }
        
        .progress-stat-card:nth-child(4) .stat-icon {
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E8E 100%);
        }
        
        .progress-stat-card .stat-content {
            flex: 1;
        }
        
        .progress-stat-card .stat-number {
            font-size: 16px;
            font-weight: 700;
            color: #2c3e50;
            line-height: 1;
        }
        
        .progress-stat-card .stat-label {
            font-size: 11px;
            color: #6c757d;
            margin-top: 2px;
            font-weight: 500;
        }
        
        .announcements{
            display: flex;
            justify-content: space-around;
        }
        .hs-announcements-block, .hs-quick-links{
            width:50%;
        }
       
        .highNotify{
            height:100%
        }
        .showbtn{
            background:linear-gradient(135deg, #2563eb, #3b82f6) !important;
            box-shadow: 0 4px 15px transparent !important;
        }
        .showbtn:hover {
           transform: translateY(-2px);
           box-shadow: 0 12px 25px rgba(37, 99, 235, 0.3);
           color: #0041c7 !important;
        }
        body:not(.path-course-view) .highschool-dashboard, body:not(.path-course-view) .custom_dashboard .highschool-dashboard{
            margin-top: 0px !important;
        }
        /* Responsive Design */
        @media (max-width: 1200px) {
            .enhanced-sections-list {
                gap: 12px;
            }
        }
        
        @media (max-width: 768px) {
            .enhanced-sections-row {
                flex-direction: column;
            }
            
            .enhanced-section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .header-right {
                align-self: flex-end;
            }
            
            .section-list-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .section-list-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .section-stats {
                flex-direction: column;
                gap: 8px;
            }
            
            .progress-stats {
                gap: 10px;
            }
        }
    </style>
        {{> theme_remui_kids/highschool_sidebar }}
 
        <div class="highschool-dashboard-wrapper">
         <div class="highschool-dashboard">
                <section class="hs-hero">
                    <!-- Animated Background Elements -->
                    <div class="hs-hero-bg-animation">
                        <!-- Floating Orbs -->
                        <div class="hs-hero-orb"></div>
                        <div class="hs-hero-orb"></div>
                        <div class="hs-hero-orb"></div>
                        <div class="hs-hero-orb"></div>
                        <div class="hs-hero-orb"></div>
                        <!-- Geometric Shapes -->
                        <div class="hs-hero-shape"></div>
                        <div class="hs-hero-shape"></div>
                        <!-- Sparkle Particles -->
                        <div class="hs-hero-sparkle"></div>
                        <div class="hs-hero-sparkle"></div>
                        <div class="hs-hero-sparkle"></div>
                        <div class="hs-hero-sparkle"></div>
                        <div class="hs-hero-sparkle"></div>
                        <!-- Wave Lines -->
                        <div class="hs-hero-wave"></div>
                    </div>
                    
                    <div class="hs-hero-text">
                        <h1>Welcome {{user_fullname}}</h1>
                    </div>

                </section>
                                    {{#highschool_stats}}
                    <div class="hs-hero-stats">
                        <div class="hs-hero-stat">
                            <span class="label">Courses</span>
                            <span class="value">{{courses}}</span>
                             </div>
                        <div class="hs-hero-stat">
                            <span class="label">Activities</span>
                            <span class="value">{{activities}}</span>
                         </div>
                        <div class="hs-hero-stat">
                            <span class="label">Progress</span>
                            <span class="value">{{progress}}%</span>
                     </div>
                         </div>
                    {{/highschool_stats}}
                    <div class="courseSubject" style="display: flex" >
                 <section class="hs-surface-card hs-course-overview" id="courseOverview">
                            <div class="hs-block-title">
                                <div>
                                    <h3>Course Overview</h3>
                                    <p>Track active subjects and jump back in instantly.</p>
                         </div>
                                {{#show_view_all_button}}
                                <a href="{{{mycoursesurl}}}" class="hs-inline-link">View all <i class="fa fa-arrow-right"></i></a>
                                {{/show_view_all_button}}
                     </div>
                        {{#has_highschool_courses}}
                            <div class="small-course-slider" id="highschoolCourseSlider" data-visible="3">
                                <button class="slider-nav-btn" data-slider-nav data-slider-prev aria-label="Previous courses">
                                    <i class="fa fa-chevron-left"></i>
                                </button>
                                <div class="slider-viewport">
                                    <div class="slider-track">
                                {{#show_maptest_card}}
                                {{#maptest_card}}
                                <div class="slider-item">
                                    <div class="small-course-card enhanced-course-card maptest-course-card" data-maptest-card="true">
                                        <div class="small-card-image maptest-course-image">
                                            <div class="small-card-chip maptest-course-chip">MAP Practice</div>
                                            <div class="maptest-course-hero-text" style="position: absolute; bottom: 16px; left: 16px; right: 16px; text-align: left; z-index: 2;">
                                                <h4 class="small-card-title maptest-course-title" style="color: #111827; margin: 0 0 4px 0;">{{title}}</h4>
                                                <p class="maptest-course-subtitle" style="font-size: 0.85rem; color: #6b7280; margin: 0; font-weight: 500;">Boost confidence before assignments</p>
                                            </div>
                                        </div>
                                        <div class="small-card-body maptest-course-content">
                                            <p class="course-summary" style="font-size: 0.875rem; color: #6b7280; margin: 0 0 1rem 0; line-height: 1.5;">{{{description}}}</p>
                                            <div class="small-card-stat-grid maptest-course-stats-grid">
                                                <div class="small-stat-card stat-box">
                                                    <i class="fa fa-compass stat-icon" style="width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; background: #667eea; flex-shrink: 0;"></i>
                                                    <div class="stat-content" style="flex: 1; display: flex; flex-direction: column; gap: 0.15rem;">
                                                        <span class="small-stat-value stat-number">Adaptive</span>
                                                        <span class="small-stat-label stat-label">Skill focus</span>
                                                    </div>
                                                </div>
                                                <div class="small-stat-card stat-box">
                                                    <i class="fa fa-bolt stat-icon" style="width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; background: #f59e0b; flex-shrink: 0;"></i>
                                                    <div class="stat-content" style="flex: 1; display: flex; flex-direction: column; gap: 0.15rem;">
                                                        <span class="small-stat-value stat-number">Quick</span>
                                                        <span class="small-stat-label stat-label">Readiness</span>
                                                    </div>
                                                </div>
                                                <div class="small-stat-card stat-box">
                                                    <i class="fa fa-tasks stat-icon" style="width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; background: #10b981; flex-shrink: 0;"></i>
                                                    <div class="stat-content" style="flex: 1; display: flex; flex-direction: column; gap: 0.15rem;">
                                                        <span class="small-stat-value stat-number">Reports</span>
                                                        <span class="small-stat-label stat-label">Instant view</span>
                                                    </div>
                                                </div>
                                                <div class="small-stat-card stat-box">
                                                    <i class="fa fa-user-check stat-icon" style="width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; background: #ef4444; flex-shrink: 0;"></i>
                                                    <div class="stat-content" style="flex: 1; display: flex; flex-direction: column; gap: 0.15rem;">
                                                        <span class="small-stat-value stat-number">Teachers</span>
                                                        <span class="small-stat-label stat-label">Get alerts</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="small-card-footer course-actions">
                                                <a href="#" class="small-card-cta maptest-start-btn" data-maptest-url="{{url}}" data-maptest-username="{{username}}" data-maptest-sso="{{#enablesso}}true{{/enablesso}}{{^enablesso}}false{{/enablesso}}" data-maptest-ssourl="{{ssourl}}" data-maptest-baseurl="{{maptesturl}}">
                                                    <i class="fa fa-rocket"></i> {{button}}
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {{/maptest_card}}
                                {{/show_maptest_card}}
                                {{#highschool_courses}}
                                        <div class="slider-item">
                                            <div class="small-course-card" data-course-id="{{id}}">
                                                <div class="small-card-image">
                                                    {{#courseimage}}
                                                    <img src="{{courseimage}}" alt="{{fullname}}">
                                                    {{/courseimage}}
                                                    {{^courseimage}}
                                                    <i class="fa fa-book fa-2x" style="color: #ffffff;"></i>
                                                    {{/courseimage}}
                                                    <span class="small-card-chip">{{grade_level}}</span>
                                                    <button type="button" class="small-card-menu" aria-label="Course options">
                                                        <i class="fa fa-ellipsis-v"></i>
                                                    </button>
                                                </div>

                                                <div class="small-card-body">
                                                    <p class="small-card-category">{{categoryname}}</p>
                                                    <h4 class="small-card-title">{{fullname}}</h4>

                                                    <div class="small-card-progress">
                                                        <div class="small-card-progress-labels">
                                                            <span>Your Progress</span>
                                                            <span class="small-card-progress-value">{{progress_percentage}}%</span>
                                                        </div>
                                                        <div class="small-progress">
                                                            <div class="small-progress-fill" style="width: {{progress_percentage}}%"></div>
                                                        </div>
                                                    </div>

                                                    <div class="small-card-stat-grid">
                                                        <div class="small-stat-card">
                                                            <span class="small-stat-label">Lessons</span>
                                                            <span class="small-stat-value">{{completed_sections}}/{{total_sections}}</span>
                                                        </div>
                                                        <div class="small-stat-card">
                                                            <span class="small-stat-label">Activities</span>
                                                            <span class="small-stat-value">{{completed_activities}}/{{total_activities}}</span>
                                                        </div>
                                                        <div class="small-stat-card">
                                                            <span class="small-stat-label">Minutes</span>
                                                            <span class="small-stat-value">{{estimated_time}}</span>
                                                        </div>
                                                    </div>

                                                    <div class="small-card-footer">
                                                        <span class="small-card-last-accessed">Last accessed {{last_accessed}}</span>
                                                        {{#completed}}
                                                        <a href="{{courseurl}}" class="small-card-cta">
                                                            <i class="fa fa-check"></i> Review Course
                                                        </a>
                                                        {{/completed}}
                                                        {{^completed}}
                                                        {{#in_progress}}
                                                        <a href="{{courseurl}}" class="small-card-cta">
                                                            <i class="fa fa-play"></i> Continue Course
                                                        </a>
                                                        {{/in_progress}}
                                                        {{^in_progress}}
                                                        <a href="{{courseurl}}" class="small-card-cta">
                                                            <i class="fa fa-play"></i> Start Course
                                                        </a>
                                                        {{/in_progress}}
                                                        {{/completed}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                {{/highschool_courses}}
                                    </div>
                                </div>
                                <button class="slider-nav-btn" data-slider-nav data-slider-next aria-label="Next courses">
                                    <i class="fa fa-chevron-right"></i>
                                </button>
                            </div>
                            {{/has_highschool_courses}}
                            {{^has_highschool_courses}}
                            <div class="hs-empty-state">
                                <p>No courses to show yet. Enroll in a class to populate this space.</p>
                        </div>
                        {{/has_highschool_courses}}
                        </section> 
                                            <section class="hs-surface-card hs-subject-share">
                        <div class="hs-block-title">
                            <div>
                                <h3>Subject Focus</h3>
                                <p>See where your recent effort is concentrated.</p>
                            </div>
                        </div>
                        <div class="subject-insights-grid">
                            <div class="subject-chart-wrap">
                                <canvas id="subjectChart" height="240"></canvas>
                            </div>
                            <div class="subject-legend">
                                {{#highschool_subject_distribution.subjects}}
                                <div class="subject-legend-item">
                                    <span class="legend-dot" style="background-color: {{color}};"></span>
                                    <div>
                                        <p>{{label}}</p>
                                        <small>{{avg_progress}}% avg progress â€¢ {{courses}} courses</small>
                                    </div>
                                </div>
                                {{/highschool_subject_distribution.subjects}}
                                {{^highschool_subject_distribution.subjects}}
                                <div class="hs-empty-state">
                                    <p>Enroll in a course to populate subject insights.</p>
                                </div>
                                {{/highschool_subject_distribution.subjects}}
                            </div>
                        </div>
                    </section>
                    </div>
                    {{#has_highschool_active_lessons}}
                    <section class="hs-surface-card hs-lessons-activities">
                  <div class="row mb-4 mt-2">
                <div class="col-12">
                    <div>
                        <h3 class="sections-section-title">
                            <span> Active Lessons</span>
                             <a href="{{{lessonsurl}}}" class="view-all-link">View All &gt;</a>
                        </h3>
                       
                    </div>
                    <div class="elementary-sections-container">
                        {{#highschool_active_lessons}}
                        <div class="elementary-section-card">
                            <div class="section-content">
                                <div class="section-header">
                                    <h4 class="section-title">
                                        {{#section_name}}{{section_name}}{{/section_name}}{{^section_name}}{{name}}{{/section_name}}
                                    </h4>
                                    <span class="section-course">
                                        {{#course_name}}{{course_name}}{{/course_name}}{{^course_name}}{{coursename}}{{/course_name}}
                                    </span>
                                </div>
                                
                                <!-- Section Stats -->
                                <div class="section-stats">
                                    <div class="section-stat-item">
                                        {{#all_completed}}
                                        <i class="fa fa-check-circle" style="color: #27ae60;"></i>
                                        <span>{{activity_count}} activities completed</span>
                                        {{/all_completed}}
                                        {{^all_completed}}
                                        <i class="fa fa-tasks" style="color: #818cf8;"></i>
                                        <span>{{completed_activities}}/{{activity_count}} activities</span>
                                        {{/all_completed}}
                                    </div>
                                </div>
                                
                                <a href="{{{url}}}" class="section-button showbtn">
                                    {{#all_completed}}<i class="fa fa-eye"></i> View Section{{/all_completed}}
                                    {{^all_completed}}<i class="fa fa-play"></i> Continue Section{{/all_completed}}
                                </a>
                            </div>
                        </div>
                        {{/highschool_active_lessons}}
                    </div>
                </div>
            </div>
        </section>
            {{/has_highschool_active_lessons}}
            {{/highschool}}
                    {{#has_highschool_active_activities}}
                    <section class="hs-surface-card hs-active-activities">
                        <div class="row mb-4">
                            <div class="col-12">
                                <div>
                                    <h3 class="lessons-section-title">
                                        <span> Active Activities</span>
                                        <a href="{{{activitiesurl}}}" class="view-all-link">View All &gt;</a>
                                    </h3>
                                </div>
                                <div class="elementary-lessons-container">
                                    {{#highschool_active_activities}}
                                    <a href="{{{url}}}" class="elementary-lesson-card {{#in_progress}}in-progress{{/in_progress}} {{#not_started}}not-started{{/not_started}}" data-status="{{#in_progress}}in-progress{{/in_progress}}{{^in_progress}}{{#not_started}}not-started{{/not_started}}{{/in_progress}}">
                                        <div class="lesson-content">
                                            <div class="lesson-icon-wrapper-centered">
                                                <div class="lesson-icon-container-centered">
                                                    <i class="fa fa-star"></i>
                                                </div>
                                                <span class="lesson-status-dot {{#in_progress}}in-progress{{/in_progress}} {{#not_started}}not-started{{/not_started}}"></span>
                                            </div>

                                            <div class="lesson-header">
                                                <h4 class="lesson-title" style="text-transform: uppercase; font-weight: 700;">{{name}}</h4>
                                                {{#has_rubric}}
                                                <span class="rubric-badge"><i class="fa fa-check-square"></i> Rubric</span>
                                                {{/has_rubric}}
                                            </div>

                                            <span class="lesson-course" style="display: inline-block; padding: 0.25rem 0.75rem; background: #f1f5f9; border-radius: 12px; font-size: 0.75rem; color: #64748b; margin-top: 0.5rem; max-width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{course_name}}</span>
                                            
                                            {{#in_progress}}
                                            <div class="lesson-status-badge in-progress">
                                                <i class="fa fa-clock-o"></i> In Progress
                                            </div>
                                            {{/in_progress}}
                                            {{#not_started}}
                                            <div class="lesson-status-badge not-started">
                                                <i class="fa fa-play-circle"></i> Not Started
                                            </div>
                                            {{/not_started}}
                                        </div>
                                    </a>
                                    {{/highschool_active_activities}}
                                </div>
                            </div>
                        </div>
                    </section>
                    {{/has_highschool_active_activities}}
                

                    {{#has_highschool_available_courses}}
                    <section class="hs-surface-card hs-available-courses">
                        <div class="hs-block-title">
                            <div>
                                <h3>Available Courses</h3>
                                <p>Discover new courses and expand your learning journey.</p>
                            </div>
                            <a href="{{{mycoursesurl}}}" class="hs-inline-link">Browse all <i class="fa fa-arrow-right"></i></a>
                        </div>
                        <div class="hs-available-courses-grid">
                            {{#highschool_available_courses}}
                            <div class="hs-available-course-card">
                                {{#courseimage}}
                                <div class="hs-course-image" style="background-image: url('{{courseimage}}');">
                                    <div class="hs-course-overlay"></div>
                                </div>
                                {{/courseimage}}
                                {{^courseimage}}
                                <div class="hs-course-image hs-course-image-placeholder">
                                    <i class="fa fa-book"></i>
                                </div>
                                {{/courseimage}}
                                <div class="hs-course-content">
                                    <div class="hs-course-category">{{category}}</div>
                                    <h4 class="hs-course-title">{{fullname}}</h4>
                                    {{#summary}}
                                    <p class="hs-course-summary">{{summary}}</p>
                                    {{/summary}}
                                    <div class="hs-course-actions">
                                        {{#can_enroll}}
                                        <a href="{{{enroll_url}}}" class="hs-enroll-btn">
                                            <i class="fa fa-plus-circle"></i> Enroll Now
                                        </a>
                                        {{/can_enroll}}
                                        {{^can_enroll}}
                                        <a href="{{{course_url}}}" class="hs-view-btn">
                                            <i class="fa fa-eye"></i> View Course
                                        </a>
                                        {{/can_enroll}}
                                    </div>
                                </div>
                            </div>
                            {{/highschool_available_courses}}
                        </div>
                    </section>
                    {{/has_highschool_available_courses}}
                <div class="hs-insights-grid">
                    {{#highschool}}
                    <section class="hs-surface-card hs-schedule-card">
                        <div class="sidebar-section">
                            <h4 class="sidebar-title mySchedule">
                                <span><i class="fa fa-calendar"></i> My Schedule</span>
                                <span><a href="{{config.wwwroot}}/theme/remui_kids/highschool_calendar.php" class="view-full-link"><p>View Schedule </p></a></span>
                            </h4>
                            <p class="schedule-subtitle">Next 7 Days</p>
                            <div class="calendar-week">
                                {{#calendar_week}}
                                <div class="calendar-day {{#has_events}}has-events{{/has_events}}" data-date="{{date}}">
                                    <div class="day-name">{{day_name}}</div>
                                    <div class="day-number">{{day_number}}</div>
                                    {{#has_events}}
                                    <div class="event-indicator">
                                        <div class="event-dot"></div>
                                    </div>
                                    {{/has_events}}
                                </div>
                                {{/calendar_week}}
                            </div>

                            <div class="upcoming-events">
                                {{#upcoming_events}}
                                <a href="{{event_url}}" class="event-item" target="_blank">
                                    <div class="event-date">
                                        <span class="event-day">{{event_day}}</span>
                                        <span class="event-month">{{event_month}}</span>
                                    </div>
                                    <div class="event-details">
                                        <div class="event-title">{{event_title}}</div>
                                        <div class="event-time">{{event_time}}</div>
                                        <div class="event-course">{{course_name}}</div>
                                    </div>
                                    <div class="event-type {{event_type}}">
                                        <i class="fa {{event_icon}}"></i>
                                    </div>
                                </a>
                                {{/upcoming_events}}
                                {{^upcoming_events}}
                                <div class="no-events">
                                    <i class="fa fa-calendar-o"></i>
                                    <p>No upcoming events in the next 7 days</p>
                                </div>
                                {{/upcoming_events}}
                            </div>
                        </div>
                    </section>
                    {{/highschool}}
{{#highschool}}
                    <section class="hs-surface-card hs-notifications-panel highNotify">
                        <div class="hs-block-title">
                            <div>
                                <h3>Notifications</h3>
                                <p>Latest activity across your sections.</p>
                            </div>
                        </div>
                        <div class="hs-notification-list">
                            {{#highschool_notifications}}
                            <div class="hs-notification">
                                <div>
                                    <p>{{title}}</p>
                                    <span class="meta">{{time_ago}}{{#course}} â€¢ {{course}}{{/course}}</span>
                                    {{#message}}
                                    <span class="hs-notification-excerpt">{{.}}</span>
                                    {{/message}}
                                </div>
                                {{#url}}
                                <a href="{{url}}" class="hs-inline-link" target="_blank">Open <i class="fa fa-arrow-right"></i></a>
                                {{/url}}
                            </div>
                            {{/highschool_notifications}}
                            {{^highschool_notifications}}
                            <div class="hs-empty-state">
                                <p>No active notifications. You're all caught up.</p>
                            </div>
                            {{/highschool_notifications}}
                        </div>
                    </section>
                     {{/highschool}}
                </div>
{{#highschool}}
                       <section class="hs-surface-card hs-performance-trend">
                        <div class="hs-block-title">
                            <div>
                                <h3>Performance Trend</h3>
                                <p>Track course progress vs. grades across your enrolled classes.</p>
                            </div>
                        </div>
                        {{#has_highschool_performance_trend}}
                        <div class="chart-container">
                            <canvas id="performanceTrendChart" height="280"></canvas>
                        </div>
                        {{/has_highschool_performance_trend}}
                        {{^has_highschool_performance_trend}}
                        <div class="hs-empty-state">
                            <p>Performance insights will appear once you have graded courses.</p>
                        </div>
                        {{/has_highschool_performance_trend}}
                    </section>
{{/highschool}}
                  {{#highschool}}
                  
        </div>
        </div>
    {{/highschool}}
     
     <!-- High School Dashboard JavaScript -->
    <script>
    let hsWeeklyActivityData = null;
    const hsPerformanceTrendData = {{#highschool_performance_trend_json}}{{{highschool_performance_trend_json}}}{{/highschool_performance_trend_json}}{{^highschool_performance_trend_json}}null{{/highschool_performance_trend_json}};
    const hsSubjectDistributionData = {{#highschool_subject_distribution_json}}{{{highschool_subject_distribution_json}}}{{/highschool_subject_distribution_json}}{{^highschool_subject_distribution_json}}null{{/highschool_subject_distribution_json}};
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize enhanced sidebar for high school
        const enhancedSidebar = document.querySelector('.enhanced-sidebar');
        if (enhancedSidebar) {
            document.body.classList.add('has-student-sidebar', 'has-enhanced-sidebar');
            console.log('Enhanced sidebar initialized for high school dashboard');
        }
        
        // Initialize enhanced dropdown functionality
        initializeEnhancedDropdowns();
        
        // Initialize sticky navbar with scroll effects
        initializeStickyNavbar();
        initializeAssignmentsList();
        initializeCalendarToggleView();
        initializeHighschoolCourseSlider();
    
    // Enhanced dropdown functionality
    function initializeEnhancedDropdowns() {
        console.log('Initializing enhanced dropdowns...');
        
        // Find all dropdown toggles
        const dropdownToggles = document.querySelectorAll('.dropdown-toggle, .user-avatar, [data-toggle="dropdown"]');
        
        dropdownToggles.forEach(toggle => {
            // Add click event listener
            toggle.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const dropdown = this.closest('.dropdown');
                const menu = dropdown ? dropdown.querySelector('.dropdown-menu') : null;
                
                if (menu) {
                    // Close all other dropdowns
                    document.querySelectorAll('.dropdown-menu.show').forEach(openMenu => {
                        if (openMenu !== menu) {
                            openMenu.classList.remove('show');
                            openMenu.style.display = 'none';
                        }
                    });
                    
                    // Toggle current dropdown
                    const isOpen = menu.classList.contains('show');
                    
                    if (isOpen) {
                        menu.classList.remove('show');
                        menu.style.display = 'none';
                    } else {
                        menu.classList.add('show');
                        menu.style.display = 'block';
                        
                        // Position dropdown properly
                        positionDropdown(menu, this);
                    }
                }
            });
            
            // Add hover effects
            toggle.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.05)';
            });
            
            toggle.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
            });
        });
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.dropdown')) {
                document.querySelectorAll('.dropdown-menu.show').forEach(menu => {
                    menu.classList.remove('show');
                    menu.style.display = 'none';
                });
            }
        });
        
        // Add smooth animations to dropdown items
        const dropdownItems = document.querySelectorAll('.dropdown-item');
        dropdownItems.forEach((item, index) => {
            item.style.animationDelay = `${index * 0.05}s`;
            item.classList.add('dropdown-item-animated');
        });
    }
    
    // Position dropdown properly
    function positionDropdown(menu, toggle) {
        const rect = toggle.getBoundingClientRect();
        const menuRect = menu.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        
        // Reset positioning
        menu.style.top = '';
        menu.style.left = '';
        menu.style.right = '';
        menu.style.bottom = '';
        
        // Position horizontally
        if (rect.right + menuRect.width > viewportWidth) {
            menu.style.right = '0';
        } else {
            menu.style.left = '0';
        }
        
        // Position vertically
        if (rect.bottom + menuRect.height > viewportHeight) {
            menu.style.bottom = '100%';
            menu.style.top = 'auto';
        } else {
            menu.style.top = '100%';
            menu.style.bottom = 'auto';
        }
    }
    
    // Initialize sticky navbar functionality
    function initializeStickyNavbar() {
        console.log('Initializing sticky navbar...');
        
        const navbar = document.querySelector('.navbar, .top-navbar, .header-nav');
        if (!navbar) return;
        
        let lastScrollTop = 0;
        const scrollThreshold = 50;
        
        // Add scroll event listener
        window.addEventListener('scroll', function() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            // Add/remove scrolled class based on scroll position
            if (scrollTop > scrollThreshold) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
            
            // Optional: Hide/show navbar on scroll (uncomment if desired)
            /*
            if (scrollTop > lastScrollTop && scrollTop > 100) {
                // Scrolling down - hide navbar
                navbar.style.transform = 'translateY(-100%)';
            } else {
                // Scrolling up - show navbar
                navbar.style.transform = 'translateY(0)';
            }
            */
            
            lastScrollTop = scrollTop;
        });
        
        // Ensure navbar is visible on page load
        navbar.style.transform = 'translateY(0)';
        navbar.style.transition = 'transform 0.3s ease, box-shadow 0.2s ease, background 0.2s ease';
        
        console.log('Sticky navbar initialized successfully');
    }
        
        // Initialize all components
        initializeProgressRings();
        initializeInteractiveElements();
        initializeAnalytics();
        initializeAnimations();
        
        // Initialize charts only for high school dashboard
        const highschoolDashboard = document.querySelector('.highschool-dashboard');
        console.log('High school dashboard found:', highschoolDashboard);
        if (highschoolDashboard) {
            console.log('Initializing charts for high school dashboard...');
            
            // Initialize enhanced dashboard features
            initializeHighSchoolDashboard();
            
            // Wait for Chart.js to load
            if (typeof Chart !== 'undefined') {
                initializeCharts();
            } else {
                console.log('Chart.js not loaded yet, waiting...');
                // Try again after a short delay
                setTimeout(() => {
                    if (typeof Chart !== 'undefined') {
                        console.log('Chart.js loaded after delay, initializing charts...');
                        initializeCharts();
                    } else {
                        console.error('Chart.js still not loaded after delay');
                    }
                }, 1000);
            }
        } else {
            console.log('No high school dashboard found, skipping chart initialization');
        }
        
        // Enhanced High School Dashboard Functions
        function initializeHighSchoolDashboard() {
            console.log('Initializing enhanced high school dashboard features...');
            
            // Animate metric cards on load
            animateMetricCards();
            
            // Add hover effects to metric cards
            addMetricCardHoverEffects();
            
            // Initialize dashboard actions
            initializeDashboardActions();
            
            // Add real-time updates simulation
            simulateRealTimeUpdates();
        }
        
        function animateMetricCards() {
            const metricCards = document.querySelectorAll('.metric-card');
            metricCards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 150);
            });
        }
        
        function addMetricCardHoverEffects() {
            const metricCards = document.querySelectorAll('.metric-card');
            metricCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });
        }
        
        function initializeDashboardActions() {
            const dashboardActions = document.querySelectorAll('.dashboard-actions .btn');
            dashboardActions.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    // Add click animation
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 150);
                });
            });
        }
        
        function simulateRealTimeUpdates() {
            // Simulate real-time metric updates every 30 seconds
            setInterval(() => {
                updateMetricValues();
            }, 30000);
        }
        
        function updateMetricValues() {
            const metricValues = document.querySelectorAll('.metric-value');
            metricValues.forEach(value => {
                const currentValue = parseInt(value.textContent);
                if (!isNaN(currentValue)) {
                    // Add subtle animation to indicate update
                    value.style.color = '#7dd3fc';
                    setTimeout(() => {
                        value.style.color = '#1e293b';
                    }, 1000);
                }
            });
        }

        function initializeAssignmentsList() {
            const assignmentList = document.getElementById('hsAssignmentsList');
            if (!assignmentList) {
                return;
            }
            const cards = Array.from(assignmentList.querySelectorAll('.hs-assignment-card'));
            if (!cards.length) {
                return;
            }
            const allowedTypes = ['assign', 'assignment', 'quiz', 'lesson'];
            let visibleCount = 0;

            cards.forEach(card => {
                const type = (card.dataset.eventType || '').toLowerCase();
                const isAllowed = allowedTypes.some(token => type.includes(token));
                if (!isAllowed) {
                    card.style.display = 'none';
                    return;
                }

                visibleCount++;
                const dueDate = parseInt(card.dataset.eventDate, 10);
                if (Number.isNaN(dueDate)) {
                    return;
                }

                const diffDays = (dueDate * 1000 - Date.now()) / (1000 * 60 * 60 * 24);
                let urgencyClass = 'due-later';
                let labelText = 'Upcoming';

                if (diffDays <= 0.5) {
                    urgencyClass = 'due-now';
                    labelText = 'Due Soon';
                } else if (diffDays <= 2) {
                    urgencyClass = 'due-soon';
                    labelText = 'Due Next';
                }

                card.classList.add(urgencyClass);
                const pill = card.querySelector('.hs-assignment-pill');
                if (pill) {
                    pill.textContent = labelText;
                }
            });

            if (!visibleCount) {
                assignmentList.innerHTML = '<div class="hs-empty-state"><p>No graded work due right now.</p></div>';
            }
        }

        function initializeHighschoolCourseSlider() {
            const slider = document.getElementById('highschoolCourseSlider');
            if (!slider) {
                return;
            }

            const viewport = slider.querySelector('.slider-viewport');
            const prevBtn = slider.querySelector('[data-slider-prev]');
            const nextBtn = slider.querySelector('[data-slider-next]');
            const items = slider.querySelectorAll('.slider-item');
            const visibleCount = parseInt(slider.dataset.visible || '3', 10);

            if (!viewport || !items.length || !prevBtn || !nextBtn) {
                return;
            }

            const disableNav = () => {
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                slider.classList.add('slider-disabled');
            };

            if (items.length <= visibleCount) {
                disableNav();
                return;
            }

            const updateButtons = () => {
                const maxScrollLeft = viewport.scrollWidth - viewport.clientWidth - 5;
                prevBtn.disabled = viewport.scrollLeft <= 5;
                nextBtn.disabled = viewport.scrollLeft >= maxScrollLeft;
            };

            prevBtn.addEventListener('click', () => {
                viewport.scrollBy({ left: -viewport.clientWidth, behavior: 'smooth' });
            });

            nextBtn.addEventListener('click', () => {
                viewport.scrollBy({ left: viewport.clientWidth, behavior: 'smooth' });
            });

            viewport.addEventListener('scroll', updateButtons, { passive: true });
            window.addEventListener('resize', updateButtons);
            updateButtons();
        }

        function initializeCalendarToggleView() {
            const toggleButtons = document.querySelectorAll('.hs-calendar-toggle button');
            const calendarSections = document.querySelectorAll('[data-calendar-view]');
            if (!toggleButtons.length || !calendarSections.length) {
                return;
            }

            const updateVisibility = (view) => {
                calendarSections.forEach(section => {
                    const type = section.getAttribute('data-calendar-view');
                    const displayValue = type === 'week' ? 'grid' : 'block';
                    section.style.display = type === view ? displayValue : 'none';
                });
            };

            toggleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    toggleButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    updateVisibility(button.dataset.calendarToggle);
                });
            });

            updateVisibility('week');
        }
    });
    
    function initializeProgressRings() {
        const progressRings = document.querySelectorAll('.progress-ring-fill');
        progressRings.forEach(ring => {
            const progress = ring.closest('.course-progress-circle').querySelector('.progress-text').textContent;
            const percentage = parseInt(progress.replace('%', ''));
            const circumference = 2 * Math.PI * 26; // radius = 26
            const offset = circumference - (percentage / 100) * circumference;
            
            ring.style.strokeDasharray = circumference;
            ring.style.strokeDashoffset = offset;
        });
    }
    
    function initializeInteractiveElements() {
        // Time selector buttons
        const timeBtns = document.querySelectorAll('.time-btn');
        timeBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                // Remove active class from all buttons
                timeBtns.forEach(b => b.classList.remove('active'));
                // Add active class to clicked button
                this.classList.add('active');
                
                const period = this.dataset.period;
                updateAnalyticsData(period);
            });
        });
        
        // Course filter
        const courseFilter = document.querySelector('.filter-select');
        if (courseFilter) {
            courseFilter.addEventListener('change', function() {
                console.log('Course filter changed to:', this.value);
                filterCourses(this.value);
            });
        }
        
        
        // Deadline action buttons
        const deadlineActions = document.querySelectorAll('.deadline-action button');
        deadlineActions.forEach(btn => {
            btn.addEventListener('click', function() {
                const action = this.textContent.trim();
                console.log('Deadline action:', action);
                
                // Add visual feedback
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 150);
                
                handleDeadlineAction(action, this);
            });
        });
    }
    
    function initializeCharts() {
        console.log('initializeCharts called');
        console.log('Chart.js available:', typeof Chart !== 'undefined');
        
        // Weekly Activity Chart
        const weeklyActivityCtx = document.getElementById('weeklyActivityChart');
        console.log('Weekly activity canvas found:', weeklyActivityCtx);
        if (weeklyActivityCtx) {
            // Get weekly activity data from template
            let weeklyActivityData;
            {{#weekly_activity_json}}
            try {
                const jsonString = '{{{weekly_activity_json}}}';
                console.log('Raw JSON string:', jsonString);
                weeklyActivityData = JSON.parse(jsonString);
                console.log('Parsed weekly activity data:', weeklyActivityData);
                console.log('Data array:', weeklyActivityData.data);
                console.log('Completion data:', weeklyActivityData.completion_data);
                console.log('Quiz counts:', weeklyActivityData.quiz_counts);
                hsWeeklyActivityData = weeklyActivityData;
            } catch (e) {
                console.error('Error parsing weekly activity data:', e);
                weeklyActivityData = {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    data: [0, 0, 0, 0, 0, 0, 0]
                };
            }
            {{/weekly_activity_json}}
            {{^weekly_activity_json}}
            // Fallback to default data if not available
            weeklyActivityData = {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                data: [0, 0, 0, 0, 0, 0, 0],
                completion_data: [0, 0, 0, 0, 0, 0, 0],
                quiz_counts: [0, 0, 0, 0, 0, 0, 0],
                submission_counts: [0, 0, 0, 0, 0, 0, 0],
                forum_counts: [0, 0, 0, 0, 0, 0, 0],
                detailed_data: []
            };
            hsWeeklyActivityData = weeklyActivityData;
            {{/weekly_activity_json}}
            createWeeklyActivityChart(weeklyActivityCtx, weeklyActivityData);
        } else {
            console.error('Weekly activity canvas not found!');
        }

        // Performance Trend Chart
        const performanceTrendCtx = document.getElementById('performanceTrendChart');
        if (performanceTrendCtx && hsPerformanceTrendData) {
            createPerformanceTrendChart(performanceTrendCtx, hsPerformanceTrendData);
        }

        // Progress Chart
        const progressCtx = document.getElementById('progressChart');
        console.log('Progress canvas found:', progressCtx);
        if (progressCtx) {
            createProgressChart(progressCtx);
        } else {
            console.error('Progress canvas not found!');
        }
        
        // Subject Chart
        const subjectCtx = document.getElementById('subjectChart');
        console.log('Subject canvas found:', subjectCtx);
        if (subjectCtx) {
            createSubjectChart(subjectCtx, hsSubjectDistributionData);
        } else {
            console.error('Subject canvas not found!');
        }
    }
    
    function createWeeklyActivityChart(canvas, activityData) {
        console.log('Creating weekly activity chart...');
        console.log('Canvas element:', canvas);
        console.log('Activity data:', activityData);
        
        // Check if Chart.js is loaded
        if (typeof Chart === 'undefined') {
            console.error('Chart.js is not loaded!');
            return;
        }
        
        // Use real data from PHP backend
        const weeklyData = {
            labels: activityData.labels || ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            datasets: [{
                label: 'Activities Completed',
                data: activityData.data || [0, 0, 0, 0, 0, 0, 0],
                backgroundColor: [
                    'rgba(255, 107, 107, 0.8)',   // Coral
                    'rgba(78, 205, 196, 0.8)',    // Teal
                    'rgba(52, 152, 219, 0.8)',    // Blue
                    'rgba(46, 204, 113, 0.8)',    // Green
                    'rgba(155, 89, 182, 0.8)',    // Purple
                    'rgba(241, 196, 15, 0.8)',    // Yellow
                    'rgba(149, 165, 166, 0.8)'    // Gray
                ],
                borderColor: [
                    'rgba(255, 107, 107, 1)',
                    'rgba(78, 205, 196, 1)',
                    'rgba(52, 152, 219, 1)',
                    'rgba(46, 204, 113, 1)',
                    'rgba(155, 89, 182, 1)',
                    'rgba(241, 196, 15, 1)',
                    'rgba(149, 165, 166, 1)'
                ],
                borderWidth: 2,
                borderRadius: 8,
                borderSkipped: false,
            }]
        };

        const config = {
            type: 'bar',
            data: weeklyData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: 'white',
                        bodyColor: 'white',
                        borderColor: 'rgba(255, 255, 255, 0.2)',
                        borderWidth: 1,
                        cornerRadius: 8,
                        displayColors: false,
                        callbacks: {
                            title: function(context) {
                                return context[0].label + 'day';
                            },
                            label: function(context) {
                                return context.parsed.y + ' activities completed';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: Math.max(10, Math.max(...(activityData.data || [0])) + 2),
                        ticks: {
                            stepSize: 1,
                            color: '#6B7280',
                            font: {
                                size: 12,
                                weight: '500'
                            }
                        },
                        grid: {
                            color: 'rgba(107, 114, 128, 0.1)',
                            drawBorder: false
                        },
                        border: {
                            display: false
                        }
                    },
                    x: {
                        ticks: {
                            color: '#6B7280',
                            font: {
                                size: 12,
                                weight: '500'
                            }
                        },
                        grid: {
                            display: false
                        },
                        border: {
                            display: false
                        }
                    }
                },
                animation: {
                    duration: 2000,
                    easing: 'easeInOutQuart',
                    delay: function(context) {
                        return context.dataIndex * 200;
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                }
            }
        };

        try {
            const chart = new Chart(canvas, config);
            console.log('Weekly activity chart created successfully:', chart);
        } catch (error) {
            console.error('Error creating weekly activity chart:', error);
        }
    }

    function createPerformanceTrendChart(canvas, trendData) {
        if (typeof Chart === 'undefined') {
            console.error('Chart.js is not loaded!');
            return;
        }

        if (!trendData || !trendData.labels || !trendData.labels.length) {
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.font = '16px Arial';
            ctx.fillStyle = '#666';
            ctx.textAlign = 'center';
            ctx.fillText('Performance data not available', canvas.width / 2, canvas.height / 2);
            return;
        }

        const ctx = canvas.getContext('2d');
        const gradProgress = ctx.createLinearGradient(0, 0, 0, canvas.height);
        gradProgress.addColorStop(0, 'rgba(59, 130, 246, 0.35)');
        gradProgress.addColorStop(1, 'rgba(59, 130, 246, 0.05)');

        const gradGrade = ctx.createLinearGradient(0, 0, 0, canvas.height);
        gradGrade.addColorStop(0, 'rgba(16, 185, 129, 0.35)');
        gradGrade.addColorStop(1, 'rgba(16, 185, 129, 0.05)');

        const datasets = [
            {
                label: 'Course Progress (%)',
                data: trendData.progress || [],
                borderColor: '#3b82f6',
                backgroundColor: gradProgress,
                fill: true,
                borderWidth: 3,
                tension: 0.35,
                pointRadius: 4,
                pointHoverRadius: 6,
                pointBackgroundColor: '#ffffff',
                pointBorderColor: '#3b82f6',
                pointBorderWidth: 2
            },
            {
                label: 'Grade (%)',
                data: trendData.grade || [],
                borderColor: '#10b981',
                backgroundColor: gradGrade,
                fill: true,
                borderWidth: 3,
                tension: 0.35,
                pointRadius: 4,
                pointHoverRadius: 6,
                pointBackgroundColor: '#ffffff',
                pointBorderColor: '#10b981',
                pointBorderWidth: 2
            }
        ];

        new Chart(canvas, {
            type: 'line',
            data: {
                labels: trendData.labels,
                datasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 12,
                            color: '#475569',
                            font: {
                                size: 12,
                                weight: '600'
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        cornerRadius: 10,
                        padding: 12,
                        callbacks: {
                            label: (ctx) => `${ctx.dataset.label}: ${ctx.formattedValue}%`
                        }
                    }
                },
                interaction: {
                    mode: 'index',
                    intersect: false
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        grid: {
                            color: 'rgba(148, 163, 184, 0.2)',
                            drawBorder: false
                        },
                        ticks: {
                            color: '#475569',
                            font: { size: 12, weight: '600' },
                            callback: (value) => `${value}%`
                        }
                    },
                    x: {
                        grid: { display: false },
                        ticks: {
                            color: '#475569',
                            font: { size: 12, weight: '600' },
                            maxRotation: 45,
                            minRotation: 45
                        }
                    }
                },
                animation: {
                    duration: 1500,
                    easing: 'easeInOutQuart'
                }
            }
        });
    }

    
    function createProgressChart(canvas) {
        console.log('Creating progress line chart...');
        console.log('Canvas element:', canvas);
        
        // Check if Chart.js is loaded
        if (typeof Chart === 'undefined') {
            console.error('Chart.js is not loaded!');
            return;
        }
        
        // Dummy data for learning progress over time (last 12 weeks)
        const progressData = {
            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8', 'Week 9', 'Week 10', 'Week 11', 'Week 12'],
            datasets: [{
                label: 'Learning Progress',
                data: [15, 22, 28, 35, 42, 48, 55, 61, 67, 72, 75, 78],
                borderColor: 'rgba(255, 107, 107, 1)',
                backgroundColor: 'rgba(255, 107, 107, 0.1)',
                borderWidth: 3,
                fill: true,
                tension: 0.4,
                pointBackgroundColor: 'rgba(255, 107, 107, 1)',
                pointBorderColor: '#fff',
                pointBorderWidth: 2,
                pointRadius: 6,
                pointHoverRadius: 8
            }, {
                label: 'Target Goals',
                data: [20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75],
                borderColor: 'rgba(78, 205, 196, 1)',
                backgroundColor: 'rgba(78, 205, 196, 0.1)',
                borderWidth: 2,
                borderDash: [5, 5],
                fill: false,
                tension: 0.4,
                pointBackgroundColor: 'rgba(78, 205, 196, 1)',
                pointBorderColor: '#fff',
                pointBorderWidth: 2,
                pointRadius: 4,
                pointHoverRadius: 6
            }]
        };

        const config = {
            type: 'line',
            data: progressData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false // We have custom legend in HTML
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: 'white',
                        bodyColor: 'white',
                        borderColor: 'rgba(255, 255, 255, 0.2)',
                        borderWidth: 1,
                        cornerRadius: 8,
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.y + '%';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            stepSize: 10,
                            color: '#6B7280',
                            font: {
                                size: 11,
                                weight: '500'
                            },
                            callback: function(value) {
                                return value + '%';
                            }
                        },
                        grid: {
                            color: 'rgba(107, 114, 128, 0.1)',
                            drawBorder: false
                        },
                        border: {
                            display: false
                        }
                    },
                    x: {
                        ticks: {
                            color: '#6B7280',
                            font: {
                                size: 11,
                                weight: '500'
                            },
                            maxTicksLimit: 8
                        },
                        grid: {
                            display: false
                        },
                        border: {
                            display: false
                        }
                    }
                },
                animation: {
                    duration: 2000,
                    easing: 'easeInOutQuart'
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                }
            }
        };

        try {
            const chart = new Chart(canvas, config);
            console.log('Progress line chart created successfully:', chart);
        } catch (error) {
            console.error('Error creating progress line chart:', error);
        }
    }
    
    function createSubjectChart(canvas, subjectData) {
        console.log('Creating subject chart...');
        console.log('Canvas element:', canvas);
        
        if (typeof Chart === 'undefined') {
            console.error('Chart.js is not loaded!');
            return;
        }

        const hasData = subjectData && Array.isArray(subjectData.labels) && subjectData.labels.length;
        if (!hasData) {
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.font = '16px "Poppins", Arial';
            ctx.fillStyle = '#94a3b8';
            ctx.textAlign = 'center';
            ctx.fillText('Subject insights will appear once activity is recorded.', canvas.width / 2, canvas.height / 2);
            return;
        }

        const dataset = {
            labels: subjectData.labels,
            datasets: [{
                data: subjectData.data,
                backgroundColor: subjectData.backgroundColor,
                borderColor: subjectData.borderColor,
                borderWidth: 2,
                hoverOffset: 12
            }]
        };

        const metaSubjects = Array.isArray(subjectData.subjects) ? subjectData.subjects : [];

        const config = {
            type: 'doughnut',
            data: dataset,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '55%',
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        titleColor: '#e2e8f0',
                        bodyColor: '#f8fafc',
                        borderColor: 'rgba(255, 255, 255, 0.15)',
                        borderWidth: 1,
                        cornerRadius: 10,
                        callbacks: {
                            label: function(context) {
                                const index = context.dataIndex;
                                const meta = metaSubjects[index];
                                if (!meta) {
                                    return `${context.label}: ${context.parsed}`;
                                }
                                return `${meta.label}: ${meta.avg_progress}% avg â€¢ ${meta.courses} courses`;
                            }
                        }
                    }
                },
                animation: {
                    animateRotate: true,
                    animateScale: true,
                    duration: 1600
                }
            }
        };

        try {
            const chart = new Chart(canvas, config);
            console.log('Subject chart created successfully:', chart);
        } catch (error) {
            console.error('Error creating subject chart:', error);
        }
    }
    
    function initializeAnalytics() {
        // Simulate real-time data updates
        updateAnalyticsData('week');
        
        // Update analytics every 30 seconds
        setInterval(() => {
            const activeBtn = document.querySelector('.time-btn.active');
            if (activeBtn) {
                updateAnalyticsData(activeBtn.dataset.period);
            }
        }, 30000);
    }
    
    function updateAnalyticsData(period) {
        console.log('Updating analytics for period:', period);
        
        // Simulate data fetching based on period
        const mockData = {
            'week': {
                courses: 5,
                lessons: 23,
                activities: 18,
                progress: 78
            },
            'month': {
                courses: 5,
                lessons: 89,
                activities: 67,
                progress: 82
            },
            'semester': {
                courses: 6,
                lessons: 234,
                activities: 189,
                progress: 85
            }
        };
        
        const data = mockData[period] || mockData['week'];
        
        // Update metric cards with animation
        const metricCards = document.querySelectorAll('.metric-card');
        metricCards.forEach((card, index) => {
            const valueElement = card.querySelector('.metric-value');
            const currentValue = parseInt(valueElement.textContent);
            const targetValue = Object.values(data)[index];
            
            animateValue(valueElement, currentValue, targetValue, 1000);
        });
        
        // Update charts
        const progressCtx = document.getElementById('progressChart');
        if (progressCtx) {
            createProgressChart(progressCtx);
        }
    }
    
    function animateValue(element, start, end, duration) {
        const startTime = performance.now();
        
        function updateValue(currentTime) {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            
            const current = Math.round(start + (end - start) * progress);
            element.textContent = current + (element.textContent.includes('%') ? '%' : '');
            
            if (progress < 1) {
                requestAnimationFrame(updateValue);
            }
        }
    };
    
    // Modal functionality - moved to jQuery require block below
    
    // Modal functionality - moved to jQuery require block below
    
     
    function initializeAnimations() {
        // Add entrance animations
        const cards = document.querySelectorAll('.metric-card, .course-card, .insight-card');
        cards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            
            setTimeout(() => {
                card.style.transition = 'all 0.6s ease';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 100);
        });
    }
    
    function filterCourses(filter) {
        const courseCards = document.querySelectorAll('.course-card');
        
        courseCards.forEach(card => {
            const courseTitle = card.querySelector('.course-title').textContent.toLowerCase();
            let shouldShow = true;
            
            switch(filter) {
                case 'In Progress':
                    shouldShow = courseTitle.includes('math') || courseTitle.includes('science');
                    break;
                case 'Completed':
                    shouldShow = courseTitle.includes('english') || courseTitle.includes('history');
                    break;
                case 'Upcoming':
                    shouldShow = courseTitle.includes('art') || courseTitle.includes('music');
                    break;
            }
            
            card.style.display = shouldShow ? 'block' : 'none';
        });
    }
    
    
    function handleDeadlineAction(action, button) {
        const deadlineItem = button.closest('.deadline-item');
        const deadlineTitle = deadlineItem.querySelector('h4').textContent;
        
        console.log(`Handling ${action} for ${deadlineTitle}`);
        
        // Add visual feedback
        deadlineItem.style.background = '#C6F6D5';
        setTimeout(() => {
            deadlineItem.style.background = '';
        }, 2000);
        
        // Show success message
        const originalText = button.textContent;
        button.textContent = 'Done!';
        button.style.background = '#38A169';
        button.style.color = 'white';
        
        setTimeout(() => {
            button.textContent = originalText;
            button.style.background = '';
            button.style.color = '';
        }, 2000);
    }
    
    // Add smooth scrolling for better UX
    function smoothScrollTo(element) {
        element.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });
    }
    
    // Add keyboard navigation support
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey || e.metaKey) {
            switch(e.key) {
                case '1':
                    e.preventDefault();
                    const welcomeSection = document.querySelector('.highschool-welcome-header');
                    if (welcomeSection) smoothScrollTo(welcomeSection);
                    break;
                case '2':
                    e.preventDefault();
                    const coursesSection = document.querySelector('.course-management');
                    if (coursesSection) smoothScrollTo(coursesSection);
                    break;
                case '3':
                    e.preventDefault();
                    const insightsSection = document.querySelector('.learning-insights');
                    if (insightsSection) smoothScrollTo(insightsSection);
                    break;
        }
    }
});

// Enhanced Course Cards Functionality
function toggleCourseDetails(courseId) {
    const detailsPanel = document.getElementById('details-' + courseId);
    const detailsBtn = document.querySelector(`[onclick*="toggleCourseDetails(${courseId})"]`);
    
    if (!detailsPanel) {
        console.log('Course details panel not found for ID:', courseId);
        return;
    }
    
    if (!detailsBtn) {
        console.log('Course details button not found for ID:', courseId);
        return;
    }
    
    if (detailsPanel.style.display === 'none' || detailsPanel.style.display === '') {
        detailsPanel.style.display = 'block';
        detailsBtn.innerHTML = '<i class="fa fa-times"></i>';
        detailsBtn.classList.add('active');
    } else {
        detailsPanel.style.display = 'none';
        detailsBtn.innerHTML = '<i class="fa fa-info-circle"></i>';
        detailsBtn.classList.remove('active');
    }
}

// Enhanced Section Details Functionality
function toggleSectionDetails(sectionId) {
    console.log('Toggle section details for:', sectionId);
    
    // Create a modal or expandable panel for section details
    const sectionCard = document.querySelector(`[data-section-id="${sectionId}"]`);
    if (sectionCard) {
        // Add visual feedback
        sectionCard.style.transform = 'scale(1.02)';
        setTimeout(() => {
            sectionCard.style.transform = '';
        }, 200);
        
        // Show section details (you can expand this with actual data)
        alert(`Section ${sectionId} details:\n\nâ€¢ Progress: 75%\nâ€¢ Activities: 8/12 completed\nâ€¢ Time spent: 2.5 hours\nâ€¢ Next activity: Quiz 3`);
    }
}

// Course Card Animations and Interactions
document.addEventListener('DOMContentLoaded', function() {
    // Add hover effects to course cards
    const courseCards = document.querySelectorAll('.elementary-course-card.enhanced');
    
    courseCards.forEach(card => {
        // Add entrance animation
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
            card.style.transition = 'all 0.6s ease';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, Math.random() * 300);
        
        // Add hover effects
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.boxShadow = '0 10px 30px rgba(0,0,0,0.2)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
        });
    });
    
    // Animate progress bars
    const progressBars = document.querySelectorAll('.progress-fill');
    progressBars.forEach(bar => {
        const width = bar.style.width;
        bar.style.width = '0%';
        setTimeout(() => {
            bar.style.width = width;
        }, 500);
    });
    
    // Add click animations to buttons
    const courseButtons = document.querySelectorAll('.course-button');
    courseButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 150);
        });
    });
});
</script>

{{#show_aiassistant}}
<!-- AI Learning Assistant now opens as full page - no modal JavaScript needed -->
{{/show_aiassistant}}
    
    {{#default}}
        <div class="default-dashboard">
            <div class="row">
                <div class="col-12">
                    <div class="card border-secondary">
                        <div class="card-header bg-secondary text-white">
                            <h5 class="mb-0"><i class="fa fa-home"></i> Default Dashboard</h5>
                        </div>
                        <div class="card-body">
                            <p>This is the default dashboard for users not assigned to specific grade cohorts111.</p>
                            <p>You can customize this dashboard or assign users to appropriate grade cohorts.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {{/default}}
{{/dashboard_type}}

</div>

{{/custom_dashboard}}

{{# output.main_content }}
<!-- Regular Dashboard Content (only shown when there is main content) -->
<div class="dashboard-content">
    <div id="region-main-box" class="d-print-block">
        <section id="region-main" class="d-print-block" aria-label="{{#str}}content{{/str}}">
            <div class="rui-course-content">
                {{{ output.main_content }}}
            </div>
        </section>
    </div>
</div>
{{/ output.main_content }}

<script>

// Check if require is available, otherwise use jQuery directly
if (typeof require !== 'undefined') {
    require(['jquery'], function($) {
        initDashboardFunctionality($);
    });
} else if (typeof jQuery !== 'undefined') {
    initDashboardFunctionality(jQuery);
} else {
    console.error('Neither require nor jQuery is available');
}

function initDashboardFunctionality($) {
    $(document).ready(function() {
        // Store course sections data from PHP
        var coursesSectionsData = {};
        try {
            var rawData = '{{{middle_courses_sections}}}';
            // Clean the JSON data by removing problematic characters
            rawData = rawData.replace(/&amp;/g, '&');
            rawData = rawData.replace(/&lt;/g, '<');
            rawData = rawData.replace(/&gt;/g, '>');
            rawData = rawData.replace(/&quot;/g, '"');
            rawData = rawData.replace(/&#x27;/g, "'");
            coursesSectionsData = JSON.parse(rawData);
            console.log('Course sections data loaded:', coursesSectionsData);
        } catch (e) {
            console.error('Error parsing course sections data:', e);
            console.log('Raw data:', '{{{middle_courses_sections}}}');
        }
        
                
        // Function to display course sections with tree view
        function displayCourseSections(courseId) {
            console.log('Displaying sections for course ID:', courseId);
            console.log('Available course data:', coursesSectionsData);
            
            var sectionsData = coursesSectionsData[courseId];
            console.log('Sections data for course:', sectionsData);
            
            if (!sectionsData || !sectionsData.sections || sectionsData.sections.length === 0) {
                console.log('No sections data available');
                $('#sectionsList').html('<div class="no-sections"><i class="fa fa-info-circle"></i> No sections available for this course. The course may not have any activities yet.</div>');
                return;
            }
            
            var sectionsHtml = '';
            
            sectionsData.sections.forEach(function(section, index) {
                var progressBar = '';
                if (section.total_activities > 0) {
                    var progressPercent = section.progress;
                    progressBar = '<div class="section-progress"><div class="progress-bar"><div class="progress-fill" style="width: ' + progressPercent + '%"></div></div><span class="progress-text">' + section.completed_activities + '/' + section.total_activities + ' activities</span></div>';
                }
                
                // Activities list (initially hidden)
                var activitiesList = '';
                if (section.activities && section.activities.length > 0) {
                    activitiesList = '<div class="section-activities collapsed" id="activities-' + index + '">';
                    activitiesList += '<div class="activities-header"><span class="activities-count">' + section.activities.length + ' activities</span></div>';
                    activitiesList += '<ul class="activities-list">';
                    
                    section.activities.forEach(function(activity) {
                        var statusIcon = activity.iscompleted ? 'fa-check-circle' : 'fa-circle-o';
                        var activityType = activity.modname || 'activity';
                        var activityIcon = getActivityIcon(activity.modname);
                        var buttonText = activity.iscompleted ? 'Review' : 'Start';
                        var buttonClass = activity.iscompleted ? 'review-btn' : 'start-btn';
                        
                        activitiesList += '<li class="activity-item">' +
                            '<div class="activity-icon">' + activityIcon + '</div>' +
                            '<div class="activity-content">' +
                                '<div class="activity-name">' + activity.name + '</div>' +
                                '<div class="activity-meta">' + activityType + '</div>' +
                            '</div>' +
                            '<div class="activity-actions">' +
                                '<div class="activity-status ' + (activity.iscompleted ? 'completed' : 'pending') + '">' +
                                    '<i class="fa ' + statusIcon + '"></i>' +
                                '</div>' +
                                '<a href="' + activity.url + '" class="activity-start-btn ' + buttonClass + '" target="_blank">' +
                                    '<i class="fa fa-play"></i> ' + buttonText +
                                '</a>' +
                            '</div>' +
                        '</li>';
                    });
                    
                    activitiesList += '</ul></div>';
                }
                
                sectionsHtml += '<div class="section-item" data-section-index="' + index + '">' +
                    '<div class="section-header clickable" onclick="toggleSection(' + index + ')">' +
                        '<div class="section-left">' +
                            '<i class="fa fa-chevron-right section-toggle-icon" id="toggle-' + index + '"></i>' +
                            '<div class="section-info">' +
                                '<h6 class="section-name">' + section.name + '</h6>' +
                                '<div class="section-meta">' + section.total_activities + ' activities</div>' +
                            '</div>' +
                        '</div>' +
                        '<div class="section-right">' +
                            '<a href="' + section.url + '" class="section-start-btn" target="_blank">' +
                                '<i class="fa fa-play"></i> Start Section' +
                            '</a>' +
                        '</div>' +
                    '</div>' +
                    progressBar +
                    activitiesList +
                '</div>';
            });
            
            $('#sectionsList').html(sectionsHtml);
        }
        
        // Function to toggle section expansion
        window.toggleSection = function(index) {
            var activitiesDiv = $('#activities-' + index);
            var toggleIcon = $('#toggle-' + index);
            
            if (activitiesDiv.hasClass('collapsed')) {
                // Expand
                activitiesDiv.removeClass('collapsed').addClass('expanded');
                toggleIcon.removeClass('fa-chevron-right').addClass('fa-chevron-down');
            } else {
                // Collapse
                activitiesDiv.removeClass('expanded').addClass('collapsed');
                toggleIcon.removeClass('fa-chevron-down').addClass('fa-chevron-right');
            }
        }
        
        // Function to get activity icon based on module type
        function getActivityIcon(modname) {
            var icons = {
                'quiz': '<i class="fa fa-question-circle"></i>',
                'assign': '<i class="fa fa-file-text"></i>',
                'page': '<i class="fa fa-file"></i>',
                'lesson': '<i class="fa fa-graduation-cap"></i>',
                'forum': '<i class="fa fa-comments"></i>',
                'scorm': '<i class="fa fa-laptop"></i>',
                'book': '<i class="fa fa-book"></i>',
                'url': '<i class="fa fa-external-link"></i>',
                'video': '<i class="fa fa-play-circle"></i>',
                'resource': '<i class="fa fa-file"></i>'
            };
            return icons[modname] || '<i class="fa fa-star"></i>';
        }
        
    });
    
    // Student Sidebar Functionality
    $(document).ready(function() {
        // Add body class for content shifting
        $('body').addClass('has-student-sidebar');
        $('body').addClass('custom-dashboard-page');
        
        // Handle sidebar navigation clicks - only for links with href="#"
        $('.student-sidebar .nav-link[href="#"]').on('click', function(e) {
            e.preventDefault();
            
            // Remove active class from all links
            $('.student-sidebar .nav-link').removeClass('active');
            
            // Add active class to clicked link
            $(this).addClass('active');
            
            // Get the link text to determine action
            var linkText = $(this).find('span').text().trim();
            
            // Get the current base URL
            var baseUrl = window.location.origin + window.location.pathname.split('/').slice(0, -1).join('/');
            if (baseUrl.endsWith('/')) {
                baseUrl = baseUrl.slice(0, -1);
            }
            
            // Handle different navigation items
            switch(linkText) {
                case 'Home':
                    // Already on home/dashboard
                    break;
                case 'Dashboard':
                    window.location.href = baseUrl + '/';
                    break;
                case 'My Courses':
                    window.location.href = baseUrl + '/courses.php';
                    break;
                case 'My Grades':
                    window.location.href = baseUrl + '/grade/report/user/index.php';
                    break;
                case 'Assignments':
                    window.location.href = baseUrl + '/mod/assign/index.php';
                    break;
                case 'Messages':
                    window.location.href = baseUrl + '/message/index.php';
                    break;
                case 'Scratch Emulator':
                    // Open scratch emulator in new tab
                    window.open(baseUrl + '/mod/scratch/view.php', '_blank');
                    break;
                case 'Lessons':
                    window.location.href = baseUrl + '/mod/lesson/index.php';
                    break;
                case 'Activities':
                    window.location.href = baseUrl + '/mod/quiz/index.php';
                    break;
                case 'Achievements':
                    window.location.href = baseUrl + '/theme/remui_kids/achievements.php';
                    break;
                case 'Competencies':
                    window.location.href = baseUrl + '/theme/remui_kids/competencies.php';
                    break;
                case 'Schedule':
                    window.location.href = baseUrl + '/theme/remui_kids/elementary_calendar.php';
                    break;
                case 'Tree View':
                    window.location.href = baseUrl + '/theme/remui_kids/treeview.php';
                    break;
                case 'Settings':
                    window.location.href = baseUrl + '/user/preferences.php';
                    break;
                default:
                    console.log('Navigation to:', linkText);
            }
        });
        
        // Add CSS for quick action buttons
        $('<style>')
            .prop('type', 'text/css')
            .html(`
                .quick-action-btn {
                    cursor: pointer !important;
                    transition: all 0.3s ease;
                    border-radius: 8px;
                    padding: 15px;
                    margin-bottom: 10px;
                    display: flex;
                    align-items: center;
                    background: white;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                    text-decoration: none !important;
                    color: inherit !important;
                }
                .quick-action-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
                    text-decoration: none !important;
                    color: inherit !important;
                }
                .quick-action-btn.blue {
                    border-left: 4px solid #3b82f6;
                }
                .quick-action-btn.green {
                    border-left: 4px solid #10b981;
                }
                .quick-action-btn.orange {
                    border-left: 4px solid #f59e0b;
                }
                .action-icon {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    margin-right: 15px;
                }
                .quick-action-btn.blue .action-icon {
                    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
                }
                .quick-action-btn.green .action-icon {
                    background: linear-gradient(135deg, #10b981, #047857);
                }
                .quick-action-btn.orange .action-icon {
                    background: linear-gradient(135deg, #f59e0b, #d97706);
                }
                .action-icon i {
                    color: white;
                    font-size: 16px;
                }
                .action-content {
                    flex: 1;
                }
                .action-title {
                    font-weight: 600;
                    color: #2c3e50;
                    margin: 0 0 5px 0;
                    font-size: 14px;
                }
                .action-desc {
                    color: #6c757d;
                    margin: 0;
                    font-size: 12px;
                }
                .action-arrow {
                    color: #6c757d;
                    font-size: 14px;
                }
            `)
            .appendTo('head');
        
        // Handle Quick Action Cards - Only for high school sidebar (not elementary)
        $('.student-sidebar .quick-action-btn, .highschool-dashboard .quick-action-btn').on('click', function(e) {
            // Only prevent default if this is NOT an <a> tag with href
            if ($(this).is('a') && $(this).attr('href') && $(this).attr('href') !== '#') {
                return; // Let the link work normally
            }
            
            e.preventDefault();
            
            var cardType = $(this).data('card-type'); // Get the card type from data attribute
            console.log('Quick action clicked:', cardType); // Debug log
            
            // Get the current base URL - simplified approach
            var baseUrl = window.location.origin;
            console.log('Base URL:', baseUrl); // Debug log
            
            // Handle different quick action cards
            switch(cardType) {
                case 'ebooks-card':
                    var targetUrl = baseUrl + '/kodeit/iomad/theme/remui_kids/ebooks.php';
                    console.log('Redirecting to:', targetUrl); // Debug log
                    window.location.href = targetUrl;
                    break;
                case 'ask-teacher-card':
                    var targetUrl = baseUrl + '/kodeit/iomad/theme/remui_kids/pages/student_doubts.php';
                    console.log('Redirecting to:', targetUrl); // Debug log
                    window.location.href = targetUrl;
                    break;
                case 'share-class-card':
                    window.location.href = baseUrl + '/mod/forum/index.php';
                    break;
                case 'scratch-editor-card':
                    window.location.href = baseUrl + '/theme/remui_kids/scratch_simple.php';
                    break;
                case 'code-editor-card':
                    window.location.href = baseUrl + '/theme/remui_kids/code_editor_simple.php';
                    break;
                default:
                    console.log('Quick action clicked:', cardType);
            }
        });
        
        // Mobile sidebar toggle (if needed)
        $('.student-sidebar-toggle').on('click', function() {
            $('.student-sidebar').toggleClass('show');
        });
    });
}

</script>

<!-- School Event Details Modal -->
<div id="schoolEventModal" class="school-event-modal" style="display: none;">
    <div class="school-event-modal-content">
        <div class="school-event-modal-header">
            <h3 id="schoolEventTitle">Event Details</h3>
            <button class="school-event-modal-close" onclick="closeSchoolEventModal()">&times;</button>
        </div>
        <div class="school-event-modal-body">
            <div id="schoolEventContent">
                <!-- Event details will be inserted here -->
            </div>
        </div>
    </div>
</div>

<script>
// School Event Modal Functions
function showSchoolEventModal(event) {
    const modal = document.getElementById('schoolEventModal');
    const titleEl = document.getElementById('schoolEventTitle');
    const contentEl = document.getElementById('schoolEventContent');
    
    if (!modal || !titleEl || !contentEl) {
        console.error('Modal elements not found');
        return;
    }
    
    // Extract event data
    const eventName = event.title || event.name || 'School Event';
    const eventType = event.type || event.event_type || 'Event';
    const eventDate = event.date || '';
    const eventTime = event.time || '';
    const eventTimeEnd = event.time_end || '';
    const eventDescription = event.description || '';
    const eventColor = event.color || '#3b82f6';
    
    // Format date
    let formattedDate = '';
    if (eventDate) {
        const dateObj = new Date(eventDate + 'T00:00:00');
        formattedDate = dateObj.toLocaleDateString('en-US', { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });
    }
    
    // Format time range - use 24-hour format
    let timeRange = eventTime;
    if (eventTimeEnd) {
        timeRange = eventTime + ' - ' + eventTimeEnd;
    } else if (eventTime) {
        timeRange = eventTime;
    }
    
    // Set title (remove school icon if present)
    titleEl.textContent = eventName.replace('ðŸ« ', '');
    
    // Get type color - red for exam, use event color for others
    const typeColor = (eventType.toUpperCase() === 'EXAM') ? '#ef4444' : eventColor;
    
    // Build content HTML with improved styling
    let contentHTML = `
        <div class="event-detail-item">
            <label class="event-detail-label">TYPE:</label>
            <span class="event-type-badge-modal" style="color: ${typeColor}; font-weight: 600; text-transform: uppercase; font-size: 0.875rem;">${eventType.toUpperCase()}</span>
        </div>
        <div class="event-detail-item">
            <label class="event-detail-label">DATE:</label>
            <span class="event-detail-value">${formattedDate || eventDate || 'N/A'}</span>
        </div>
        <div class="event-detail-item">
            <label class="event-detail-label">TIME:</label>
            <span class="event-detail-value">${timeRange || 'N/A'}</span>
        </div>
        <div class="event-detail-item">
            <label class="event-detail-label">DESCRIPTION:</label>
            <textarea class="event-description-text" readonly>${eventDescription || 'No description available'}</textarea>
        </div>
    `;
    
    contentEl.innerHTML = contentHTML;
    modal.style.display = 'flex';
}

function closeSchoolEventModal() {
    const modal = document.getElementById('schoolEventModal');
    if (modal) {
        modal.style.display = 'none';
    }
}

// Close modal when clicking outside
document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('schoolEventModal');
    if (modal) {
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                closeSchoolEventModal();
            }
        });
    }
});
</script>
<style>
/* Force course-level-badge width - highest priority */
.elementary-course-card.enhanced .course-image-container .course-level-badge,
.enhanced-course-card .course-image-container .course-level-badge,
.elementary-courses-container .course-level-badge,
.course-image-container .course-level-badge {
    min-width: 80px !important;
    width: auto !important;
    max-width: 120px !important;
    padding: 6px 12px !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    display: inline-block !important;
    box-sizing: border-box !important;
    z-index: 10 !important;
}

/* School Event Modal Styles */
.school-event-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.school-event-modal-content {
    background: white;
    border-radius: 16px;
    width: 90%;
    max-width: 520px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.25);
    animation: slideUp 0.3s ease;
    border: 1px solid #e5e7eb;
}

@keyframes slideUp {
    from {
        transform: translateY(20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.school-event-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 28px;
    border-bottom: 1px solid #f1f5f9;
    background: linear-gradient(to bottom, #ffffff, #fafbfc);
}

.school-event-modal-header h3 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 700;
    color: #1e293b;
    letter-spacing: -0.02em;
}

.school-event-modal-close {
    background: none;
    border: none;
    font-size: 28px;
    color: #64748b;
    cursor: pointer;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    transition: all 0.2s ease;
}

.school-event-modal-close:hover {
    background: #f1f5f9;
    color: #1e293b;
}

.school-event-modal-body {
    padding: 28px;
}

.event-detail-item {
    margin-bottom: 24px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.event-detail-item:last-child {
    margin-bottom: 0;
}

.event-detail-label {
    font-size: 0.8125rem;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
}

.event-detail-value {
    font-size: 1rem;
    color: #1e293b;
    font-weight: 500;
    line-height: 1.5;
}

.event-type-badge-modal {
    display: inline-block;
    font-size: 0.9375rem;
    font-weight: 700;
    letter-spacing: 0.3px;
}

.event-description-text {
    margin-top: 4px;
    padding: 12px 14px;
    background: #ffffff;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 0.9375rem;
    color: #1e293b;
    line-height: 1.6;
    min-height: 50px;
    font-family: inherit;
    resize: none;
    width: 100%;
    box-sizing: border-box;
    cursor: default;
    transition: border-color 0.2s ease;
}

.event-description-text:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}
</style>
{{> theme_remui/common_end}}
